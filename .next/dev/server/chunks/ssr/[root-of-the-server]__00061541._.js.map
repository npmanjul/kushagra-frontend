{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/anjulsachan/Documents/grain_bank/Frontend/src/utils/constants.js"],"sourcesContent":["console.log(\"NEXT_PUBLIC_API_URL =\", process.env.NEXT_PUBLIC_API_URL);\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"___MISSING_ENV___\";\n\nexport default API_BASE_URL;"],"names":[],"mappings":";;;;AAAA,QAAQ,GAAG,CAAC;AAEZ,MAAM,eAAe,oEAAmC;uCAEzC"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///Users/anjulsachan/Documents/grain_bank/Frontend/src/store/useStore.js"],"sourcesContent":["import API_BASE_URL from \"@/utils/constants\";\nimport { create } from \"zustand\";\n\nconst useStore = create((set, get) => ({\n  // Example state\n  currStep: 2,\n\n  // Example actions\n  setCurrStep: (value) => set({ currStep: value }),\n\n  // ✅ Fetch current step\n  getCurrentStep: async () => {\n    try {\n      const response = await fetch(\n        `${API_BASE_URL}/register/currentstep`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        }\n      );\n\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error(\"Error fetching current step:\", error);\n      return null;\n    }\n  },\n\n  checkToken: async () => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/auth/checktoken`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        },\n      });\n\n      return await response.json();\n    } catch (error) {\n      console.error(\"Error occurred while checking token:\", error);\n      return null;\n    }\n  },\n  getprofile: async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/auth/getprofile`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n    });\n\n    return await response.json();\n  } catch (error) {\n    console.error(\"Error fetching user profile:\", error);\n    return null;\n  }\n},\n}));\n\n\n\nexport default useStore;\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,WAAW,IAAA,kJAAM,EAAC,CAAC,KAAK,MAAQ,CAAC;QACrC,gBAAgB;QAChB,UAAU;QAEV,kBAAkB;QAClB,aAAa,CAAC,QAAU,IAAI;gBAAE,UAAU;YAAM;QAE9C,uBAAuB;QACvB,gBAAgB;YACd,IAAI;gBACF,MAAM,WAAW,MAAM,MACrB,GAAG,oIAAY,CAAC,qBAAqB,CAAC,EACtC;oBACE,QAAQ;oBACR,SAAS;wBACP,gBAAgB;wBAChB,eAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,UAAU;oBAC1D;gBACF;gBAGF,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,OAAO;YACT,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gCAAgC;gBAC9C,OAAO;YACT;QACF;QAEA,YAAY;YACV,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,GAAG,oIAAY,CAAC,gBAAgB,CAAC,EAAE;oBAC9D,QAAQ;oBACR,SAAS;wBACP,gBAAgB;wBAChB,eAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,UAAU;oBAC1D;gBACF;gBAEA,OAAO,MAAM,SAAS,IAAI;YAC5B,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,wCAAwC;gBACtD,OAAO;YACT;QACF;QACA,YAAY;YACZ,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,GAAG,oIAAY,CAAC,gBAAgB,CAAC,EAAE;oBAC9D,QAAQ;oBACR,SAAS;wBACP,gBAAgB;wBAChB,eAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,UAAU;oBAC1D;gBACF;gBAEA,OAAO,MAAM,SAAS,IAAI;YAC5B,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gCAAgC;gBAC9C,OAAO;YACT;QACF;IACA,CAAC;uCAIc"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///Users/anjulsachan/Documents/grain_bank/Frontend/src/components/common/Loader.jsx"],"sourcesContent":["\"use client\";\nimport React from \"react\";\n\nexport default function Loader() {\n  return (\n    <div className=\" flex items-center justify-center \">\n      <span className=\"loader\"></span>\n\n      <style jsx>{`\n        .loader {\n          width: 48px;\n          height: 48px;\n          border: 5px solid #3b82f6; /* blue-500 */\n          border-bottom-color: transparent;\n          border-radius: 50%;\n          display: inline-block;\n          box-sizing: border-box;\n          animation: rotation 1s linear infinite;\n        }\n\n        @keyframes rotation {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      `}</style>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;;AACA;AADA;;;;AAGe,SAAS;IACtB,qBACE,8OAAC;kDAAc;;0BACb,8OAAC;0DAAe;;;;;;;;;;;;;;;;AAyBtB"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///Users/anjulsachan/Documents/grain_bank/Frontend/src/app/login/page.jsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState } from \"react\";\nimport { Eye, EyeOff, Mail, Phone, Lock } from \"lucide-react\";\nimport Link from \"next/link\";\nimport API_BASE_URL from \"@/utils/constants\"; // ✅ Make sure you have this file\nimport { useRouter } from \"next/navigation\";\nimport useStore from \"@/store/useStore\";\nimport toast from \"react-hot-toast\";\nimport Loader from \"@/components/common/Loader\";\n\nexport default function LoginPage() {\n  const [emailOrPhone, setEmailOrPhone] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const router = useRouter();\n  const { setCurrStep, checkToken } = useStore();\n\n  // ✅ Detect email or phone input\n  const detectInputType = (value) => {\n    const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    const phonePattern = /^[\\+]?[1-9][\\d]{0,15}$/;\n\n    if (emailPattern.test(value)) return \"email\";\n    if (phonePattern.test(value.replace(/[\\s\\-\\(\\)]/g, \"\"))) return \"phone\";\n    return \"text\";\n  };\n\n  const inputType = detectInputType(emailOrPhone);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!emailOrPhone || !password) return;\n\n    setIsLoading(true);\n    try {\n      // ✅ Send email if email, phone_number if phone\n      console.log(\"API_BASE_URL used in browser:\", API_BASE_URL);\n      const bodyData =\n        inputType === \"email\"\n          ? { email: emailOrPhone.trim(), password }\n          : { phone_number: emailOrPhone.trim(), password };\n\n      const response = await fetch(`${API_BASE_URL}/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(bodyData),\n      });\n\n      const data = await response.json();\n      console.log(\"Login response:\", data);\n      if (response.ok) {\n        localStorage.setItem(\"token\", data.token);\n        if (data.currentStep < 6 && data.role === \"farmer\") {\n          setCurrStep(data.currentStep + 1);\n          router.push(\"/register\");\n        } else {\n          if(data.role === \"farmer\"){\n            router.push(\"/dashboard\");\n          }else if(data.role === \"manager\"){\n            router.push(\"/manager\");\n          }else if(data.role === \"admin\"){\n            router.push(\"/admin\");\n          }else if(data.role === \"supervisor\"){\n            router.push(\"/supervisor\");\n          }\n        }\n        toast.success(\"Login successful\");\n        setIsLoading(false);\n      } else {\n        toast.error(`Login failed: ${data.error}`);\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      toast.error(\"Something went wrong. Please try again.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    const validateToken = async () => {\n      try {\n        const checkTokenValidation = await checkToken();\n        console.log(checkTokenValidation);\n\n        if (checkTokenValidation?.success) {\n          router.push(\"/dashboard\");\n        }\n      } catch (error) {\n        console.error(\"Token validation error:\", error);\n      }\n    };\n\n    validateToken();\n  }, [checkToken, router]);\n\n  // if(isLoading) {\n  //   return <Loader/>\n  // }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-8\">\n          {/* Header */}\n          <div className=\"text-center mb-5\">\n            <div className=\"inline-flex items-center justify-center w-12 h-12 bg-gray-900 rounded-xl mb-4\">\n              <Lock className=\"w-6 h-6 text-white\" />\n            </div>\n            <h1 className=\"text-2xl font-semibold text-gray-900 mb-1\">\n              Welcome back\n            </h1>\n            <p className=\"text-gray-600 text-sm\">\n              Please sign in to your account\n            </p>\n          </div>\n\n          {/* Form */}\n          <form className=\"space-y-2\" onSubmit={handleSubmit}>\n            {/* Email/Phone Input */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Email or Phone\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  {inputType === \"email\" ? (\n                    <Mail className=\"h-5 w-5 text-gray-400\" />\n                  ) : (\n                    <Phone className=\"h-5 w-5 text-gray-400\" />\n                  )}\n                </div>\n                <input\n                  type=\"text\"\n                  value={emailOrPhone}\n                  onChange={(e) => setEmailOrPhone(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200\"\n                  placeholder=\"Enter email or phone number\"\n                  required\n                />\n              </div>\n            </div>\n\n            {/* Password Input */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Lock className=\"h-5 w-5 text-gray-400\" />\n                </div>\n                <input\n                  type={showPassword ? \"text\" : \"password\"}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200\"\n                  placeholder=\"Enter your password\"\n                  required\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors duration-200\"\n                >\n                  {showPassword ? (\n                    <EyeOff className=\"h-5 w-5\" />\n                  ) : (\n                    <Eye className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </div>\n\n            {/* Forgot Password */}\n            <div className=\"flex items-center justify-end\">\n              <Link\n                href=\"/forget-password\"\n                className=\"text-sm text-gray-600 hover:underline hover:text-gray-900 transition-all duration-200\"\n              >\n                Forgot password?\n              </Link>\n            </div>\n\n            {/* Submit Button */}\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full bg-gray-900 text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center justify-center space-x-2\">\n                  <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                  <span>Signing in...</span>\n                </div>\n              ) : (\n                \"Sign in\"\n              )}\n            </button>\n          </form>\n\n          {/* Divider */}\n          <div className=\"my-8 flex items-center\">\n            <div className=\"flex-1 h-px bg-gray-200\"></div>\n            <span className=\"px-4 text-gray-500 text-sm\">or</span>\n            <div className=\"flex-1 h-px bg-gray-200\"></div>\n          </div>\n\n          {/* Sign Up Link */}\n          <p className=\"text-center text-gray-600 mt-8 text-sm\">\n            Don't have an account?{\" \"}\n            <Link\n              href=\"/register\"\n              className=\"text-gray-900 font-medium hover:underline transition-all duration-200\"\n            >\n              Sign up\n            </Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,oNAA8C,iCAAiC;AAC/E;AACA;AACA;AACA;AARA;;;;;;;;;;AAUe,SAAS;IACtB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,GAAG,IAAA,mIAAQ;IAE5C,gCAAgC;IAChC,MAAM,kBAAkB,CAAC;QACvB,MAAM,eAAe;QACrB,MAAM,eAAe;QAErB,IAAI,aAAa,IAAI,CAAC,QAAQ,OAAO;QACrC,IAAI,aAAa,IAAI,CAAC,MAAM,OAAO,CAAC,eAAe,MAAM,OAAO;QAChE,OAAO;IACT;IAEA,MAAM,YAAY,gBAAgB;IAElC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,CAAC,gBAAgB,CAAC,UAAU;QAEhC,aAAa;QACb,IAAI;YACF,+CAA+C;YAC/C,QAAQ,GAAG,CAAC,iCAAiC,oIAAY;YACzD,MAAM,WACJ,cAAc,UACV;gBAAE,OAAO,aAAa,IAAI;gBAAI;YAAS,IACvC;gBAAE,cAAc,aAAa,IAAI;gBAAI;YAAS;YAEpD,MAAM,WAAW,MAAM,MAAM,GAAG,oIAAY,CAAC,WAAW,CAAC,EAAE;gBACzD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,QAAQ,GAAG,CAAC,mBAAmB;YAC/B,IAAI,SAAS,EAAE,EAAE;gBACf,aAAa,OAAO,CAAC,SAAS,KAAK,KAAK;gBACxC,IAAI,KAAK,WAAW,GAAG,KAAK,KAAK,IAAI,KAAK,UAAU;oBAClD,YAAY,KAAK,WAAW,GAAG;oBAC/B,OAAO,IAAI,CAAC;gBACd,OAAO;oBACL,IAAG,KAAK,IAAI,KAAK,UAAS;wBACxB,OAAO,IAAI,CAAC;oBACd,OAAM,IAAG,KAAK,IAAI,KAAK,WAAU;wBAC/B,OAAO,IAAI,CAAC;oBACd,OAAM,IAAG,KAAK,IAAI,KAAK,SAAQ;wBAC7B,OAAO,IAAI,CAAC;oBACd,OAAM,IAAG,KAAK,IAAI,KAAK,cAAa;wBAClC,OAAO,IAAI,CAAC;oBACd;gBACF;gBACA,kKAAK,CAAC,OAAO,CAAC;gBACd,aAAa;YACf,OAAO;gBACL,kKAAK,CAAC,KAAK,CAAC,CAAC,cAAc,EAAE,KAAK,KAAK,EAAE;YAC3C;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,kKAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,aAAa;QACf;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,MAAM,gBAAgB;YACpB,IAAI;gBACF,MAAM,uBAAuB,MAAM;gBACnC,QAAQ,GAAG,CAAC;gBAEZ,IAAI,sBAAsB,SAAS;oBACjC,OAAO,IAAI,CAAC;gBACd;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,2BAA2B;YAC3C;QACF;QAEA;IACF,GAAG;QAAC;QAAY;KAAO;IAEvB,kBAAkB;IAClB,qBAAqB;IACrB,IAAI;IAEJ,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,0MAAI;oCAAC,WAAU;;;;;;;;;;;0CAElB,8OAAC;gCAAG,WAAU;0CAA4C;;;;;;0CAG1D,8OAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;kCAMvC,8OAAC;wBAAK,WAAU;wBAAY,UAAU;;0CAEpC,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACZ,cAAc,wBACb,8OAAC,0MAAI;oDAAC,WAAU;;;;;yEAEhB,8OAAC,6MAAK;oDAAC,WAAU;;;;;;;;;;;0DAGrB,8OAAC;gDACC,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;gDAC/C,WAAU;gDACV,aAAY;gDACZ,QAAQ;;;;;;;;;;;;;;;;;;0CAMd,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,0MAAI;oDAAC,WAAU;;;;;;;;;;;0DAElB,8OAAC;gDACC,MAAM,eAAe,SAAS;gDAC9B,OAAO;gDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gDAC3C,WAAU;gDACV,aAAY;gDACZ,QAAQ;;;;;;0DAEV,8OAAC;gDACC,MAAK;gDACL,SAAS,IAAM,gBAAgB,CAAC;gDAChC,WAAU;0DAET,6BACC,8OAAC,oNAAM;oDAAC,WAAU;;;;;yEAElB,8OAAC,uMAAG;oDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0CAOvB,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,uKAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;0CAMH,8OAAC;gCACC,MAAK;gCACL,UAAU;gCACV,WAAU;0CAET,0BACC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;;;;;sDACf,8OAAC;sDAAK;;;;;;;;;;;2CAGR;;;;;;;;;;;;kCAMN,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAK,WAAU;0CAA6B;;;;;;0CAC7C,8OAAC;gCAAI,WAAU;;;;;;;;;;;;kCAIjB,8OAAC;wBAAE,WAAU;;4BAAyC;4BAC7B;0CACvB,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}}]
}