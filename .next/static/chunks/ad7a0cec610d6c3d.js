(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51910,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(81949),r=e.i(84577),l=e.i(43034),n=e.i(52754),i=e.i(12426),o=e.i(73375),d=e.i(63059),c=e.i(69638),x=e.i(73884),m=e.i(3116),p=e.i(84614),g=e.i(46897),h=e.i(87316),u=e.i(88844),b=e.i(47615),y=e.i(55436),j=e.i(16715),f=e.i(86536),N=e.i(40160),v=e.i(25652),w=e.i(19897),k=e.i(31026),_=e.i(75254);let C=(0,_.default)("calendar-range",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);var P=e.i(37727);let S=(0,_.default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var D=e.i(31795);e.i(47167);var z=e.i(64659),M=e.i(31278),A=e.i(33785);let T=(0,_.default)("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]),$=(0,_.default)("arrow-down-to-line",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]),L=(0,_.default)("arrow-up-from-line",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var R=e.i(87378),F=e.i(50439),I=e.i(81418),U=e.i(39544),q=e.i(3496),O=e.i(20724);let W=({isOpen:e,onClose:s})=>{let[r,l]=(0,t.useState)({transaction_type:"",page:1,limit:10,start_date:"",end_date:"",status:"",search:"",min_amount:"",max_amount:"",grain_type:"",warehouse_id:""}),[n,i]=(0,t.useState)(!1),[p,h]=(0,t.useState)(!1),[f,N]=(0,t.useState)([]),[w,k]=(0,t.useState)({currentPage:1,limit:10,totalRecords:0,totalPages:0}),[_,C]=(0,t.useState)({sell:0,deposit:0,withdraw:0,loan:0}),[S,W]=(0,t.useState)(!0),E=async()=>{i(!0);try{let e=((e=r)=>{let a=new URLSearchParams;return Object.entries(e).forEach(([e,t])=>{""!==t&&null!=t&&a.append(e,t)}),a.toString()})(),a=await fetch(`${D.default}/transaction/getalltransactions?${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),t=await a.json();t.success&&(N(t.data||[]),k(t.pagination||{currentPage:1,limit:10,totalRecords:0,totalPages:0}),C(t.transactionCounts||{sell:0,deposit:0,withdraw:0,loan:0}))}catch(e){console.error("Error fetching transactions:",e)}finally{i(!1)}},B=(e,a)=>{l(t=>({...t,[e]:a,page:1}))},G=e=>{e>=1&&e<=w.totalPages&&l(a=>({...a,page:e}))},X=Object.entries(r).filter(([e,a])=>""!==a&&!["page","limit"].includes(e)).length;return((0,t.useEffect)(()=>{e&&E()},[e,r.page,r.limit]),(0,t.useEffect)(()=>{let a=setTimeout(()=>{e&&E()},500);return()=>clearTimeout(a)},[r.search]),e)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:s}),(0,a.jsx)("div",{className:"fixed inset-2 md:inset-4 lg:inset-6 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative w-full h-full max-w-[1600px] mx-auto flex flex-col bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,a.jsx)("div",{className:"flex-shrink-0 bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-2.5 bg-white/20 backdrop-blur-sm rounded-xl",children:(0,a.jsx)(b.Filter,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-white",children:"Transaction Explorer"}),(0,a.jsx)("p",{className:"text-sm text-white/70",children:"Filter, view and export transactions"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"hidden lg:flex items-center gap-2 mr-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/10 rounded-lg",children:[(0,a.jsx)($,{className:"h-4 w-4 text-green-300"}),(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:_.deposit})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/10 rounded-lg",children:[(0,a.jsx)(L,{className:"h-4 w-4 text-orange-300"}),(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:_.withdraw})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/10 rounded-lg",children:[(0,a.jsx)(v.TrendingUp,{className:"h-4 w-4 text-blue-300"}),(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:_.sell})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/10 rounded-lg",children:[(0,a.jsx)(R.Banknote,{className:"h-4 w-4 text-purple-300"}),(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:_.loan})]})]}),(0,a.jsxs)("button",{onClick:()=>W(!S),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${S?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[(0,a.jsx)(T,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Filters"}),X>0&&(0,a.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${S?"bg-purple-100 text-purple-600":"bg-white/30 text-white"}`,children:X})]}),(0,a.jsx)("button",{onClick:()=>(0,O.default)({data:f,service:"transactions"}),className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-xl text-sm font-medium transition-all disabled:opacity-50",children:(0,a.jsx)("span",{className:"hidden sm:inline",children:"Download PDF"})}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-xl text-white/80 hover:text-white transition-colors",children:(0,a.jsx)(P.X,{className:"h-5 w-5"})})]})]})}),S&&(0,a.jsx)("div",{className:"flex-shrink-0 bg-gray-50 border-b px-6 py-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(y.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by farmer name, phone, email, or transaction ID...",value:r.search,onChange:e=>B("search",e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute -top-2 left-3 bg-gray-50 px-1 text-xs text-gray-500",children:"Type"}),(0,a.jsx)("select",{value:r.transaction_type,onChange:e=>B("transaction_type",e.target.value),className:"w-full appearance-none px-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm pr-10",children:[{value:"",label:"All Types"},{value:"deposit",label:"Deposit"},{value:"withdraw",label:"Withdraw"},{value:"sell",label:"Sell"},{value:"loan",label:"Loan"}].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)(z.ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute -top-2 left-3 bg-gray-50 px-1 text-xs text-gray-500",children:"Status"}),(0,a.jsx)("select",{value:r.status,onChange:e=>B("status",e.target.value),className:"w-full appearance-none px-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm pr-10",children:[{value:"",label:"All Status"},{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"rejected",label:"Rejected"},{value:"failed",label:"Failed"}].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)(z.ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute -top-2 left-3 bg-gray-50 px-1 text-xs text-gray-500",children:"Grain"}),(0,a.jsx)("select",{value:r.grain_type,onChange:e=>B("grain_type",e.target.value),className:"w-full appearance-none px-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm pr-10",children:[{value:"",label:"All Grains"},{value:"Wheat",label:"Wheat"},{value:"Rice",label:"Rice"},{value:"Corn",label:"Corn"},{value:"Barley",label:"Barley"},{value:"Soybean",label:"Soybean"},{value:"Oats",label:"Oats"}].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)(z.ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute -top-2 left-3 bg-gray-50 px-1 text-xs text-gray-500",children:"From"}),(0,a.jsx)("input",{type:"date",value:r.start_date,onChange:e=>B("start_date",e.target.value),className:"w-full px-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"absolute -top-2 left-3 bg-gray-50 px-1 text-xs text-gray-500",children:"To"}),(0,a.jsx)("input",{type:"date",value:r.end_date,onChange:e=>B("end_date",e.target.value),className:"w-full px-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"number",placeholder:"Min ₹",value:r.min_amount,onChange:e=>B("min_amount",e.target.value),className:"w-full px-3 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm"}),(0,a.jsx)("span",{className:"text-gray-400",children:"-"}),(0,a.jsx)("input",{type:"number",placeholder:"Max ₹",value:r.max_amount,onChange:e=>B("max_amount",e.target.value),className:"w-full px-3 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Quick:"}),(0,a.jsx)("button",{onClick:()=>{let e=new Date().toISOString().split("T")[0];l(a=>({...a,start_date:e,end_date:e,page:1}))},className:"px-3 py-1.5 text-xs bg-white border border-gray-200 hover:border-purple-300 hover:bg-purple-50 text-gray-600 hover:text-purple-600 rounded-lg transition-colors",children:"Today"}),(0,a.jsx)("button",{onClick:()=>{let e=new Date,a=new Date(e.getTime()-6048e5);l(t=>({...t,start_date:a.toISOString().split("T")[0],end_date:e.toISOString().split("T")[0],page:1}))},className:"px-3 py-1.5 text-xs bg-white border border-gray-200 hover:border-purple-300 hover:bg-purple-50 text-gray-600 hover:text-purple-600 rounded-lg transition-colors",children:"Last 7 Days"}),(0,a.jsx)("button",{onClick:()=>{let e=new Date,a=new Date(e.getTime()-2592e6);l(t=>({...t,start_date:a.toISOString().split("T")[0],end_date:e.toISOString().split("T")[0],page:1}))},className:"px-3 py-1.5 text-xs bg-white border border-gray-200 hover:border-purple-300 hover:bg-purple-50 text-gray-600 hover:text-purple-600 rounded-lg transition-colors",children:"Last 30 Days"}),(0,a.jsx)("div",{className:"w-px h-4 bg-gray-300 mx-1"}),(0,a.jsx)("button",{onClick:()=>B("transaction_type","deposit"),className:"px-3 py-1.5 text-xs bg-green-50 border border-green-200 hover:bg-green-100 text-green-600 rounded-lg transition-colors",children:"Deposits"}),(0,a.jsx)("button",{onClick:()=>B("transaction_type","sell"),className:"px-3 py-1.5 text-xs bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-600 rounded-lg transition-colors",children:"Sales"}),(0,a.jsx)("button",{onClick:()=>B("status","completed"),className:"px-3 py-1.5 text-xs bg-emerald-50 border border-emerald-200 hover:bg-emerald-100 text-emerald-600 rounded-lg transition-colors",children:"Completed"}),(0,a.jsx)("button",{onClick:()=>B("status","pending"),className:"px-3 py-1.5 text-xs bg-amber-50 border border-amber-200 hover:bg-amber-100 text-amber-600 rounded-lg transition-colors",children:"Pending"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{l({transaction_type:"",page:1,limit:10,start_date:"",end_date:"",status:"",search:"",min_amount:"",max_amount:"",grain_type:"",warehouse_id:""})},className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-xl transition-colors text-sm",children:[(0,a.jsx)(j.RefreshCw,{className:"h-4 w-4"}),"Reset"]}),(0,a.jsxs)("button",{onClick:E,disabled:n,className:"flex items-center gap-2 px-5 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-xl transition-colors text-sm font-medium shadow-lg shadow-purple-200",children:[n?(0,a.jsx)(M.Loader2,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(b.Filter,{className:"h-4 w-4"}),"Apply Filters"]})]})]})]})}),(0,a.jsxs)("div",{className:"flex-shrink-0 px-6 py-3 bg-white border-b flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Showing"," ",(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:f.length})," ","of"," ",(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:w.totalRecords?.toLocaleString()})," ","transactions"]}),X>0&&(0,a.jsxs)("span",{className:"text-xs text-purple-600 bg-purple-50 px-2 py-1 rounded-full",children:[X," filter",X>1?"s":""," ","active"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Per page:"}),(0,a.jsx)("select",{value:r.limit,onChange:e=>B("limit",parseInt(e.target.value)),className:"px-3 py-1.5 border border-gray-200 rounded-lg text-sm focus:border-purple-500 outline-none",children:[10,20,50,100].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:n?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full py-20",children:[(0,a.jsx)(M.Loader2,{className:"h-10 w-10 text-purple-600 animate-spin mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Loading transactions..."})]}):0===f.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full py-20",children:[(0,a.jsx)("div",{className:"p-4 bg-gray-100 rounded-full mb-4",children:(0,a.jsx)(u.Package,{className:"h-10 w-10 text-gray-400"})}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No transactions found"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Try adjusting your filters"})]}):(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Farmer"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Grain Details"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Warehouse"}),(0,a.jsx)("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Approval"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:f.map((e,t)=>{var s,r,l;let n,i=(s=e.transaction_type,({deposit:{icon:(0,a.jsx)($,{className:"h-4 w-4"}),color:"text-green-600",bgColor:"bg-green-100",label:"Deposit"},withdraw:{icon:(0,a.jsx)(L,{className:"h-4 w-4"}),color:"text-orange-600",bgColor:"bg-orange-100",label:"Withdraw"},sell:{icon:(0,a.jsx)(v.TrendingUp,{className:"h-4 w-4"}),color:"text-blue-600",bgColor:"bg-blue-100",label:"Sell"},loan:{icon:(0,a.jsx)(R.Banknote,{className:"h-4 w-4"}),color:"text-purple-600",bgColor:"bg-purple-100",label:"Loan"}})[s?.toLowerCase()]||{icon:(0,a.jsx)(u.Package,{className:"h-4 w-4"}),color:"text-gray-600",bgColor:"bg-gray-100",label:s||"Unknown"}),o=e.grain?.[0]||{};return(0,a.jsxs)("tr",{className:"hover:bg-purple-50/50 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[e.user_id?.farmerProfile?.user_image?(0,a.jsx)("img",{src:e.user_id.farmerProfile.user_image,alt:e.user_id.name,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-200"}):(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-indigo-500 flex items-center justify-center text-white font-semibold text-sm",children:e.user_id?.name?.charAt(0)||"U"}),(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:e.user_id?.name||"Unknown"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.user_id?.farmerProfile?.farmerId||e.user_id?.phone_number})]})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg ${i.bgColor}`,children:[(0,a.jsx)("span",{className:i.color,children:i.icon}),(0,a.jsx)("span",{className:`text-sm font-medium capitalize ${i.color}`,children:i.label})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${(r=e.transaction_status,({completed:"bg-emerald-100 text-emerald-700 border-emerald-200",pending:"bg-amber-100 text-amber-700 border-amber-200",processing:"bg-blue-100 text-blue-700 border-blue-200",cancelled:"bg-red-100 text-red-700 border-red-200"})[r?.toLowerCase()]||"bg-gray-100 text-gray-700 border-gray-200")}`,children:[(l=e.transaction_status,({completed:(0,a.jsx)(c.CheckCircle,{className:"h-3.5 w-3.5"}),pending:(0,a.jsx)(m.Clock,{className:"h-3.5 w-3.5"}),processing:(0,a.jsx)(M.Loader2,{className:"h-3.5 w-3.5 animate-spin"}),cancelled:(0,a.jsx)(x.XCircle,{className:"h-3.5 w-3.5"})})[l?.toLowerCase()]||null),(0,a.jsx)("span",{className:"capitalize",children:e.transaction_status||"Unknown"})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(F.Wheat,{className:"h-4 w-4 text-amber-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-800",children:o.category_id?.grain_type||"N/A"}),(0,a.jsxs)("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 rounded text-gray-600",children:["Grade ",o.category_id?.quality||"-"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(q.Scale,{className:"h-3 w-3"}),o.quantity_quintal||0," ",o.category_id?.unit||"quintal"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(U.Droplets,{className:"h-3 w-3"}),o.moisture_content||0,"% moisture"]})]})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.warehouse_id?(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(A.Warehouse,{className:"h-4 w-4 text-blue-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.warehouse_id.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,a.jsx)(g.MapPin,{className:"h-3 w-3"}),e.warehouse_id.location]})]})]}):(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"N/A"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:`font-bold text-sm ${"sell"===e.transaction_type||"withdraw"===e.transaction_type?"text-green-600":"text-gray-900"}`,children:(n=e.total_amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(n||0))}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["@ ₹",o.price_per_quintal||0,"/",o.category_id?.unit||"q"]})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[e.approval_status?.admin_approval?.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-green-600",children:[(0,a.jsx)(I.ShieldCheck,{className:"h-3 w-3"}),"Admin ✓"]}),e.approval_status?.manager_approval?.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-blue-600",children:[(0,a.jsx)(c.CheckCircle,{className:"h-3 w-3"}),"Manager ✓"]}),e.approval_status?.supervisor_approval?.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-purple-600",children:[(0,a.jsx)(c.CheckCircle,{className:"h-3 w-3"}),"Supervisor ✓"]}),!e.approval_status?.admin_approval?.status&&!e.approval_status?.manager_approval?.status&&!e.approval_status?.supervisor_approval?.status&&(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Pending"})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-700",children:e.transaction_date?new Date(e.transaction_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.transaction_date?new Date(e.transaction_date).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):""})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.remarks?(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:e.remarks.replace(/_/g," ")})}):(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"No remarks"})})]},e._id||t)})})]})}),f.length>0&&(0,a.jsxs)("div",{className:"flex-shrink-0 px-6 py-4 bg-gray-50 border-t flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Page"," ",(0,a.jsx)("span",{className:"font-medium",children:w.currentPage})," of"," ",(0,a.jsx)("span",{className:"font-medium",children:w.totalPages})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>G(w.currentPage-1),disabled:1===w.currentPage,className:"flex items-center gap-1 px-4 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:bg-white hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,a.jsx)(o.ChevronLeft,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,w.totalPages)},(e,t)=>{let s;return s=w.totalPages<=5||w.currentPage<=3?t+1:w.currentPage>=w.totalPages-2?w.totalPages-4+t:w.currentPage-2+t,(0,a.jsx)("button",{onClick:()=>G(s),className:`w-10 h-10 rounded-lg text-sm font-medium transition-colors ${w.currentPage===s?"bg-purple-600 text-white shadow-lg shadow-purple-200":"text-gray-600 hover:bg-white border border-transparent hover:border-gray-200"}`,children:s},s)})}),(0,a.jsxs)("button",{onClick:()=>G(w.currentPage+1),disabled:w.currentPage===w.totalPages,className:"flex items-center gap-1 px-4 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:bg-white hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",(0,a.jsx)(d.ChevronRight,{className:"h-4 w-4"})]})]})]})]})})]}):null};e.s(["default",0,()=>{let[e,_]=(0,t.useState)([]),[z,M]=(0,t.useState)(!0),[A,T]=(0,t.useState)(null),[$,L]=(0,t.useState)(""),[R,F]=(0,t.useState)(1),[I,U]=(0,t.useState)(""),[q,E]=(0,t.useState)({currentPage:1,limit:20,totalRecords:0,totalPages:1}),[B,G]=(0,t.useState)({sell:0,deposit:0,withdraw:0,loan:0}),[X,H]=(0,t.useState)(null),[K,Q]=(0,t.useState)(!1),[V,J]=(0,t.useState)(""),[Y,Z]=(0,t.useState)(""),[ee,ea]=(0,t.useState)(!1),[et,es]=(0,t.useState)(!1),[er,el]=(0,t.useState)(!1),[en,ei]=(0,t.useState)(null),[eo,ed]=(0,t.useState)(20),ec=[{key:"",label:"All",icon:b.Filter,color:"bg-gradient-to-r from-slate-600 to-slate-700",lightColor:"bg-slate-50",textColor:"text-slate-600",accent:"border-slate-400"},{key:"deposit",label:"Deposit",icon:r.ArrowDownCircle,color:"bg-gradient-to-r from-emerald-500 to-teal-500",lightColor:"bg-emerald-50",textColor:"text-emerald-600",accent:"border-emerald-400"},{key:"withdraw",label:"Withdraw",icon:l.ArrowUpCircle,color:"bg-gradient-to-r from-orange-400 to-amber-500",lightColor:"bg-orange-50",textColor:"text-orange-600",accent:"border-orange-400"},{key:"sell",label:"Sell",icon:i.DollarSign,color:"bg-gradient-to-r from-sky-500 to-blue-500",lightColor:"bg-sky-50",textColor:"text-sky-600",accent:"border-sky-400"},{key:"loan",label:"Loan",icon:n.Wallet,color:"bg-gradient-to-r from-violet-500 to-purple-500",lightColor:"bg-violet-50",textColor:"text-violet-600",accent:"border-violet-400"}];(0,t.useEffect)(()=>{ex()},[$,R,eo]);let ex=async()=>{M(!0),T(null);try{let e={transaction_type:$,limit:eo,page:R};V&&(e.start_date=V),Y&&(e.end_date=Y);let a=await s.default.get(`${D.default}/transaction/getalltransactions`,{params:e,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});_(a.data.data||[]),E(a.data.pagination||{currentPage:1,limit:20,totalRecords:0,totalPages:1}),G(a.data.transactionCounts||{sell:0,deposit:0,withdraw:0,loan:0}),U(a.data.warehouse)}catch(e){T("Failed to fetch transactions. Please try again."),console.error("Error fetching transactions:",e)}finally{M(!1)}},em=()=>{F(1),ex()},ep=()=>{J(""),Z(""),F(1),setTimeout(()=>ex(),0)},eg=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",eh=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0),eu=e=>{let t={completed:{color:"bg-green-100 text-green-800 border-green-200",icon:c.CheckCircle,gradient:"bg-gradient-to-r from-green-500 to-emerald-500"},pending:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:m.Clock,gradient:"bg-gradient-to-r from-yellow-500 to-amber-500"},rejected:{color:"bg-red-100 text-red-800 border-red-200",icon:x.XCircle,gradient:"bg-gradient-to-r from-red-500 to-rose-500"}},s=t[e]||t.pending,r=s.icon;return(0,a.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold border shadow-sm ${s.color}`,children:[(0,a.jsx)(r,{size:14}),e?.charAt(0).toUpperCase()+e?.slice(1)]})},eb=e=>{let t={deposit:{icon:r.ArrowDownCircle,color:"text-green-600 bg-green-100"},withdraw:{icon:l.ArrowUpCircle,color:"text-orange-600 bg-orange-100"},sell:{icon:i.DollarSign,color:"text-blue-600 bg-blue-100"},loan:{icon:n.Wallet,color:"text-purple-600 bg-purple-100"}},s=t[e]||t.deposit,o=s.icon;return(0,a.jsx)("div",{className:`p-3 rounded-2xl ${s.color} shadow-sm`,children:(0,a.jsx)(o,{size:24,strokeWidth:2})})},ey=({approval:e})=>{if(!e)return null;let t=[{label:"Supervisor",data:e.supervisor_approval,shortLabel:"SUP"},{label:"Manager",data:e.manager_approval,shortLabel:"MGR"},{label:"Admin",data:e.admin_approval,shortLabel:"ADM"}];return(0,a.jsx)("div",{className:"flex items-center gap-1.5 flex-wrap",children:t.map((e,t)=>(0,a.jsxs)("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-all ${e.data?.status?"bg-green-100 text-green-700 border border-green-200":e.data?.date?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-500 border border-gray-200"}`,title:e.label,children:[e.data?.status?(0,a.jsx)(c.CheckCircle,{size:12}):e.data?.date?(0,a.jsx)(x.XCircle,{size:12}):(0,a.jsx)(m.Clock,{size:12}),(0,a.jsx)("span",{className:"hidden sm:inline",children:e.label}),(0,a.jsx)("span",{className:"sm:hidden",children:e.shortLabel})]},t))})};return(0,a.jsx)("div",{className:"min-h-screen p-4",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent mb-2",children:"Transactions"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage and track all your grain transactions"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>es(!0),disabled:er||z||0===e.length,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all font-semibold shadow-lg shadow-green-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(S,{size:18}),"Download All"]}),(0,a.jsx)("p",{className:"text-gray-100 font-bold bg-blue-600 px-6 py-2 rounded-full",children:I})]})]}),(0,a.jsx)(()=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[(0,a.jsx)(C,{size:20,className:"text-blue-500"}),(0,a.jsx)("span",{children:"Date Range Filter"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:V,onChange:e=>J(e.target.value),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",max:Y||void 0})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"End Date"}),(0,a.jsx)("input",{type:"date",value:Y,onChange:e=>Z(e.target.value),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",min:V||void 0})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:em,disabled:z,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all font-semibold shadow-lg shadow-blue-200 disabled:opacity-50",children:[(0,a.jsx)(y.Search,{size:16}),"Apply Filter"]}),(V||Y)&&(0,a.jsxs)("button",{onClick:ep,className:"flex items-center gap-2 px-4 py-2.5 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-all font-medium",children:[(0,a.jsx)(P.X,{size:16}),"Clear"]})]})]}),(V||Y)&&(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Active filter:"}),(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-lg font-medium",children:V&&Y?`${new Date(V).toLocaleDateString()} - ${new Date(Y).toLocaleDateString()}`:V?`From ${new Date(V).toLocaleDateString()}`:`Until ${new Date(Y).toLocaleDateString()}`})]})]}),{}),(0,a.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:ec.slice(1).map(e=>{let t=B[e.key]||0;return(0,a.jsxs)("div",{onClick:()=>{L(e.key),F(1)},className:`relative overflow-hidden bg-white rounded-2xl p-5 shadow-sm border-2 transition-all cursor-pointer group hover:shadow-xl ${$===e.key?"border-blue-400 shadow-lg shadow-blue-100":"border-gray-100 hover:border-gray-200"}`,children:[(0,a.jsx)("div",{className:`absolute top-0 right-0 w-20 h-20 ${e.lightColor} rounded-bl-full opacity-50 group-hover:opacity-100 transition-opacity`}),(0,a.jsx)("div",{className:`relative z-10 w-12 h-12 ${e.color} rounded-2xl flex items-center justify-center mb-4 shadow-lg`,children:(0,a.jsx)(e.icon,{size:24,className:"text-white"})}),(0,a.jsx)("p",{className:"text-gray-500 text-sm font-medium relative z-10",children:e.label}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-800 mt-1 relative z-10",children:t}),$===e.key&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-500"})]},e.key)})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 mb-6 p-2",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:ec.map(e=>(0,a.jsxs)("button",{onClick:()=>{L(e.key),F(1)},className:`flex items-center gap-2 px-5 py-3 rounded-xl font-semibold text-sm transition-all ${$===e.key?`${e.color} text-white shadow-lg`:`${e.textColor} hover:bg-gray-100`}`,children:[(0,a.jsx)(e.icon,{size:18}),e.label,""===e.key?(0,a.jsx)("span",{className:"ml-1 px-2 py-0.5 bg-white/20 rounded-lg text-xs",children:B.sell+B.deposit+B.withdraw+B.loan}):(0,a.jsx)("span",{className:`ml-1 px-2 py-0.5 rounded-lg text-xs ${$===e.key?"bg-white/20":"bg-gray-100"}`,children:B[e.key]||0})]},e.key))})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,a.jsxs)("p",{className:"text-gray-600",children:["Showing"," ",(0,a.jsx)("span",{className:"font-bold text-gray-800",children:e.length})," ","of"," ",(0,a.jsx)("span",{className:"font-bold text-gray-800",children:q.totalRecords})," ","transactions"]}),$&&(0,a.jsxs)("span",{className:`px-3 py-1 rounded-lg text-xs font-semibold ${ec.find(e=>e.key===$)?.lightColor} ${ec.find(e=>e.key===$)?.textColor}`,children:[$.charAt(0).toUpperCase()+$.slice(1)," ","only"]}),(V||Y)&&(0,a.jsx)("span",{className:"px-3 py-1 rounded-lg text-xs font-semibold bg-blue-50 text-blue-600",children:"Date filtered"})]}),(0,a.jsxs)("button",{onClick:ex,disabled:z,className:"flex items-center gap-2 px-5 py-2.5 bg-white rounded-xl border border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all font-medium shadow-sm",children:[(0,a.jsx)(j.RefreshCw,{size:16,className:z?"animate-spin":""}),"Refresh"]})]}),z&&(0,a.jsx)("div",{className:"flex items-center justify-center py-24",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})]}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"Loading transactions..."})]})}),A&&!z&&(0,a.jsxs)("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-8 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(x.XCircle,{className:"w-8 h-8 text-red-500"})}),(0,a.jsx)("p",{className:"text-red-700 font-semibold text-lg mb-2",children:"Oops! Something went wrong"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:A}),(0,a.jsx)("button",{onClick:ex,className:"px-6 py-2.5 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-semibold shadow-lg shadow-red-200",children:"Try Again"})]}),!z&&!A&&(0,a.jsx)("div",{className:"space-y-4",children:0===e.length?(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-16 text-center shadow-sm border border-gray-100",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(u.Package,{className:"w-10 h-10 text-gray-400"})}),(0,a.jsx)("p",{className:"text-gray-700 text-xl font-semibold mb-2",children:"No transactions found"}),(0,a.jsx)("p",{className:"text-gray-500",children:$||V||Y?"No transactions match your filters. Try adjusting your search criteria.":"No transactions available yet. Check back later."}),($||V||Y)&&(0,a.jsx)("button",{onClick:()=>{L(""),ep()},className:"mt-4 px-5 py-2.5 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors font-medium",children:"Clear All Filters"})]}):e.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-5 hover:shadow-xl hover:border-blue-200 transition-all cursor-pointer group",onClick:()=>{H(e),Q(!0)},children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[eb(e.transaction_type),(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,a.jsx)("img",{src:e.user_id?.farmerProfile?.user_image||"/placeholder-user.png",alt:e.user_id?.name,className:"w-12 h-12 rounded-xl object-cover border-2 border-gray-100 shadow-sm flex-shrink-0",onError:a=>{a.target.src="https://ui-avatars.com/api/?name="+encodeURIComponent(e.user_id?.name||"User")}}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("p",{className:"font-bold text-gray-800 truncate",children:e.user_id?.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.user_id?.farmerProfile?.farmerId})]})]})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:e.grain?.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-semibold border border-blue-100",children:[(0,a.jsx)(u.Package,{size:14,className:"mr-1.5"}),e.category_id?.grain_type,(0,a.jsxs)("span",{className:"ml-1 text-blue-500",children:["(",e.quantity_quintal?.toFixed(2)," qtl)"]})]},t))}),(0,a.jsx)(ey,{approval:e.approval_status})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between lg:justify-end gap-4 pt-4 lg:pt-0 border-t lg:border-t-0 border-gray-100",children:[(0,a.jsxs)("div",{className:"text-left lg:text-right",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:eh(e.total_amount)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 flex items-center gap-1 lg:justify-end",children:[(0,a.jsx)(h.Calendar,{size:14}),eg(e.transaction_date)]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[eu(e.transaction_status),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("button",{className:"opacity-0 group-hover:opacity-100 transition-all p-2 bg-gray-100 rounded-xl hover:bg-blue-100 hover:text-blue-600",title:"View Details",children:(0,a.jsx)(f.Eye,{size:18})})})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 flex flex-wrap items-center gap-4",children:[e.warehouse_id&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 bg-gray-50 px-3 py-1.5 rounded-lg",children:[(0,a.jsx)(g.MapPin,{size:14,className:"text-purple-500"}),(0,a.jsxs)("span",{className:"text-sm",children:[e.warehouse_id.name,","," ",e.warehouse_id.location]})]}),e.remarks&&(0,a.jsx)("div",{className:"flex items-center gap-2 bg-amber-50 px-3 py-1.5 rounded-lg",children:(0,a.jsx)("span",{className:"text-sm text-amber-700 font-medium capitalize",children:e.remarks.replace(/_/g," ")})})]})]},e._id))}),!z&&!A&&e.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(()=>q.totalPages<=1&&q.totalRecords<=eo?null:(0,a.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-between gap-4 bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[(0,a.jsxs)("p",{className:"text-gray-600 text-sm",children:["Showing"," ",(0,a.jsx)("span",{className:"font-bold text-gray-800",children:(R-1)*q.limit+1})," ","to"," ",(0,a.jsx)("span",{className:"font-bold text-gray-800",children:Math.min(R*q.limit,q.totalRecords)})," ","of"," ",(0,a.jsx)("span",{className:"font-bold text-gray-800",children:q.totalRecords})," ","transactions"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Per page:"}),(0,a.jsxs)("select",{value:eo,onChange:e=>{ed(Number(e.target.value)),F(1)},className:"px-3 py-1.5 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[(0,a.jsx)("option",{value:10,children:"10"}),(0,a.jsx)("option",{value:20,children:"20"}),(0,a.jsx)("option",{value:50,children:"50"}),(0,a.jsx)("option",{value:100,children:"100"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("button",{onClick:()=>F(1),disabled:1===R,className:"p-2 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-100 disabled:opacity-40 disabled:cursor-not-allowed transition-all",title:"First Page",children:(0,a.jsx)(w.ChevronsLeft,{size:18})}),(0,a.jsxs)("button",{onClick:()=>F(e=>Math.max(e-1,1)),disabled:1===R,className:"flex items-center gap-1 px-3 py-2 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-100 disabled:opacity-40 disabled:cursor-not-allowed transition-all",children:[(0,a.jsx)(o.ChevronLeft,{size:18}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Prev"})]}),(0,a.jsxs)("div",{className:"hidden sm:flex items-center gap-1",children:[R>3&&q.totalPages>5&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>F(1),className:"w-10 h-10 rounded-xl text-gray-600 hover:bg-gray-100 border border-gray-200 font-semibold",children:"1"}),R>4&&(0,a.jsx)("span",{className:"px-2 text-gray-400",children:"..."})]}),(()=>{let e=[],a=Math.max(1,R-Math.floor(2.5)),t=Math.min(q.totalPages,a+5-1);t-a+1<5&&(a=Math.max(1,t-5+1));for(let s=a;s<=t;s++)e.push(s);return e})().map(e=>(0,a.jsx)("button",{onClick:()=>F(e),className:`w-10 h-10 rounded-xl font-semibold transition-all ${R===e?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg shadow-blue-200":"text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:e},e)),R<q.totalPages-2&&q.totalPages>5&&(0,a.jsxs)(a.Fragment,{children:[R<q.totalPages-3&&(0,a.jsx)("span",{className:"px-2 text-gray-400",children:"..."}),(0,a.jsx)("button",{onClick:()=>F(q.totalPages),className:"w-10 h-10 rounded-xl text-gray-600 hover:bg-gray-100 border border-gray-200 font-semibold",children:q.totalPages})]})]}),(0,a.jsxs)("div",{className:"sm:hidden px-3 py-2 bg-gray-100 rounded-xl",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:R}),(0,a.jsxs)("span",{className:"text-gray-500",children:[" / ",q.totalPages]})]}),(0,a.jsxs)("button",{onClick:()=>F(e=>Math.min(e+1,q.totalPages)),disabled:R===q.totalPages,className:"flex items-center gap-1 px-3 py-2 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-100 disabled:opacity-40 disabled:cursor-not-allowed transition-all",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,a.jsx)(d.ChevronRight,{size:18})]}),(0,a.jsx)("button",{onClick:()=>F(q.totalPages),disabled:R===q.totalPages,className:"p-2 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-100 disabled:opacity-40 disabled:cursor-not-allowed transition-all",title:"Last Page",children:(0,a.jsx)(k.ChevronsRight,{size:18})})]})]}),{}),(0,a.jsx)(()=>{let[e,s]=(0,t.useState)(""),r=()=>{let a=parseInt(e);a>=1&&a<=q.totalPages&&(F(a),s(""))};return q.totalPages<=5?null:(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-4 justify-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Jump to page:"}),(0,a.jsx)("input",{type:"number",min:"1",max:q.totalPages,value:e,onChange:e=>s(e.target.value),onKeyPress:e=>"Enter"===e.key&&r(),className:"w-20 px-3 py-1.5 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Page"}),(0,a.jsx)("button",{onClick:r,className:"px-3 py-1.5 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-all text-sm font-medium",children:"Go"})]})},{})]}),K&&(0,a.jsx)(({transaction:e,onClose:t})=>e?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-100 px-6 py-5 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Transaction Details"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-0.5",children:["ID: ",e._id?.slice(-8).toUpperCase()]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>(0,O.default)({data:X,service:"usertransaction"}),className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-100 transition-colors font-medium",children:[(0,a.jsx)(N.Download,{size:18}),"Download PDF"]}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,a.jsx)(x.XCircle,{size:24,className:"text-gray-400 hover:text-gray-600"})})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-2xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[eb(e.transaction_type),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Transaction Type"}),(0,a.jsx)("p",{className:"text-lg font-bold text-gray-800 capitalize",children:e.transaction_type})]})]}),eu(e.transaction_status)]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-5 border border-blue-100",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-gray-600 mb-3 flex items-center gap-2",children:[(0,a.jsx)(p.User,{size:16}),"Farmer Details"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("img",{src:e.user_id?.farmerProfile?.user_image||"/placeholder-user.png",alt:e.user_id?.name,className:"w-16 h-16 rounded-2xl object-cover border-4 border-white shadow-lg",onError:a=>{a.target.src="https://ui-avatars.com/api/?name="+encodeURIComponent(e.user_id?.name||"User")}}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-bold text-gray-800 text-lg",children:e.user_id?.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.user_id?.email}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.user_id?.phone_number}),(0,a.jsx)("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-semibold",children:e.user_id?.farmerProfile?.farmerId})]})]})]}),e.warehouse_id&&(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-purple-50 rounded-2xl border border-purple-100",children:[(0,a.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl",children:(0,a.jsx)(g.MapPin,{className:"text-purple-600",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Warehouse"}),(0,a.jsx)("p",{className:"font-bold text-gray-800",children:e.warehouse_id.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.warehouse_id.location})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(u.Package,{size:18}),"Grain Details"]}),(0,a.jsx)("div",{className:"space-y-3",children:e.grain?.map((e,t)=>(0,a.jsxs)("div",{className:"border-2 border-gray-100 rounded-2xl p-4 hover:border-blue-200 transition-all bg-white shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"font-bold text-gray-800 text-lg",children:e.category_id?.grain_type}),(0,a.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-sm font-semibold",children:["Grade ",e.category_id?.quality]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3",children:[(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:"Quantity"}),(0,a.jsxs)("p",{className:"font-bold text-gray-800",children:[e.quantity_quintal?.toFixed(2)," qtl"]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3",children:[(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:"Price/Quintal"}),(0,a.jsx)("p",{className:"font-bold text-gray-800",children:eh(e.price_per_quintal)})]}),e.moisture_content>0&&(0,a.jsxs)("div",{className:"bg-yellow-50 rounded-xl p-3",children:[(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:"Moisture"}),(0,a.jsxs)("p",{className:"font-bold text-yellow-700",children:[e.moisture_content,"%"]})]})]})]},t))})]}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 rounded-2xl p-5 text-white shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-100 text-sm font-medium",children:"Total Amount"}),(0,a.jsx)("p",{className:"text-4xl font-bold mt-1",children:eh(e.total_amount)})]}),(0,a.jsx)("div",{className:"p-4 bg-white/20 rounded-2xl backdrop-blur-sm",children:(0,a.jsx)(v.TrendingUp,{size:32})})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(c.CheckCircle,{size:18}),"Approval Workflow"]}),(0,a.jsx)("div",{className:"space-y-3",children:[{label:"Supervisor",data:e.approval_status?.supervisor_approval},{label:"Manager",data:e.approval_status?.manager_approval},{label:"Admin",data:e.approval_status?.admin_approval}].map((e,t)=>(0,a.jsxs)("div",{className:`flex items-center justify-between p-4 rounded-2xl border-2 transition-all ${e.data?.status?"bg-green-50 border-green-200":e.data?.date?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:`p-2 rounded-xl ${e.data?.status?"bg-green-100":e.data?.date?"bg-red-100":"bg-gray-200"}`,children:e.data?.status?(0,a.jsx)(c.CheckCircle,{className:"text-green-600",size:24}):e.data?.date?(0,a.jsx)(x.XCircle,{className:"text-red-600",size:24}):(0,a.jsx)(m.Clock,{className:"text-gray-400",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:e.label}),e.data?.user_id?(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.data.user_id.name}):(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Pending approval"})]})]}),e.data?.date&&(0,a.jsx)("span",{className:"text-xs text-gray-500 bg-white px-3 py-1 rounded-lg shadow-sm",children:eg(e.data.date)})]},t))})]}),e.remarks&&(0,a.jsxs)("div",{className:"bg-amber-50 rounded-2xl p-4 border border-amber-200",children:[(0,a.jsx)("p",{className:"text-sm text-amber-700 font-medium mb-1",children:"Remarks"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800 capitalize",children:e.remarks.replace(/_/g," ")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-gray-500 bg-gray-50 rounded-xl p-3",children:[(0,a.jsx)(h.Calendar,{size:18}),(0,a.jsxs)("span",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Transaction Date:"})," ",eg(e.transaction_date)]})]})]})]})}):null,{transaction:X,onClose:()=>{Q(!1),H(null)}}),(0,a.jsx)(W,{isOpen:et,onClose:()=>es(!1),onDownload:e=>{console.log("Downloaded transactions:",e)}})]})})}],51910)}]);