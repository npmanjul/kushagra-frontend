(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50439,23731,e=>{"use strict";let r=(0,e.i(75254).default)("wheat",[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]]);e.s(["default",()=>r],23731),e.s(["Wheat",()=>r],50439)},12426,e=>{"use strict";let r=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>r],12426)},57149,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(7233),s=e.i(50439),l=e.i(12426),i=e.i(5766),o=e.i(31795),c=e.i(23677);e.s(["default",0,()=>{let[e,n]=(0,a.useState)([]),[d,h]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),[g,x]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[f,y]=(0,a.useState)([]),[v,j]=(0,a.useState)([]),[w,N]=(0,a.useState)([]),[k,S]=(0,a.useState)(!1),[P,C]=(0,a.useState)(""),[M,E]=(0,a.useState)([]),[F,T]=(0,a.useState)([]),Z=async()=>{try{let e=await fetch(`${o.default}/grain/allgraincategories`);if(!e.ok)throw Error("Failed to fetch grains");let r=await e.json(),a=Array.from(new Set(r.map(e=>e.grain_type)));n(a)}catch(e){console.error("Error fetching grains:",e),i.default.error("Failed to load grain categories")}},L=async()=>{if(!k){if(!d||!m||!g||!p)return void i.default.error("Please fill all price fields and select a grain");S(!0);try{let e=await fetch(`${o.default}/pricehistory/addtodayprice`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grain_name:d,maxprice:parseFloat(m),avgprice:parseFloat(g),minprice:parseFloat(p)})}),r=await e.json();e.ok?(i.default.success("Grain price updated successfully"),h(""),u(""),x(""),b(""),Z(),P===d&&A(d)):i.default.error(r.message||"Failed to update price")}catch(e){console.error("Error updating price:",e),i.default.error("Something went wrong while updating price")}finally{S(!1)}}},A=async e=>{if(e)try{let r=await fetch(`${o.default}/pricehistory/allpricehistory/${e}`);if(!r.ok)throw Error("Failed to fetch price history");let a=await r.json();T(a.grain_type||""),E(a.dates||[]),y(a.maxPrices||[]),j(a.avgPrices||[]),N(a.minPrices||[])}catch(e){console.error("Error fetching price history:",e),i.default.error("Failed to load price history")}};return(0,a.useEffect)(()=>{P&&A(P)},[P]),(0,a.useEffect)(()=>{Z()},[]),(0,r.jsx)("div",{className:"min-h-screen",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8 border border-amber-100",children:[(0,r.jsxs)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center gap-2",children:[(0,r.jsx)(l.DollarSign,{className:"w-6 h-6 text-amber-600"}),"Add Today's Grain Price"]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grain Type"}),(0,r.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-gray-50 hover:bg-white",children:[(0,r.jsx)("option",{value:"",children:"Select a grain type..."}),e.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Price (₹/Qtl)"}),(0,r.jsx)("input",{type:"number",value:m,onChange:e=>u(e.target.value),placeholder:"Enter maximum price",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-gray-50 hover:bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Avg Price (₹/Qtl)"}),(0,r.jsx)("input",{type:"number",value:g,onChange:e=>x(e.target.value),placeholder:"Enter average price",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-gray-50 hover:bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Price (₹/Qtl)"}),(0,r.jsx)("input",{type:"number",value:p,onChange:e=>b(e.target.value),placeholder:"Enter minimum price",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-gray-50 hover:bg-white"})]})]}),(0,r.jsx)("button",{onClick:L,disabled:k,className:`w-full bg-gradient-to-r from-amber-500 to-orange-600 text-white py-3 px-6 rounded-xl font-semibold transition-all shadow-md flex items-center justify-center gap-2 ${k?"opacity-70 cursor-not-allowed":"hover:from-amber-600 hover:to-orange-700 hover:shadow-lg"}`,children:k?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),(0,r.jsx)("span",{children:"Updating..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.Plus,{className:"w-5 h-5"}),"Update Price"]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-amber-100",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Current Grain Prices"}),0===e.length?(0,r.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,r.jsx)(s.Wheat,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"No grains available yet"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-8 flex flex-col md:flex-row md:items-end md:gap-4",children:(0,r.jsxs)("div",{className:"w-full md:w-72",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Grain for Price Trend"}),(0,r.jsxs)("select",{value:P,onChange:e=>C(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent bg-gray-50 hover:bg-white",children:[(0,r.jsx)("option",{value:"",children:"Select a grain..."}),e.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]})}),M.length>0?(0,r.jsx)(c.default,{date:M,maxprice:f,avgprice:v,minprice:w,categories:F}):(0,r.jsx)("div",{className:"text-center py-12 text-gray-400",children:(0,r.jsx)("p",{className:"text-lg",children:"No data available"})})]})]})]})})}])}]);