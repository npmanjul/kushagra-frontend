(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76249,e=>{"use strict";var a=e.i(43476),s=e.i(37902),t=e.i(71645),r=e.i(55436),l=e.i(84614),i=e.i(37727),n=e.i(43531),c=e.i(88844),d=e.i(25652),o=e.i(33785),x=e.i(1928),b=e.i(63209),m=e.i(63059),j=e.i(87316),h=e.i(43432),u=e.i(63488),p=e.i(88081),g=e.i(31278),f=e.i(21557),y=e.i(72520),N=e.i(83086),v=e.i(52571);let w=(0,e.i(75254).default)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);var k=e.i(50439),S=e.i(64659),_=e.i(61659),C=e.i(98919),F=e.i(21218),I=e.i(5766),$=e.i(31795);e.s(["default",0,()=>{let[e,q]=(0,t.useState)(""),[A,T]=(0,t.useState)("name"),[P,D]=(0,t.useState)([]),[Q,U]=(0,t.useState)(null),[R,E]=(0,t.useState)(!1),[L,Y]=(0,t.useState)(!1),[z,B]=(0,t.useState)([]),[M,W]=(0,t.useState)(null),[G,O]=(0,t.useState)(!1),[H,K]=(0,t.useState)(null),[X,J]=(0,t.useState)(""),[V,Z]=(0,t.useState)(""),[ee,ea]=(0,t.useState)([]),[es,et]=(0,t.useState)(!1),[er,el]=(0,t.useState)(1),[ei,en]=(0,t.useState)(!1),ec=async e=>{let a;if(e.length<2)return void D([]);E(!0);let s=(a=e.trim()).includes("@")?"email":/^[\d\s\-\+]+$/.test(a)&&a.replace(/\D/g,"").length>=7?"phone_number":/^SGB\d{10}$/i.test(a)?"userId":"name";T(s);try{let a=`${s}=${encodeURIComponent(e)}`,t=await fetch(`${$.default}/user/finduserdetails?${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw Error("Failed to search users");let r=await t.json();r.users&&Array.isArray(r.users)?D(r.users):r.user?D([r.user]):D([]),Y(!0)}catch(e){console.error("Search error:",e),D([]),Y(!0)}finally{E(!1)}},ed=async e=>{O(!0);try{let a=await fetch(`${$.default}/user/getallgraindeposite?farmerId=${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok)throw Error("Failed to fetch inventory");let s=await a.json(),t=(Array.isArray(s.deposits)?s.deposits:[]).map(e=>({category_id:e.category_id,grain_type:e.grain_type||"Unknown",quality:e.quality||"Standard",quantity:Number(e.total_quantity??0),today_price_per_quintal:e.today_price_per_quintal??0,total_value:e.total_value??0,warehouse_name:e.warehouse_name||"Main",deposited_date:e.deposited_date||null})).sort((e,a)=>a.quantity-e.quantity);B(t),el(2)}catch(e){console.error("Inventory fetch error:",e),I.default.error("Failed to load user inventory"),B([])}finally{O(!1)}},eo=async e=>{try{let a=await fetch(`${$.default}/pricehistory/pricehistorybygrain?id=${e}`);if(!a.ok)throw Error("Failed to fetch price");let s=await a.json();K(s)}catch(e){console.error("Price fetch error:",e),I.default.error("Failed to load today's price")}},ex=async()=>{try{let e=await fetch(`${$.default}/warehouse/allwarehouse`);if(!e.ok)throw Error("Failed to fetch warehouses");let a=await e.json();ea(a)}catch(e){console.error(e),I.default.error("Failed to load warehouses")}};(0,t.useEffect)(()=>{ex()},[]),(0,t.useEffect)(()=>{let a=setTimeout(()=>{e?ec(e):(D([]),Y(!1))},500);return()=>clearTimeout(a)},[e]),(0,t.useEffect)(()=>{M&&(eo(M.grain_id||M.category_id),el(3))},[M]);let eb=async()=>{if(!X||!V)return void I.default.error("Please fill all required fields");if(parseFloat(X)>parseFloat(M.quantity))return void I.default.error("Sell quantity cannot exceed available quantity");et(!0);try{let e={farmerId:Q._id||Q.id,grain_id:M.grain_id||M.category_id,quantity:X,warehouse_id:V,price:H?.price,transaction_type:"sell"};if(!(await fetch(`${$.default}/transaction/sell`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)})).ok)throw Error("Failed to process sale");I.default.success("Sale processed successfully!"),U(null),B([]),W(null),J(""),Z(""),el(1),en(!1)}catch(e){console.error("Sale error:",e),I.default.error("Failed to process sale")}finally{et(!1)}},em=()=>X&&H?.price?(parseFloat(X)*parseFloat(H.price)).toFixed(2):0,ej=({label:e,value:s,highlight:t})=>(0,a.jsxs)("div",{className:`${t?"bg-white/80":"bg-white/50"} rounded-xl p-2.5`,children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-0.5",children:e}),(0,a.jsx)("p",{className:`font-semibold truncate ${t?"text-emerald-600":"text-gray-900"}`,children:s||"-"})]});return(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 min-h-screen bg-gradient-to-br from-slate-50 via-white to-emerald-50/30",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 fixed inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-1/4 -left-20 w-72 h-72 bg-emerald-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-3/4 -right-20 w-72 h-72 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float animation-delay-2000"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute bottom-1/4 left-1/3 w-72 h-72 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float animation-delay-4000"})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8 max-w-7xl",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 p-4 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl shadow-lg",children:(0,a.jsx)(x.ShoppingCart,{className:"h-8 w-8 text-white"})}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 absolute -top-1 -right-1 flex h-3 w-3",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,a.jsx)("h1",{className:"jsx-5b01246a782bc537 text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Sell Grain"}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-600 mt-1",children:"Process grain sales from farmer inventory"})]})]}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 hidden lg:flex items-center bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-2",children:[{step:1,label:"Search Farmer",icon:r.Search},{step:2,label:"Select Inventory",icon:c.Package},{step:3,label:"Confirm Sale",icon:_.CreditCard}].map((e,s)=>(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center",children:[(0,a.jsxs)("div",{className:`jsx-5b01246a782bc537 flex items-center px-4 py-2.5 rounded-xl transition-all duration-500 ${er>=e.step?"bg-white shadow-md":""}`,children:[(0,a.jsxs)("div",{className:`jsx-5b01246a782bc537 relative flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-500 ${er>=e.step?"bg-gradient-to-br from-emerald-500 to-green-600 text-white shadow-lg":"bg-gray-200 text-gray-500"}`,children:[er>e.step?(0,a.jsx)(n.Check,{className:"h-5 w-5"}):(0,a.jsx)(e.icon,{className:"h-5 w-5"}),er===e.step&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -inset-0.5 bg-gradient-to-r from-emerald-500 to-green-600 rounded-xl blur opacity-30 animate-pulse"})]}),(0,a.jsx)("span",{className:`jsx-5b01246a782bc537 ml-3 text-sm font-medium hidden xl:inline transition-all duration-500 ${er>=e.step?"text-gray-900":"text-gray-500"}`,children:e.label})]}),s<2&&(0,a.jsx)(m.ChevronRight,{className:`h-5 w-5 mx-2 transition-all duration-500 ${er>e.step?"text-emerald-500":"text-gray-300"}`})]},e.step))}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 flex lg:hidden justify-center gap-2",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:`jsx-5b01246a782bc537 h-2 rounded-full transition-all duration-500 ${er>=e?"w-12 bg-gradient-to-r from-emerald-500 to-green-600":"w-2 bg-gray-300"}`},e))})]})}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 p-2.5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg",children:(0,a.jsx)(r.Search,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("h2",{className:"jsx-5b01246a782bc537 text-xl font-bold text-gray-800",children:"Search Farmer"}),Q&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 ml-auto px-4 py-1.5 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium flex items-center gap-1.5",children:[(0,a.jsx)(n.Check,{className:"h-4 w-4"}),"Farmer Selected"]})]}),Q?(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl border-2 border-emerald-200 p-6 animate-fadeIn",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-16 h-16 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl flex items-center justify-center text-white font-bold text-xl shadow-lg",children:Q.name?.charAt(0).toUpperCase()||"F"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -bottom-1 -right-1 bg-white rounded-full p-1",children:(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 bg-emerald-500 rounded-full p-1",children:(0,a.jsx)(n.Check,{className:"h-3 w-3 text-white"})})})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 font-bold text-xl text-gray-900",children:Q.name}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-600 text-sm lg:text-base",children:Q.email}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-wrap items-center gap-3 mt-1",children:[Q.phone_number&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 flex items-center gap-1",children:[(0,a.jsx)(h.Phone,{className:"h-4 w-4"}),Q.phone_number]}),Q.userId&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-emerald-600 font-medium flex items-center gap-1",children:[(0,a.jsx)(p.Hash,{className:"h-4 w-4"}),Q.userId]})]})]})]}),(0,a.jsx)("button",{onClick:()=>{U(null),B([]),W(null),el(1)},className:"jsx-5b01246a782bc537 p-3 hover:bg-red-50 rounded-xl transition-all duration-200 group",children:(0,a.jsx)(i.X,{className:"h-6 w-6 text-gray-500 group-hover:text-red-500 transition-colors"})})]})}):(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative group",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -inset-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl blur opacity-20 group-hover:opacity-30 transition duration-300"}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)(r.Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, email, phone, or farmer ID...",value:e,onChange:e=>q(e.target.value),onFocus:()=>e&&Y(!0),className:"jsx-5b01246a782bc537 w-full pl-12 pr-12 py-4 bg-white rounded-2xl border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all duration-300 text-base lg:text-lg font-medium placeholder-gray-400"}),R&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute right-4 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)(g.Loader2,{className:"animate-spin h-5 w-5 text-blue-500"})})]})]}),e&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 mt-3 flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 px-3 py-1.5 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 text-blue-700 rounded-full text-xs font-medium flex items-center gap-1.5",children:["email"===A&&(0,a.jsx)(u.Mail,{className:"h-3.5 w-3.5"}),"phone_number"===A&&(0,a.jsx)(h.Phone,{className:"h-3.5 w-3.5"}),"userId"===A&&(0,a.jsx)(p.Hash,{className:"h-3.5 w-3.5"}),"name"===A&&(0,a.jsx)(l.User,{className:"h-3.5 w-3.5"}),"Searching by ",A.replace("_"," ")]}),(0,a.jsx)(N.Sparkles,{className:"h-4 w-4 text-yellow-500 animate-pulse"})]}),L&&P.length>0&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute z-40 w-full mt-3 bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-96 overflow-y-auto animate-slideDown",children:P.map((e,s)=>(0,a.jsxs)("div",{onClick:()=>{U(e),q(""),Y(!1),D([]),ed(e._id||e.id)},className:"jsx-5b01246a782bc537 group px-5 py-4 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 cursor-pointer flex items-center gap-4 transition-all duration-200 border-b border-gray-100 last:border-b-0 first:rounded-t-2xl last:rounded-b-2xl",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:shadow-xl transition-all duration-200",children:e.name?.charAt(0).toUpperCase()||"F"}),e.isActive&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:e.name||"Unknown Farmer"}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-600 truncate",children:e.email||"No email"}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-wrap items-center gap-3 mt-1",children:[e.phone_number&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-xs text-gray-500 flex items-center gap-1",children:[(0,a.jsx)(h.Phone,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 truncate",children:e.phone_number})]}),e.userId&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-xs text-blue-600 font-medium flex items-center gap-1",children:[(0,a.jsx)(p.Hash,{className:"h-3 w-3"}),e.userId]})]})]}),(0,a.jsx)(m.ChevronRight,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-500 group-hover:translate-x-1 transition-all duration-200 flex-shrink-0"})]},e._id||e.id||s))}),L&&e&&0===P.length&&!R&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute z-40 w-full mt-3 bg-white rounded-2xl shadow-2xl border border-gray-200 p-8 animate-slideDown",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.User,{className:"h-8 w-8 text-gray-400"})}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-900 font-semibold",children:"No farmers found"}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 mt-1",children:"Try searching with different criteria"})]})})]})})]}),Q&&er>=2&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6 animate-fadeIn",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 p-2.5 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl shadow-lg",children:(0,a.jsx)(c.Package,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("h2",{className:"jsx-5b01246a782bc537 text-xl font-bold text-gray-800",children:"Select Inventory"}),M&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 ml-auto px-4 py-1.5 bg-purple-100 text-purple-700 rounded-full text-sm font-medium flex items-center gap-1.5",children:[(0,a.jsx)(n.Check,{className:"h-4 w-4"}),"Item Selected"]})]}),G?(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-col items-center justify-center py-20",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-20 h-20 border-4 border-purple-200 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-0 left-0 w-20 h-20 border-4 border-purple-500 rounded-full animate-spin border-t-transparent"})]}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-600 mt-4",children:"Loading inventory..."})]}):z.length>0?(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:z.map((e,s)=>(0,a.jsxs)("div",{onClick:()=>{W(e),J(""),Z("")},className:`jsx-5b01246a782bc537 group relative cursor-pointer transition-all duration-300 transform hover:scale-105 ${M===e?"scale-105":""}`,children:[(0,a.jsx)("div",{className:`jsx-5b01246a782bc537 absolute inset-0 bg-gradient-to-br rounded-2xl blur-md transition-all duration-300 ${M===e?"from-purple-400 to-pink-400 opacity-40":"from-gray-200 to-gray-300 opacity-0 group-hover:opacity-30"}`}),(0,a.jsxs)("div",{className:`jsx-5b01246a782bc537 relative p-6 rounded-2xl border-2 backdrop-blur-sm transition-all duration-300 ${M===e?"border-purple-400 bg-gradient-to-br from-purple-50 to-pink-50":"border-gray-200 bg-white hover:border-purple-300 hover:bg-gradient-to-br hover:from-purple-50/50 hover:to-pink-50/50"}`,children:[M===e&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-3 right-3 animate-bounceIn",children:(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full p-1.5 shadow-lg",children:(0,a.jsx)(n.Check,{className:"h-4 w-4 text-white"})})}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-start gap-3 mb-4",children:[(0,a.jsx)("div",{className:`jsx-5b01246a782bc537 p-3 rounded-xl transition-all duration-300 ${M===e?"bg-gradient-to-br from-purple-500 to-pink-600 shadow-lg":"bg-gradient-to-br from-gray-100 to-gray-200 group-hover:from-purple-100 group-hover:to-pink-100"}`,children:(0,a.jsx)(k.Wheat,{className:`h-6 w-6 transition-colors ${M===e?"text-white":"text-gray-600 group-hover:text-purple-600"}`})}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"jsx-5b01246a782bc537 font-bold text-gray-900 truncate",children:e.grain_type}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-2 mt-1",children:(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 px-2 py-0.5 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium",children:e.quality})})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-3",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center pb-3 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600",children:"Available Stock"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-lg text-gray-900",children:[e.quantity," Qtl"]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-2",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-xs text-gray-500 flex items-center gap-1",children:[(0,a.jsx)(w,{className:"h-3.5 w-3.5"}),"Warehouse"]}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-sm font-medium text-gray-700 truncate max-w-[120px]",children:e.warehouse_name})]}),e.deposited_date&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-xs text-gray-500 flex items-center gap-1",children:[(0,a.jsx)(j.Calendar,{className:"h-3.5 w-3.5"}),"Deposited"]}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-700",children:new Date(e.deposited_date).toLocaleDateString()})]})]})]})]})]},s))}):(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center py-20 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-24 h-24 bg-gradient-to-br from-gray-200 to-gray-300 rounded-3xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(c.Package,{className:"h-12 w-12 text-gray-400"})}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-700 font-semibold text-lg",children:"No inventory found"}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 mt-2",children:"This farmer has no grain in storage"})]})]}),M&&er>=3&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 animate-fadeIn",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 p-2.5 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl shadow-lg",children:(0,a.jsx)(d.TrendingUp,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("h2",{className:"jsx-5b01246a782bc537 text-xl font-bold text-gray-800",children:"Sale Details"})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[(0,a.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,a.jsx)(c.Package,{className:"h-5 w-5 text-blue-600"}),"Selected Item"]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-3",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Grain Type"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 font-semibold text-gray-900",children:M.grain_type})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Quality"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 font-semibold text-gray-900",children:M.quality})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2 border-t border-blue-200/50 pt-3",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Available Stock"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-emerald-600 text-lg",children:[M.quantity," Qtl"]})]})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl p-6 border border-emerald-200",children:[(0,a.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,a.jsx)(F.Activity,{className:"h-5 w-5 text-emerald-600"}),"Today's Market Price"]}),H?(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center py-4",children:[(0,a.jsxs)("p",{className:"jsx-5b01246a782bc537 text-5xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:["₹",H.price]}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 mt-2",children:"per quintal"}),H.date&&(0,a.jsxs)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-400 mt-3 flex items-center justify-center gap-1",children:[(0,a.jsx)(j.Calendar,{className:"h-3.5 w-3.5"}),"Updated: ",new Date(H.date).toLocaleDateString()]})]}):(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center py-8",children:[(0,a.jsx)(g.Loader2,{className:"h-8 w-8 animate-spin text-emerald-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500",children:"Loading price..."})]})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,a.jsxs)("label",{className:"jsx-5b01246a782bc537 block text-sm font-semibold text-gray-700 mb-2",children:["Sell Quantity (Quintal) ",(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)("input",{type:"number",min:"0",max:M.quantity,step:"0.01",placeholder:"Enter quantity to sell",value:X,onChange:e=>{let a=e.target.value;(""===a||parseFloat(a)>=0&&parseFloat(a)<=parseFloat(M.quantity))&&J(a)},className:"jsx-5b01246a782bc537 w-full px-4 py-3.5 pr-16 bg-white border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 transition-all duration-200 text-lg font-medium"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-500 font-medium",children:"Qtl"})})]}),X&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 mt-2 p-3 bg-blue-50 rounded-xl border border-blue-200",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-start gap-2",children:[(0,a.jsx)(v.Info,{className:"h-4 w-4 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex-1 text-sm",children:[(0,a.jsxs)("p",{className:"jsx-5b01246a782bc537 text-blue-800 font-medium",children:["Remaining after sale: ",(parseFloat(M.quantity)-parseFloat(X)).toFixed(2)," Qtl"]}),parseFloat(X)>.8*parseFloat(M.quantity)&&(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-blue-600 text-xs mt-1",children:"You're selling more than 80% of available stock"})]})]})})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,a.jsxs)("label",{className:"jsx-5b01246a782bc537 block text-sm font-semibold text-gray-700 mb-2",children:["Select Warehouse ",(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)(o.Warehouse,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,a.jsxs)("select",{value:V,onChange:e=>Z(e.target.value),className:"jsx-5b01246a782bc537 w-full pl-12 pr-10 py-3.5 bg-white border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 transition-all duration-200 appearance-none cursor-pointer text-gray-900 font-medium",children:[(0,a.jsx)("option",{value:"",className:"jsx-5b01246a782bc537",children:"Choose warehouse location"}),ee.map(e=>(0,a.jsxs)("option",{value:e._id,className:"jsx-5b01246a782bc537",children:[e.name," - ",e.location]},e._id))]}),(0,a.jsx)(S.ChevronDown,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]}),X&&H&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6 border border-amber-200 animate-slideUp",children:[(0,a.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,a.jsx)(f.Calculator,{className:"h-5 w-5 text-amber-600"}),"Transaction Summary"]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-3",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Quantity"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-medium text-gray-900",children:[X," Quintal"]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Rate per Quintal"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-medium text-gray-900",children:["₹",H.price]})]}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 border-t border-amber-200 pt-3",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700",children:"Total Amount"}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 text-right",children:[(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-2xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:["₹",em()]}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-500 mt-0.5",children:"Including all charges"})]})]})})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex gap-3 pt-2",children:[(0,a.jsx)("button",{onClick:()=>{W(null),J(""),Z(""),el(2)},className:"jsx-5b01246a782bc537 flex-1 py-3.5 px-6 rounded-xl font-semibold border-2 border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Back"}),(0,a.jsxs)("button",{onClick:()=>en(!0),disabled:!X||!V||es,className:"jsx-5b01246a782bc537 flex-1 relative overflow-hidden group rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute inset-0 bg-gradient-to-r from-emerald-600 to-green-600 transition-transform group-hover:scale-105"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 relative flex items-center justify-center gap-2 px-6 py-3.5 text-white font-semibold",children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Loader2,{className:"h-5 w-5 animate-spin"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537",children:"Processing..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.ShoppingCart,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537",children:"Proceed to Sell"}),(0,a.jsx)(y.ArrowRight,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]})})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex gap-3 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[(0,a.jsx)(C.Shield,{className:"h-5 w-5 text-gray-600 flex-shrink-0 mt-0.5"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 flex-1",children:(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-600 leading-relaxed",children:"This transaction is secured and will be recorded permanently. All sales are subject to verification and approval."})})]})]})]})]})]}),(0,a.jsx)(()=>{if(!ei)return null;let e=ee.find(e=>e._id===V),s=M?(parseFloat(M.quantity)-parseFloat(X||0)).toFixed(2):"0";return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md",onClick:()=>en(!1)}),(0,a.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] bg-white rounded-3xl shadow-2xl overflow-auto animate-modalSlide no-scrollbar",children:[(0,a.jsx)("div",{className:"h-2 bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500"}),(0,a.jsxs)("div",{className:"p-6 md:p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl shadow-lg",children:(0,a.jsx)(x.ShoppingCart,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Confirm Sale"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:"Review all details before confirming"})]})]}),(0,a.jsx)("button",{onClick:()=>en(!1),className:"p-2.5 hover:bg-gray-100 rounded-xl transition-colors",children:(0,a.jsx)(i.X,{className:"h-5 w-5 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-5 border border-blue-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(l.User,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:"Farmer Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,a.jsx)(ej,{label:"Name",value:Q?.name}),(0,a.jsx)(ej,{label:"ID",value:Q?.userId}),(0,a.jsx)(ej,{label:"Email",value:Q?.email}),(0,a.jsx)(ej,{label:"Phone",value:Q?.phone_number||"-"}),(0,a.jsx)(ej,{label:"Warehouse",value:e?.name||"-"}),(0,a.jsx)(ej,{label:"Location",value:e?.location||"-"})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-5 border border-purple-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(k.Wheat,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:"Grain Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,a.jsx)(ej,{label:"Type",value:M?.grain_type}),(0,a.jsx)(ej,{label:"Quality",value:M?.quality}),(0,a.jsx)(ej,{label:"Available",value:`${M?.quantity} Qtl`}),(0,a.jsx)(ej,{label:"Selling",value:`${X||0} Qtl`,highlight:!0}),(0,a.jsx)(ej,{label:"Remaining",value:`${s} Qtl`}),(0,a.jsx)(ej,{label:"Rate",value:`₹${H?.price||0}/Qtl`})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl p-5 border border-emerald-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(f.Calculator,{className:"h-5 w-5 text-emerald-600"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:"Transaction Summary"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Quantity × Rate"}),(0,a.jsxs)("span",{className:"text-gray-900 font-medium",children:[X||0," × ₹",H?.price||0]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 border-t border-emerald-200",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-800",children:"Total Amount"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-emerald-600",children:["₹",em()]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[(0,a.jsx)(b.AlertCircle,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("p",{className:"text-sm text-amber-800",children:["This action will deduct ",X||0," quintals from the farmer's inventory. Please ensure all details are correct before confirming."]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>en(!1),className:"flex-1 py-3.5 px-6 rounded-xl font-semibold border-2 border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Cancel"}),(0,a.jsx)("button",{onClick:eb,disabled:es,className:"flex-1 py-3.5 px-6 rounded-xl font-semibold bg-gradient-to-r from-emerald-600 to-green-600 text-white hover:from-emerald-700 hover:to-green-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg",children:es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Loader2,{className:"h-5 w-5 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Check,{className:"h-5 w-5"}),"Confirm Sale"]})})]})]})]})]})},{className:"jsx-5b01246a782bc537"}),(0,a.jsx)(s.default,{id:"5b01246a782bc537",children:"@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}.animate-float.jsx-5b01246a782bc537{animation:6s ease-in-out infinite float}.animation-delay-2000.jsx-5b01246a782bc537{animation-delay:2s}.animation-delay-4000.jsx-5b01246a782bc537{animation-delay:4s}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-slideDown.jsx-5b01246a782bc537{animation:.3s ease-out slideDown}@keyframes slideUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-slideUp.jsx-5b01246a782bc537{animation:.3s ease-out slideUp}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.animate-fadeIn.jsx-5b01246a782bc537{animation:.5s ease-out fadeIn}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{transform:scale(1.05)}70%{transform:scale(.9)}to{opacity:1;transform:scale(1)}}.animate-bounceIn.jsx-5b01246a782bc537{animation:.6s cubic-bezier(.68,-.55,.265,1.55) bounceIn}@keyframes modalSlide{0%{opacity:0;transform:scale(.9)translateY(20px)}to{opacity:1;transform:scale(1)translateY(0)}}.animate-modalSlide.jsx-5b01246a782bc537{animation:.3s ease-out modalSlide}"})]})}],76249)}]);