(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54178,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75254);let r=(0,a.default)("apple",[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]]);var l=e.i(17923),i=e.i(61659),n=e.i(40160),d=e.i(7233);let o=(0,a.default)("receipt-cent",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M12 6.5v11",key:"ecfhkf"}],["path",{d:"M15 9.4a4 4 0 1 0 0 5.2",key:"1makmb"}]]),c=(0,a.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var x=e.i(25652),m=e.i(35408),h=e.i(33785),p=e.i(23731),p=p,g=e.i(15057),u=e.i(10813),b=e.i(21218),f=e.i(83086),j=e.i(5766),y=e.i(72288),N=e.i(31795),v=e.i(41444),w=e.i(37727),k=e.i(87316),_=e.i(88844);let C=(0,a.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),S=(0,a.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var P=e.i(3116),T=e.i(88081),F=e.i(46897),$=e.i(84614),Q=e.i(43432),A=e.i(7486),D=e.i(95468),q=e.i(98919),I=e.i(82293),M=e.i(43553),U=e.i(50439),G=e.i(3496),R=e.i(21849),z=e.i(73375),V=e.i(63059),E=e.i(87378),L=e.i(17835);let W=({isOpen:e,setIsOpen:a,category_id:r})=>{let[l,n]=(0,s.useState)("all"),[d,o]=(0,s.useState)(null),[c,h]=(0,s.useState)(!1),[p,g]=(0,s.useState)(null),u=async()=>{if(h(!0),r)try{let e=await fetch(`${N.default}/user/categorytransactiondetails/${r}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw Error("Failed to fetch transactions");let t=await e.json();t.success&&o(t)}catch(e){console.error("Error fetching transactions:",e),j.toast.error("Failed to load transactions")}finally{h(!1)}};(0,s.useEffect)(()=>{e&&r&&u()},[r,e]);let b=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0),y=d?.transactions?d.transactions.reduce((e,t)=>{let s=t.grain?.total_amount||0,a=t.grain?.quantity_quintal||0,r=(t.price_analysis?.profit_per_quintal||0)*a;return"deposit"===t.transaction_type&&(e.totalDeposit+=s,e.depositQty+=a),"sell"===t.transaction_type&&(e.totalSell+=s,e.sellQty+=a),"loan"===t.transaction_type&&(e.totalLoan+=s),"withdraw"===t.transaction_type&&(e.totalWithdraw+=s,e.withdrawQty+=a),e.totalProfit+=r,e.totalCurrentValue+=t.price_analysis?.total_current_value||0,e},{totalDeposit:0,totalSell:0,totalLoan:0,totalWithdraw:0,totalProfit:0,totalCurrentValue:0,depositQty:0,sellQty:0,withdrawQty:0}):{},v=d?.transactions?.filter(e=>"all"===l||e.transaction_type===l)||[],W=[{key:"all",label:"All",icon:_.Package},{key:"deposit",label:"Deposits",icon:S},{key:"sell",label:"Sales",icon:C},{key:"withdraw",label:"Withdrawals",icon:C},{key:"loan",label:"Loans",icon:i.CreditCard}];return e?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-0 md:p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white w-full h-full md:h-auto md:max-w-5xl md:max-h-[90vh] md:rounded-3xl shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",children:[(0,t.jsxs)("div",{className:"relative bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-700 px-4 md:px-8 py-5 md:py-6 text-white overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24"}),(0,t.jsxs)("div",{className:"relative flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:(0,t.jsx)(U.Wheat,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl md:text-2xl font-bold",children:d?.category?.grain_type||"Loading..."}),d?.category?.quality&&(0,t.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,t.jsxs)("span",{className:"px-2.5 py-0.5 bg-white/20 backdrop-blur-sm text-white text-xs font-semibold rounded-full flex items-center gap-1",children:[(0,t.jsx)(f.Sparkles,{className:"w-3 h-3"}),"Grade ",d.category.quality]})})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-4 mt-3 ml-14",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(R.IndianRupee,{className:"w-4 h-4 text-indigo-200"}),(0,t.jsx)("span",{className:"text-indigo-100 text-sm",children:"Today's Rate:"}),(0,t.jsxs)("span",{className:"font-bold text-lg",children:[b(d?.category?.today_price_per_quintal),(0,t.jsx)("span",{className:"text-sm font-normal text-indigo-200",children:"/Qtl"})]})]})})]}),(0,t.jsx)("button",{onClick:()=>a(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-all",children:(0,t.jsx)(w.X,{className:"w-6 h-6"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 px-4 md:px-8 py-4 bg-gradient-to-b from-gray-50 to-white border-b border-gray-100",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border border-emerald-100 rounded-xl p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"text-xs text-emerald-600 font-medium",children:"Total Deposits"}),(0,t.jsx)(S,{className:"w-4 h-4 text-emerald-500"})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-emerald-900",children:b(y.totalDeposit)}),(0,t.jsxs)("p",{className:"text-xs text-emerald-600 mt-1",children:[y.depositQty," Quintals"]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:"Total Sales"}),(0,t.jsx)(C,{className:"w-4 h-4 text-blue-500"})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-blue-900",children:b(y.totalSell)}),(0,t.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[y.sellQty," Quintals"]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-100 rounded-xl p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"text-xs text-amber-600 font-medium",children:"Current Value"}),(0,t.jsx)(E.Banknote,{className:"w-4 h-4 text-amber-500"})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-amber-900",children:b(y.totalCurrentValue)}),(0,t.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Market valuation"})]}),(0,t.jsxs)("div",{className:`bg-gradient-to-br ${y.totalProfit>=0?"from-emerald-50 to-teal-50 border-emerald-100":"from-rose-50 to-red-50 border-rose-100"} border rounded-xl p-3`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:`text-xs font-medium ${y.totalProfit>=0?"text-emerald-600":"text-rose-600"}`,children:"Net Profit/Loss"}),y.totalProfit>=0?(0,t.jsx)(x.TrendingUp,{className:"w-4 h-4 text-emerald-500"}):(0,t.jsx)(m.TrendingDown,{className:"w-4 h-4 text-rose-500"})]}),(0,t.jsxs)("p",{className:`text-lg font-bold ${y.totalProfit>=0?"text-emerald-900":"text-rose-900"}`,children:[y.totalProfit>=0?"+":"",b(y.totalProfit)]}),(0,t.jsx)("p",{className:`text-xs mt-1 ${y.totalProfit>=0?"text-emerald-600":"text-rose-600"}`,children:"From price changes"})]})]}),(0,t.jsx)("div",{className:"px-4 md:px-8 py-3 bg-white border-b border-gray-100",children:(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:W.map(e=>{let s=e.icon,a=l===e.key,r="all"===e.key?d?.transactions?.length||0:d?.transactions?.filter(t=>t.transaction_type===e.key).length||0;return(0,t.jsxs)("button",{onClick:()=>n(e.key),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium text-sm whitespace-nowrap transition-all ${a?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/30":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[(0,t.jsx)(s,{className:"w-4 h-4"}),e.label,(0,t.jsx)("span",{className:`px-1.5 py-0.5 rounded-full text-xs ${a?"bg-white/20":"bg-gray-200 text-gray-700"}`,children:r})]},e.key)})})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto px-4 md:px-8 py-4 bg-gray-50/50",children:c?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)("div",{className:"w-10 h-10 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):v.length>0?(0,t.jsx)("div",{className:"space-y-4",children:v.map((e,s)=>{let a=(e=>{switch(e){case"deposit":return{color:"from-emerald-500 to-green-600",light:"bg-gradient-to-br from-emerald-50 to-green-50",text:"text-emerald-600",border:"border-emerald-200",badge:"bg-emerald-100 text-emerald-700 border-emerald-200",hover:"hover:border-emerald-300 hover:shadow-emerald-100",label:"Grain Deposit"};case"sell":return{color:"from-blue-500 to-indigo-600",light:"bg-gradient-to-br from-blue-50 to-indigo-50",text:"text-blue-600",border:"border-blue-200",badge:"bg-blue-100 text-blue-700 border-blue-200",hover:"hover:border-blue-300 hover:shadow-blue-100",label:"Grain Sale"};case"withdraw":return{color:"from-rose-500 to-red-600",light:"bg-gradient-to-br from-rose-50 to-red-50",text:"text-rose-600",border:"border-rose-200",badge:"bg-rose-100 text-rose-700 border-rose-200",hover:"hover:border-rose-300 hover:shadow-rose-100",label:"Grain Withdrawal"};case"loan":return{color:"from-violet-500 to-purple-600",light:"bg-gradient-to-br from-violet-50 to-purple-50",text:"text-violet-600",border:"border-violet-200",badge:"bg-violet-100 text-violet-700 border-violet-200",hover:"hover:border-violet-300 hover:shadow-violet-100",label:"Loan Credit"};default:return{color:"from-gray-500 to-slate-600",light:"bg-gray-50",text:"text-gray-600",border:"border-gray-200",badge:"bg-gray-100 text-gray-700 border-gray-200",hover:"hover:border-gray-300",label:"Transaction"}}})(e.transaction_type),r=p===e.transaction_id,l=(e=>{if(!e)return 0;let t=0;return e.supervisor_approval?.status&&t++,e.manager_approval?.status&&t++,e.admin_approval?.status&&t++,t})(e.approval_status),n=e.price_analysis,d=n?.profit_per_quintal>0,o=n?.profit_per_quintal<0;return(0,t.jsxs)("div",{className:`bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300 ${a.hover} ${r?"ring-2 ring-indigo-500/50":""}`,children:[(0,t.jsx)("div",{className:"p-4 md:p-5 cursor-pointer",onClick:()=>g(r?null:e.transaction_id),children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,t.jsx)("div",{className:`p-3 rounded-xl bg-gradient-to-br ${a.color} text-white shadow-lg`,children:(e=>{switch(e){case"deposit":default:return(0,t.jsx)(S,{className:"w-4 h-4"});case"sell":case"withdraw":return(0,t.jsx)(C,{className:"w-4 h-4"});case"loan":return(0,t.jsx)(i.CreditCard,{className:"w-4 h-4"})}})(e.transaction_type)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[(0,t.jsx)("h4",{className:"font-bold text-gray-900",children:a.label}),(0,t.jsx)("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full border ${a.badge}`,children:"+"===e.symbol?"CREDIT":"DEBIT"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 ${a.light} ${a.text} rounded-lg text-xs font-medium`,children:[(0,t.jsx)(U.Wheat,{className:"w-3 h-3"}),e.grain?.grain_type]}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-700 rounded-lg text-xs font-medium",children:[(0,t.jsx)(G.Scale,{className:"w-3 h-3"}),e.grain?.quantity_quintal," ",e.grain?.unit]}),(0,t.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-purple-50 text-purple-700 rounded-lg text-xs font-medium",children:["Grade ",e.grain?.quality]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-wrap text-xs text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(k.Calendar,{className:"w-3 h-3"}),new Date(e.transaction_date).toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(P.Clock,{className:"w-3 h-3"}),new Date(e.transaction_date).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]}),e.warehouse&&(0,t.jsxs)("span",{className:"flex items-center gap-1 bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded",children:[(0,t.jsx)(F.MapPin,{className:"w-3 h-3"}),e.warehouse.name]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"hidden md:flex flex-col items-center gap-1",children:[(0,t.jsx)("div",{className:"flex items-center gap-1",children:[0,1,2].map(e=>(0,t.jsx)("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs transition-all ${e<l?"bg-gradient-to-br from-emerald-500 to-green-600 text-white":"bg-gray-100 text-gray-400"}`,children:e<l?"✓":""},e))}),(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:[l,"/3"]})]}),n&&0!==n.profit_percent&&(0,t.jsx)("div",{className:`hidden sm:flex flex-col items-end px-2 py-1 rounded-lg ${d?"bg-emerald-50":o?"bg-rose-50":""}`,children:(0,t.jsxs)("span",{className:`text-xs font-medium flex items-center gap-1 ${d?"text-emerald-600":o?"text-rose-600":"text-gray-500"}`,children:[d?(0,t.jsx)(x.TrendingUp,{className:"w-3 h-3"}):o?(0,t.jsx)(m.TrendingDown,{className:"w-3 h-3"}):null,n.profit_percent>0?"+":"",n.profit_percent?.toFixed(1),"%"]})}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:`text-xl font-bold ${"+"===e.symbol?"text-emerald-600":"text-gray-900"}`,children:[e.symbol,b(e.grain?.total_amount)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["@",b(e.grain?.price_per_quintal),"/Qtl"]})]})]})]})}),r&&(0,t.jsxs)("div",{className:"border-t border-gray-100 bg-gradient-to-br from-gray-50 to-indigo-50/30 p-4 md:p-5 animate-in slide-in-from-top-2 duration-300",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,t.jsxs)("h5",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,t.jsx)($.User,{className:"w-4 h-4 text-indigo-600"}),"Farmer Details"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e.user?.user_image&&(0,t.jsx)("img",{src:e.user.user_image,alt:e.user.name,className:"w-12 h-12 rounded-xl object-cover border-2 border-white shadow"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900 truncate",children:e.user?.name}),(0,t.jsx)("p",{className:"text-xs text-indigo-600 font-mono",children:e.user?.farmerId}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:[(0,t.jsx)(Q.Phone,{className:"w-3 h-3"}),e.user?.phone_number]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,t.jsxs)("h5",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,t.jsx)(x.TrendingUp,{className:"w-4 h-4 text-indigo-600"}),"Price Analysis"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Deposit Price"}),(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:[b(n?.deposit_price),"/Qtl"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Today's Price"}),(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:[b(n?.today_price),"/Qtl"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Profit/Qtl"}),(0,t.jsxs)("span",{className:`font-bold ${d?"text-emerald-600":o?"text-rose-600":"text-gray-900"}`,children:[n?.profit_per_quintal>0?"+":"",b(n?.profit_per_quintal)]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,t.jsxs)("h5",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,t.jsx)(q.Shield,{className:"w-4 h-4 text-indigo-600"}),"Approval Status"]}),(0,t.jsx)("div",{className:"space-y-2",children:[{label:"Supervisor",data:e.approval_status?.supervisor_approval,icon:I.UserCheck},{label:"Manager",data:e.approval_status?.manager_approval,icon:q.Shield},{label:"Admin",data:e.approval_status?.admin_approval,icon:M.Crown}].map((e,s)=>(e.icon,(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${e.data?.status?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-400"}`,children:e.data?.status?(0,t.jsx)(D.CheckCircle2,{className:"w-3.5 h-3.5"}):(0,t.jsx)(L.Timer,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:e.label})]}),e.data?.status?(0,t.jsx)("span",{className:"text-xs text-emerald-600 font-medium",children:e.data?.user_id?.name||"Approved"}):(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Pending"})]},s)))})]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 flex flex-wrap items-center justify-between gap-4",children:[e.warehouse&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(A.Building2,{className:"w-4 h-4 text-indigo-600"}),(0,t.jsxs)("span",{className:"text-gray-600",children:[e.warehouse.name,","," ",e.warehouse.location]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 font-mono",children:[(0,t.jsx)(T.Hash,{className:"w-3 h-3"}),e.transaction_id]})]})]})]},e.transaction_id)})}):(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(_.Package,{className:"w-10 h-10 text-gray-400"})}),(0,t.jsx)("p",{className:"text-gray-600 font-medium text-lg",children:"No transactions found"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"all"!==l?"Try selecting a different filter":"No transactions for this grain category yet"})]})}),(0,t.jsx)("div",{className:"border-t border-gray-100 px-4 md:px-8 py-4 bg-white",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing"," ",(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:v.length})," ","of"," ",(0,t.jsx)("span",{className:"font-semibold",children:d?.pagination?.totalRecords||0})," ","transactions"]}),d?.pagination?.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(z.ChevronLeft,{className:"w-4 h-4 text-gray-600"})}),(0,t.jsx)("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-medium",children:d?.pagination?.currentPage}),(0,t.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(V.ChevronRight,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,t.jsx)("button",{onClick:()=>a(!1),className:"w-full md:w-auto px-6 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-medium rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg shadow-indigo-500/30 hover:shadow-xl",children:"Close"})]})})]})}):null};function B(e){return"₹"+e.toLocaleString("en-IN")}function O(e){return parseFloat(e).toFixed(2)+" Qtl"}e.s(["default",0,()=>{let[e,a]=(0,s.useState)({}),[w,k]=(0,s.useState)(0),[_,C]=(0,s.useState)(0),[S,P]=(0,s.useState)(0),[T,F]=(0,s.useState)([]),[$,Q]=(0,s.useState)({}),[A,D]=(0,s.useState)({}),[q,I]=(0,s.useState)(!1),[M,U]=(0,s.useState)(!1),[G,R]=(0,s.useState)(null),{getprofile:z}=(0,y.default)(),V=async()=>{try{let e=await fetch(`${N.default}/user/dashboardanalytics`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw Error("Failed to fetch dashboard analytics");let t=await e.json();k(t.totalCost),P(t.totalGrainQuantity),C(t.availableCredit||0),F(t.totalGrain||[])}catch(e){console.error(e),j.toast.error("Failed to load dashboard analytics")}},E=async()=>{try{I(!0);let e=await fetch(`${N.default}/pricehistory/todayprice`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw Error("Failed to fetch today's market price");let t=(await e.json()).todayprice||{};D(t);let s={};Object.entries(t).forEach(([e,t])=>{let{max:a,avg:l,min:i,change:n}=t;s[e]={max:a,avg:l,min:i,change:n,icon:"Wheat"===e?p.default:"Rice"===e?o:r}}),Q(s)}catch(e){console.error(e),j.toast.error("Failed to load today's market price")}finally{I(!1)}};return((0,s.useEffect)(()=>{(async()=>{try{let e=await z();a(e.profile)}catch(e){console.error(e)}})(),V(),E()},[]),q)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(v.default,{})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-6 bg-gray-50/50 min-h-screen p-2",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 text-white p-8 rounded-2xl shadow-xl",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),(0,t.jsxs)("div",{className:"relative z-10 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-4xl font-bold mb-2 flex items-center gap-3",children:["Welcome, ",e?.name?e.name.split(" ")[0]:"User","!",(0,t.jsx)(f.Sparkles,{className:"h-8 w-8 text-yellow-300 animate-pulse"})]}),(0,t.jsx)("p",{className:"text-lg opacity-95 font-medium",children:"Safe Grain, Prosperous Farmer"})]}),(0,t.jsx)(c,{className:"h-20 w-20 text-yellow-300 opacity-80 animate-spin-slow hidden md:block"})]}),(0,t.jsx)("div",{className:"absolute -bottom-20 -right-20 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute -top-20 -left-20 w-40 h-40 bg-white/10 rounded-full blur-3xl"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"group relative bg-white p-6 rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-50 to-transparent opacity-60"}),(0,t.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Total Grain Value"}),(0,t.jsx)("p",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-600 to-emerald-500 bg-clip-text text-transparent",children:B(w)}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,t.jsx)(g.ArrowUpRight,{className:"h-4 w-4 text-emerald-500"}),(0,t.jsx)("span",{className:"text-xs text-emerald-600 font-medium",children:"+12.5% this month"})]})]}),(0,t.jsx)("div",{className:"p-3 bg-emerald-100 rounded-xl group-hover:scale-110 transition-transform",children:(0,t.jsx)(h.Warehouse,{className:"h-8 w-8 text-emerald-600"})})]})]}),(0,t.jsxs)("div",{className:"group relative bg-white p-6 rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-transparent opacity-60"}),(0,t.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Available Credit"}),(0,t.jsx)("p",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-500 bg-clip-text text-transparent",children:B(_)}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,t.jsx)(b.Activity,{className:"h-4 w-4 text-blue-500"}),(0,t.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"Instant approval"})]})]}),(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform",children:(0,t.jsx)(i.CreditCard,{className:"h-8 w-8 text-blue-600"})})]})]}),(0,t.jsxs)("div",{className:"group relative bg-white p-6 rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-transparent opacity-60"}),(0,t.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:["Total Grain (","Qtl",")"]}),(0,t.jsx)("p",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent",children:O(S)}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,t.jsx)(l.BarChart3,{className:"h-4 w-4 text-purple-500"}),(0,t.jsx)("span",{className:"text-xs text-purple-600 font-medium",children:"High quality grain"})]})]}),(0,t.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform",children:(0,t.jsx)(l.BarChart3,{className:"h-8 w-8 text-purple-600"})})]})]}),(0,t.jsxs)("div",{className:"group relative bg-white p-6 rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50 to-transparent opacity-60"}),(0,t.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Avg Profit (est.)"}),(0,t.jsxs)("p",{className:"text-2xl font-bold bg-gradient-to-r from-orange-600 to-orange-500 bg-clip-text text-transparent",children:[T.length?(T.reduce((e,t)=>e+t.avgProfitPerQtl,0)/T.length).toFixed(2):"0","%"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,t.jsx)(x.TrendingUp,{className:"h-4 w-4 text-orange-500"}),(0,t.jsx)("span",{className:"text-xs text-orange-600 font-medium",children:"Above market avg"})]})]}),(0,t.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl group-hover:scale-110 transition-transform",children:(0,t.jsx)(x.TrendingUp,{className:"h-8 w-8 text-orange-600"})})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row justify-center items-stretch gap-5 w-full",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 w-full lg:w-2/3",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-2 bg-emerald-100 rounded-lg",children:(0,t.jsx)(h.Warehouse,{className:"h-5 w-5 text-emerald-600"})}),"Current Grain Inventory"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Track and manage your stored grains"})]}),(0,t.jsxs)("button",{onClick:()=>{j.toast.success("CSV Exported!")},className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-purple-500 text-white px-4 py-2.5 rounded-xl hover:shadow-lg transition-all text-sm font-medium",children:[(0,t.jsx)(n.Download,{className:"h-4 w-4"}),"Export CSV"]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Type"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Quality"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Quantity"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Total Value"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Avg Profit"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-50",children:T.map((e,s)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-1.5 bg-emerald-50 rounded-lg",children:"Wheat"===e.grain_type?(0,t.jsx)(p.default,{className:"h-4 w-4 text-emerald-600"}):"Rice"===e.grain_type?(0,t.jsx)(o,{className:"h-4 w-4 text-emerald-600"}):(0,t.jsx)(r,{className:"h-4 w-4 text-emerald-600"})}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:e.grain_type})]})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:["Grade ",e.quality]})}),(0,t.jsx)("td",{className:"px-4 py-4 font-medium text-gray-900",children:O(e.total_quantity)}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("span",{className:"font-bold text-emerald-600",children:B(e.total_value)})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[e.avgProfitPerQtl>=0?(0,t.jsx)(g.ArrowUpRight,{className:"h-4 w-4 text-emerald-500"}):(0,t.jsx)(u.ArrowDownRight,{className:"h-4 w-4 text-red-500"}),(0,t.jsxs)("span",{className:`font-bold ${e.avgProfitPerQtl>=0?"text-emerald-600":"text-red-600"}`,children:[parseFloat(e.avgProfitPerQtl).toFixed(2),"%"]})]})}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("button",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-3 py-1.5 rounded-lg text-xs font-medium hover:shadow-md transition-all",onClick:()=>{U(!0),R(e.category_id)},children:"View Details"})})]},s))})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 w-full lg:w-1/3",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,t.jsx)(x.TrendingUp,{className:"h-5 w-5 text-purple-600"})}),"Today's Market Rates"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Live market price updates"})]}),(0,t.jsx)("div",{className:"space-y-3 overflow-y-auto max-h-[400px] pr-2 no-scrollbar",children:Object.entries($).map(([e,{max:s,avg:a,min:r,change:l,icon:i}])=>(0,t.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-white border border-gray-100 rounded-xl p-4 hover:shadow-md transition-all",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-50 rounded-lg",children:(0,t.jsx)(i,{className:"h-5 w-5 text-purple-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:e}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Per Quintal"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Max"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:B(s)}),(0,t.jsx)("span",{className:`inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full text-xs font-medium ${l.max>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:l.max>=0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.TrendingUp,{className:"h-3 w-3"}),"+",l.max.toFixed(2),"%"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.TrendingDown,{className:"h-3 w-3"}),l.max.toFixed(2),"%"]})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Avg"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:B(a)}),(0,t.jsx)("span",{className:`inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full text-xs font-medium ${l.avg>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:l.avg>=0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.TrendingUp,{className:"h-3 w-3"}),"+",l.avg.toFixed(2),"%"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.TrendingDown,{className:"h-3 w-3"}),l.avg.toFixed(2),"%"]})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Min"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:B(r)}),(0,t.jsx)("span",{className:`inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full text-xs font-medium ${l.min>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:l.min>=0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.TrendingUp,{className:"h-3 w-3"}),"+",l.min.toFixed(2),"%"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.TrendingDown,{className:"h-3 w-3"}),l.min.toFixed(2),"%"]})})]})]})]})]},e))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("button",{className:"group relative overflow-hidden bg-white border border-gray-100 p-6 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500 to-emerald-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,t.jsxs)("div",{className:"relative z-10 transition-colors duration-300",children:[(0,t.jsx)("div",{className:"inline-flex p-3 bg-emerald-100 rounded-xl mb-4 group-hover:bg-white/20 transition-colors",children:(0,t.jsx)(d.Plus,{className:"h-8 w-8 text-emerald-600 group-hover:text-white"})}),(0,t.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-white",children:"Deposit Grain"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 group-hover:text-white/90",children:"Add new grain into bank"})]})]}),(0,t.jsxs)("button",{onClick:()=>setCurrentPage("credit"),className:"group relative overflow-hidden bg-white border border-gray-100 p-6 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,t.jsxs)("div",{className:"relative z-10 transition-colors duration-300",children:[(0,t.jsx)("div",{className:"inline-flex p-3 bg-blue-100 rounded-xl mb-4 group-hover:bg-white/20 transition-colors",children:(0,t.jsx)(i.CreditCard,{className:"h-8 w-8 text-blue-600 group-hover:text-white"})}),(0,t.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-white",children:"Get Credit"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 group-hover:text-white/90",children:"Instant credit up to 60%"})]})]}),(0,t.jsxs)("button",{onClick:()=>setCurrentPage("sell"),className:"group relative overflow-hidden bg-white border border-gray-100 p-6 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,t.jsxs)("div",{className:"relative z-10 transition-colors duration-300",children:[(0,t.jsx)("div",{className:"inline-flex p-3 bg-purple-100 rounded-xl mb-4 group-hover:bg-white/20 transition-colors",children:(0,t.jsx)(x.TrendingUp,{className:"h-8 w-8 text-purple-600 group-hover:text-white"})}),(0,t.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-white",children:"Sell Grain"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 group-hover:text-white/90",children:"Get better prices"})]})]})]})]}),(0,t.jsx)(W,{isOpen:M,setIsOpen:U,category_id:G})]})}],54178)}]);