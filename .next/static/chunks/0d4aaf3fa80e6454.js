(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33785,e=>{"use strict";let s=(0,e.i(75254).default)("warehouse",[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);e.s(["Warehouse",()=>s],33785)},52571,e=>{"use strict";let s=(0,e.i(75254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["Info",()=>s],52571)},39544,e=>{"use strict";let s=(0,e.i(75254).default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);e.s(["Droplets",()=>s],39544)},88844,e=>{"use strict";let s=(0,e.i(75254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>s],88844)},55436,e=>{"use strict";let s=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>s],55436)},3496,e=>{"use strict";let s=(0,e.i(75254).default)("scale",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]]);e.s(["Scale",()=>s],3496)},42009,e=>{"use strict";let s=(0,e.i(75254).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);e.s(["Award",()=>s],42009)},84577,e=>{"use strict";let s=(0,e.i(75254).default)("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);e.s(["ArrowDownCircle",()=>s],84577)},73978,e=>{"use strict";var s=e.i(43476);e.i(71645);var t=e.i(37727),r=e.i(88844),a=e.i(3496),l=e.i(42009),i=e.i(33785),n=e.i(52571),o=e.i(25652),d=e.i(39544);let c=(0,e.i(75254).default)("arrow-left-right",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),m=({icon:e,label:t,value:r})=>(0,s.jsxs)("div",{className:"group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[e,(0,s.jsx)("label",{className:"text-xs sm:text-sm font-semibold text-gray-700",children:t})]}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-200 rounded-xl px-3 py-2.5 transition-all group-hover:border-emerald-300",children:(0,s.jsx)("p",{className:"text-sm sm:text-base text-gray-900 font-medium break-words truncate",children:r})})]});e.s(["default",0,({isOpen:e,onClose:x,confirmationData:u,onConfirm:h})=>{if(!e||!u)return null;let g=u.quantity||0,p=u.currentPrice||0,b=p*g,f=u.moisture_content||0,y=u.transaction_type||"Invalid";return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm","aria-modal":"true",role:"dialog",children:(0,s.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto animate-in fade-in zoom-in duration-300 no-scrollbar",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 px-4 sm:px-6 py-4 sm:py-5 relative sticky top-0 z-10",children:[(0,s.jsx)("button",{onClick:x,className:"absolute top-3 sm:top-4 right-3 sm:right-4 text-white/80 hover:text-white transition-colors","aria-label":"Close",children:(0,s.jsx)(t.X,{size:24})}),(0,s.jsxs)("div",{className:"flex items-center gap-3 pr-8",children:[(0,s.jsx)("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-lg",children:(0,s.jsx)(r.Package,{size:24,className:"text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:"Confirm Storage"}),(0,s.jsx)("p",{className:"text-emerald-50 text-xs sm:text-sm mt-1",children:"Review your grain storage details"})]})]})]}),(0,s.jsxs)("div",{className:"px-4 sm:px-6 py-4 sm:py-6 space-y-4",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-sky-50 border-2 border-blue-200 rounded-xl p-3 sm:p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 text-lg font-bold",children:u.farmer_image?(0,s.jsx)("img",{src:u.farmer_image,alt:u.farmer_name,className:"w-10 h-10 rounded-full object-cover"}):(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:u.farmer_name?.charAt(0).toUpperCase()||"U"})}),(0,s.jsxs)("div",{className:"flex justify-between w-full",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm sm:text-base font-semibold text-gray-700",children:u.farmer_name||"Unknown Farmer"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:u.farmer_email||"No email"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:u.farmer_phone_number||"No phone number"})]}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-xs text-blue-600 font-bold",children:u.farmer_userId||"No userId"})})]})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-slate-50 to-gray-50 border-2 border-gray-200 rounded-xl p-3 sm:p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c,{size:18,className:"text-gray-600"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Transaction Type"})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-4 py-2 rounded-full text-xs sm:text-sm font-bold text-white bg-gradient-to-r ${(e=>{switch(e?.toLowerCase()){case"deposit":return"from-green-400 to-emerald-500";case"withdrawal":return"from-orange-400 to-red-500";case"transfer":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}})(y)} shadow-md`,children:[(0,s.jsx)(c,{size:14}),y]})})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-2 border-purple-200 rounded-xl p-3 sm:p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.TrendingUp,{size:18,className:"text-purple-600"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Current Market Price"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-lg sm:text-xl font-bold text-purple-700",children:["₹",p.toLocaleString("en-IN")]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"per quintal"})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsx)(m,{icon:(0,s.jsx)(r.Package,{size:16,className:"text-emerald-600"}),label:"Grain Category",value:u.grainCategory||"-"}),(0,s.jsx)(m,{icon:(0,s.jsx)(a.Scale,{size:16,className:"text-emerald-600"}),label:"Quantity",value:`${g} Quintals`}),(0,s.jsx)(m,{icon:(0,s.jsx)(l.Award,{size:16,className:"text-emerald-600"}),label:"Quality Grade",value:u.grainQuality||"-"}),(0,s.jsx)(m,{icon:(0,s.jsx)(i.Warehouse,{size:16,className:"text-emerald-600"}),label:"Warehouse",value:u.warehouse||"-"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 border-2 border-cyan-200 rounded-xl p-3 sm:p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Droplets,{size:18,className:"text-cyan-600"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Moisture Content"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-lg sm:text-xl font-bold text-cyan-700",children:[f,"%"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:f<=12?(0,s.jsx)("span",{className:"text-green-600 font-semibold",children:"✓ Optimal"}):f<=14?(0,s.jsx)("span",{className:"text-yellow-600 font-semibold",children:"⚠ Acceptable"}):(0,s.jsx)("span",{className:"text-red-600 font-semibold",children:"✗ High"})})]})]}),f>14&&(0,s.jsx)("div",{className:"mt-2 pt-2 border-t border-cyan-200",children:(0,s.jsxs)("p",{className:"text-xs text-orange-600 font-medium flex items-center gap-1",children:[(0,s.jsx)(n.Info,{size:12}),"High moisture may affect storage quality"]})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-3",children:[(0,s.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Total Grain Value"}),(0,s.jsxs)("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:["₹",b.toLocaleString("en-IN")]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[g," × ₹",p.toLocaleString("en-IN")]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-r-xl p-3 space-y-1.5",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(n.Info,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"space-y-1 text-xs sm:text-sm",children:[(0,s.jsxs)("p",{className:"text-gray-700",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Min. period:"})," 6 months"]}),(0,s.jsxs)("p",{className:"text-gray-700",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Storage fee:"})," ","₹0.20/quintal/day"]}),(0,s.jsx)("p",{className:"text-gray-700",children:(0,s.jsx)("span",{className:"font-semibold",children:"Quality check is mandatory"})})]})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-slate-100 to-gray-100 rounded-xl p-4 border-2 border-gray-300",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Net Amount"})}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:["₹",b.toLocaleString("en-IN")]})})]})})]}),(0,s.jsxs)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 bg-gray-50 flex gap-3 sticky bottom-0",children:[(0,s.jsx)("button",{onClick:x,className:"flex-1 px-4 py-2.5 sm:py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-100 transition-all hover:border-gray-400 text-sm sm:text-base",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{h&&h(),x()},className:"flex-1 px-4 py-2.5 sm:py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-semibold rounded-xl hover:from-emerald-700 hover:to-teal-700 transition-all shadow-lg hover:shadow-xl text-sm sm:text-base",children:"Confirm Storage"})]})]})})}],73978)},53782,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(7233),a=e.i(63209),l=e.i(55436),i=e.i(84614),n=e.i(37727),o=e.i(43531),d=e.i(39544),c=e.i(84577),m=e.i(5766),x=e.i(31795),u=e.i(73978),h=e.i(41444);e.s(["default",0,()=>{let[e,g]=(0,t.useState)({quantity:"",category_id:"",warehouse_id:"",moisture_content:"",transaction_type:"deposit",farmerId:""}),[p,b]=(0,t.useState)([]),[f,y]=(0,t.useState)([]),[j,N]=(0,t.useState)(!1),[v,w]=(0,t.useState)(null),[_,k]=(0,t.useState)(!1),[S,C]=(0,t.useState)(""),[I,z]=(0,t.useState)("name"),[q,A]=(0,t.useState)([]),[M,$]=(0,t.useState)(null),[F,U]=(0,t.useState)(!1),[D,P]=(0,t.useState)(!1),[T,E]=(0,t.useState)(null),Q=async e=>{let s;if(e.length<2)return void A([]);U(!0);let t=(s=e.trim()).includes("@")?"email":/^[\d\s\-\+]+$/.test(s)&&s.replace(/\D/g,"").length>=7?"phone_number":/^SGB\d{10}$/i.test(s)?"userId":"name";z(t);try{let s=`${t}=${encodeURIComponent(e)}`,r=await fetch(`${x.default}/user/finduserdetails?${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),a=await r.json();a.users&&Array.isArray(a.users)?A(a.users):a.user?A([a.user]):A([]),P(!0)}catch(e){console.error("Search error:",e),m.default.error("Error searching users",e.message),A([]),P(!0)}finally{U(!1)}};(0,t.useEffect)(()=>{let e=setTimeout(()=>{S?Q(S):(A([]),P(!1))},500);return()=>clearTimeout(e)},[S]);let G=async()=>{k(!0);try{let e=await fetch(`${x.default}/grain/allgraincategories`);if(!e.ok)throw Error("Failed to fetch grain types");let s=await e.json();e.ok&&b(s)}catch(e){console.error(e),m.default.error("Failed to load grain categories")}finally{k(!1)}},L=async()=>{k(!0);try{let e=await fetch(`${x.default}/warehouse/allwarehouse`);if(!e.ok)throw Error("Failed to fetch warehouses");let s=await e.json();e.ok&&y(s.data)}catch(e){console.error(e),m.default.error("Failed to load warehouses")}finally{k(!1)}},O=async()=>{try{let s=await fetch(`${x.default}/pricehistory/pricehistorybygrain?id=${e.category_id}`);if(!s.ok)throw Error("Failed to fetch today's market price");let t=await s.json();s.ok&&E(t)}catch(e){console.error(e),m.default.error("Failed to load today's market price")}};(0,t.useEffect)(()=>{G(),L()},[]),(0,t.useEffect)(()=>{e.category_id&&O()},[e.category_id]);let V=async()=>{if(!e.farmerId)return void m.default.error("Please select a farmer");if(!e.category_id||!e.warehouse_id||!e.quantity||!e.moisture_content)return void m.default.error("Please fill all required fields");let s=parseFloat(e.moisture_content);if(isNaN(s)||s<0||s>100)return void m.default.error("Moisture content must be between 0 and 100%");try{let s={farmerId:e.farmerId,warehouse_id:e.warehouse_id,category_id:e.category_id,quantity:e.quantity,current_price:T?.price,moisture_content:e.moisture_content,transaction_type:e.transaction_type},t=await fetch(`${x.default}/deposite/graindeposite`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)}),r=await t.json();t.ok?(m.default.success("Deposit submitted successfully"),g({quantity:"",category_id:"",warehouse_id:"",farmerId:"",moisture_content:"",transaction_type:"deposit"}),$(null),N(!1)):m.default.error(r.message||"Failed to submit deposit")}catch(e){console.error(e),m.default.error("Error while submitting deposit")}};return _?(0,s.jsx)(h.default,{}):(0,s.jsxs)(s.Fragment,{children:[j&&v&&(0,s.jsx)(u.default,{isOpen:j,onClose:()=>N(!1),confirmationData:v,onConfirm:V}),(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center text-gray-800",children:[(0,s.jsx)("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:(0,s.jsx)(r.Plus,{className:"h-6 w-6 text-green-600"})}),"New Grain Deposit"]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-5 rounded-xl border border-blue-200",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:["Select Farmer ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),M?(0,s.jsx)("div",{className:"bg-white rounded-lg border-2 border-green-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:M.user_image?(0,s.jsx)("img",{src:M.user_image,alt:M.name,className:"w-12 h-12 rounded-full object-cover border-2 border-green-200"}):(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:M.name?.charAt(0).toUpperCase()||"U"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold text-gray-900 flex items-center",children:[M.name||"Unknown User",(0,s.jsx)(o.Check,{className:"ml-2 h-5 w-5 text-green-500"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:M.email||"No email"}),M.phone_number&&(0,s.jsx)("p",{className:"text-xs text-gray-400",children:M.phone_number}),M.userId&&(0,s.jsxs)("p",{className:"text-xs text-blue-600 font-medium",children:["ID: ",M.userId]})]})]}),(0,s.jsx)("button",{onClick:()=>{$(null),g({...e,farmerId:""}),C("")},className:"p-2 hover:bg-red-50 rounded-lg transition-colors group",title:"Remove farmer",children:(0,s.jsx)(n.X,{className:"h-5 w-5 text-gray-400 group-hover:text-red-500"})})]})}):(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-all",placeholder:"Search by name, email, phone number, or user ID...",value:S,onChange:e=>C(e.target.value),onFocus:()=>S&&P(!0)}),F&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"})})]}),S&&(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:(()=>{switch(I){case"email":return"Searching by Email";case"phone_number":return"Searching by Phone";case"userId":return"Searching by User ID";default:return"Searching by Name"}})()})}),D&&q.length>0&&(0,s.jsx)("div",{className:"absolute z-10 w-full mt-2 bg-white rounded-lg shadow-xl border border-gray-200 max-h-60 overflow-y-auto",children:q.map((t,r)=>(0,s.jsxs)("div",{onClick:()=>{$(t),g({...e,farmerId:t._id||t.id}),C(""),P(!1),A([]),m.default.success(`Selected farmer: ${t.name}`)},className:"px-4 py-3 hover:bg-gray-50 cursor-pointer flex items-center space-x-3 transition-colors border-b border-gray-100 last:border-b-0",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:t.user_image?(0,s.jsx)("img",{src:t.user_image,alt:t.name,className:"w-10 h-10 rounded-full object-cover border-2 border-blue-200"}):(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold",children:t.name?.charAt(0).toUpperCase()||"U"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:t.name||"Unknown User"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:t.email||"No email"}),t.phone_number&&(0,s.jsx)("p",{className:"text-xs text-gray-400",children:t.phone_number}),t.farmerId&&(0,s.jsxs)("p",{className:"text-xs text-blue-600 font-medium",children:["ID: ",t.farmerId]})]}),(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Select"})})]},t._id||t.id||r))}),D&&S&&0===q.length&&!F&&(0,s.jsx)("div",{className:"absolute z-10 w-full mt-2 bg-white rounded-lg shadow-xl border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(i.User,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No farmers found"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Try searching with different criteria"})]})})]}),(0,s.jsxs)("div",{className:"mt-3 text-xs text-gray-600",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Search Tips:"}),(0,s.jsxs)("ul",{className:"space-y-0.5",children:[(0,s.jsx)("li",{children:"• Enter full or partial name to search by name"}),(0,s.jsx)("li",{children:"• Include @ to search by email address"}),(0,s.jsx)("li",{children:"• Enter numbers to search by phone"}),(0,s.jsx)("li",{children:"• Enter User ID (e.g., SGB2025000002) for exact match"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Grain Category ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",value:e.category_id,onChange:e=>g(s=>({...s,category_id:e.target.value})),disabled:!M,children:[(0,s.jsx)("option",{value:"",children:"Select Grain Type"}),p.length>0?p.map(e=>(0,s.jsxs)("option",{value:e._id,children:[e.grain_type," - ",e.quality]},e._id)):(0,s.jsx)("option",{disabled:!0,children:"Loading..."})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Quantity (Quintal) ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter quantity",value:e.quantity,onChange:e=>g(s=>({...s,quantity:e.target.value})),disabled:!M})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current Price (₹/Quintal)"}),(0,s.jsx)("div",{className:"w-full p-3 border-2 border-gray-200 rounded-lg bg-gray-50 flex items-center",children:(0,s.jsxs)("span",{className:"text-lg font-semibold text-gray-700",children:["₹ ",T?.price||"0.00"]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Warehouse ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-white transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",value:e.warehouse_id,onChange:e=>g(s=>({...s,warehouse_id:e.target.value})),disabled:!M,children:[(0,s.jsx)("option",{value:"",children:"Select Warehouse"}),f.length>0?f.map(e=>(0,s.jsxs)("option",{value:e._id,children:[e.name," — ",e.location,e.capacity&&` (Capacity: ${e.capacity} quintals)`]},e._id)):(0,s.jsx)("option",{disabled:!0,children:"Loading..."})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Moisture Content (%) ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(d.Droplets,{className:"h-5 w-5 text-blue-500"})}),(0,s.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter moisture percentage (e.g., 12.5)",value:e.moisture_content,onChange:e=>{let s=e.target.value;(""===s||parseFloat(s)>=0&&100>=parseFloat(s))&&g(e=>({...e,moisture_content:s}))},disabled:!M}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,s.jsx)("span",{className:"text-gray-500 font-medium",children:"%"})})]}),e.moisture_content&&(0,s.jsxs)("div",{className:`mt-2 flex items-center space-x-2 ${14>=parseFloat(e.moisture_content)?"text-green-600":18>=parseFloat(e.moisture_content)?"text-yellow-600":"text-red-600"}`,children:[(0,s.jsx)("div",{className:`h-2 w-2 rounded-full ${14>=parseFloat(e.moisture_content)?"bg-green-500":18>=parseFloat(e.moisture_content)?"bg-yellow-500":"bg-red-500"}`}),(0,s.jsx)("span",{className:"text-sm font-medium",children:14>=parseFloat(e.moisture_content)?"Optimal moisture level":18>=parseFloat(e.moisture_content)?"Acceptable moisture level":"High moisture - may require drying"})]})]})]}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-5",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg mr-3",children:(0,s.jsx)(a.AlertCircle,{className:"h-5 w-5 text-yellow-600"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Deposit Terms & Conditions"}),(0,s.jsxs)("ul",{className:"text-sm text-yellow-800 space-y-1.5",children:[(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"Minimum storage period: 6 months"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"Storage fee: ₹0.20 per quintal per day"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"Quality check is mandatory before deposit"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"Insurance coverage available upon request"})]})]})]})]})}),(0,s.jsxs)("button",{onClick:()=>{if(!e.farmerId)return void m.default.error("Please select a farmer");if(!e.category_id||!e.warehouse_id||!e.quantity||!e.moisture_content)return void m.default.error("Please fill all required fields");let s=p.find(s=>s._id===e.category_id),t=f.find(s=>s._id===e.warehouse_id);w({farmer_name:M.name,farmer_email:M.email,farmer_phone_number:M.phone_number,farmer_image:M.user_image,grainCategory:s?.grain_type||"N/A",grain_id:s?._id||"N/A",grainQuality:s?.quality||"N/A",quantity:e.quantity,warehouse:t?`${t.name} — ${t.location}`:"N/A",currentPrice:T?.price,farmer_userId:M.farmerId,moisture_content:e.moisture_content,transaction_type:e.transaction_type}),N(!0)},type:"button",disabled:!M||!e.category_id||!e.warehouse_id||!e.quantity||!e.moisture_content,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white py-3.5 rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:shadow-lg flex items-center justify-center space-x-2",children:[(0,s.jsx)(c.ArrowDownCircle,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Review & Submit Deposit"})]})]})]})})]})}])}]);