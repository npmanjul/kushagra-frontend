(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50439,23731,e=>{"use strict";let t=(0,e.i(75254).default)("wheat",[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]]);e.s(["default",()=>t],23731),e.s(["Wheat",()=>t],50439)},73375,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},63059,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],43432)},88081,e=>{"use strict";let t=(0,e.i(75254).default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);e.s(["Hash",()=>t],88081)},82293,e=>{"use strict";let t=(0,e.i(75254).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["UserCheck",()=>t],82293)},7486,e=>{"use strict";let t=(0,e.i(75254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>t],7486)},88844,e=>{"use strict";let t=(0,e.i(75254).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],88844)},3496,e=>{"use strict";let t=(0,e.i(75254).default)("scale",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]]);e.s(["Scale",()=>t],3496)},39544,e=>{"use strict";let t=(0,e.i(75254).default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);e.s(["Droplets",()=>t],39544)},10813,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);e.s(["ArrowDownRight",()=>t],10813)},15057,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["ArrowUpRight",()=>t],15057)},87378,e=>{"use strict";let t=(0,e.i(75254).default)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);e.s(["Banknote",()=>t],87378)},43553,17835,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);e.s(["Crown",()=>a],43553);let s=(0,t.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);e.s(["Timer",()=>s],17835)},52008,e=>{"use strict";let t=(0,e.i(75254).default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);e.s(["Layers",()=>t],52008)},9734,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(15057),r=e.i(10813),l=e.i(52754),i=e.i(25652),n=e.i(55436),o=e.i(61659),d=e.i(83086),c=e.i(3116),x=e.i(46897),m=e.i(88081),h=e.i(52008),g=e.i(16715),u=e.i(37727),p=e.i(95468);let b=(0,e.i(75254).default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var y=e.i(63209),f=e.i(84614),w=e.i(50439),j=e.i(39544),v=e.i(3496),N=e.i(73375),k=e.i(63059),_=e.i(78583),C=e.i(98919),M=e.i(82293),L=e.i(43553),S=e.i(43432),A=e.i(63488),P=e.i(7486),$=e.i(87316),q=e.i(73884),R=e.i(17835),z=e.i(86536),D=e.i(87378),T=e.i(88844),U=e.i(31795),G=e.i(41444),I=e.i(5766);let W=({transaction:e,isOpen:a,onClose:l})=>{var n,d;let h,g;if(!a||!e)return null;let b=e.grain?.[0],N=e.approval_status,k=()=>[{name:"Supervisor",role:"supervisor",icon:M.UserCheck,status:N?.supervisor_approval?.status||!1,user:N?.supervisor_approval?.user_id?.name,date:N?.supervisor_approval?.date,color:"blue"},{name:"Manager",role:"manager",icon:C.Shield,status:N?.manager_approval?.status||!1,user:N?.manager_approval?.user_id?.name,date:N?.manager_approval?.date,color:"purple"},{name:"Admin",role:"admin",icon:L.Crown,status:N?.admin_approval?.status||!1,user:N?.admin_approval?.user_id?.name,date:N?.admin_approval?.date,color:"amber"}],z=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Pending",T=(n=e.transaction_type,(h={deposit:{bg:"from-emerald-500 to-green-600",light:"bg-emerald-50",text:"text-emerald-600",icon:r.ArrowDownRight},sell:{bg:"from-blue-500 to-indigo-600",light:"bg-blue-50",text:"text-blue-600",icon:i.TrendingUp},loan:{bg:"from-violet-500 to-purple-600",light:"bg-violet-50",text:"text-violet-600",icon:o.CreditCard},withdraw:{bg:"from-rose-500 to-red-600",light:"bg-rose-50",text:"text-rose-600",icon:s.ArrowUpRight}})[n]||h.deposit),U=T.icon,G=(d=e.transaction_status,(g={completed:{icon:p.CheckCircle2,bg:"bg-emerald-500",text:"text-emerald-600",lightBg:"bg-emerald-50"},pending:{icon:R.Timer,bg:"bg-amber-500",text:"text-amber-600",lightBg:"bg-amber-50"},rejected:{icon:q.XCircle,bg:"bg-rose-500",text:"text-rose-600",lightBg:"bg-rose-50"}})[d]||g.pending),I=G.icon;return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:l}),(0,t.jsxs)("div",{className:"relative w-full max-w-3xl max-h-[90vh] overflow-hidden bg-white rounded-3xl shadow-2xl animate-in zoom-in-95 duration-300",children:[(0,t.jsxs)("div",{className:`relative bg-gradient-to-r ${T.bg} p-6 text-white overflow-hidden`,children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24"}),(0,t.jsxs)("div",{className:"relative flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-4 bg-white/20 rounded-2xl backdrop-blur-sm",children:(0,t.jsx)(U,{className:"w-8 h-8"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold capitalize",children:"deposit"===e.transaction_type?"Grain Deposit":"sell"===e.transaction_type?"Grain Sale":"loan"===e.transaction_type?"Loan Credit":"Grain Withdrawal"}),(0,t.jsxs)("p",{className:"text-white/80 mt-1 flex items-center gap-2",children:[(0,t.jsx)(m.Hash,{className:"w-4 h-4"}),e._id]})]})]}),(0,t.jsx)("button",{onClick:l,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:(0,t.jsx)(u.X,{className:"w-6 h-6"})})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-3",children:[(0,t.jsxs)("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold ${G.lightBg} ${G.text}`,children:[(0,t.jsx)(I,{className:"w-4 h-4"}),e.transaction_status?.toUpperCase()]}),(0,t.jsxs)("span",{className:"text-white/80 text-sm flex items-center gap-1",children:[(0,t.jsx)($.Calendar,{className:"w-4 h-4"}),z(e.transaction_date)]})]})]}),(0,t.jsxs)("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-5 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"Total Amount"}),(0,t.jsx)(D.Banknote,{className:"w-5 h-5 text-emerald-400"})]}),(0,t.jsxs)("p",{className:"text-4xl font-bold",children:["₹",e.total_amount?.toLocaleString("en-IN")]}),b&&(0,t.jsxs)("p",{className:"text-gray-400 text-sm mt-2",children:[b.quantity_quintal," ",b.category_id?.unit||"quintal"," × ₹",b.price_per_quintal?.toLocaleString("en-IN")]})]}),b&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-5",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-4 flex items-center gap-2",children:[(0,t.jsx)(w.Wheat,{className:"w-4 h-4"}),"Grain Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Grain Type"}),(0,t.jsx)("p",{className:"text-lg font-bold text-gray-900",children:b.category_id?.grain_type||"N/A"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Quality Grade"}),(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["Grade ",b.category_id?.quality||"N/A"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Quantity"}),(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-900 flex items-center gap-1",children:[(0,t.jsx)(v.Scale,{className:"w-4 h-4 text-amber-500"}),b.quantity_quintal," ",b.category_id?.unit||"quintal"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Moisture Content"}),(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-900 flex items-center gap-1",children:[(0,t.jsx)(j.Droplets,{className:"w-4 h-4 text-cyan-500"}),b.moisture_content||0,"%"]})]})]})]}),e.warehouse_id&&(0,t.jsxs)("div",{className:"bg-indigo-50 rounded-2xl p-5",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-indigo-600 uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,t.jsx)(P.Building2,{className:"w-4 h-4"}),"Warehouse Details"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-3 bg-indigo-100 rounded-xl",children:(0,t.jsx)(x.MapPin,{className:"w-6 h-6 text-indigo-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-gray-900",children:e.warehouse_id.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:e.warehouse_id.location})]})]})]}),e.remarks&&(0,t.jsxs)("div",{className:"bg-amber-50 rounded-2xl p-5",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-amber-600 uppercase tracking-wide mb-2 flex items-center gap-2",children:[(0,t.jsx)(_.FileText,{className:"w-4 h-4"}),"Remarks"]}),(0,t.jsx)("p",{className:"text-gray-700",children:e.remarks})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-5 h-full",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-6 flex items-center gap-2",children:[(0,t.jsx)(C.Shield,{className:"w-4 h-4"}),"Approval Workflow"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),(0,t.jsx)("div",{className:"space-y-6",children:k().map((e,a)=>{let s=e.icon;return(0,t.jsxs)("div",{className:"relative flex items-start gap-4",children:[(0,t.jsx)("div",{className:`relative z-10 w-12 h-12 rounded-xl flex items-center justify-center shadow-lg transition-all ${e.status?"bg-gradient-to-br from-emerald-500 to-green-600 text-white":"bg-white border-2 border-dashed border-gray-300 text-gray-400"}`,children:e.status?(0,t.jsx)(p.CheckCircle2,{className:"w-6 h-6"}):(0,t.jsx)(s,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex-1 pt-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("h4",{className:`font-semibold ${e.status?"text-gray-900":"text-gray-400"}`,children:[e.name," Approval"]}),e.status&&(0,t.jsx)("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded-full font-medium",children:"Approved"})]}),e.status?(0,t.jsxs)("div",{className:"bg-white rounded-xl p-3 border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:(0,t.jsx)(f.User,{className:"w-3 h-3 text-white"})}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:e.user})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1 ml-8",children:[(0,t.jsx)(c.Clock,{className:"w-3 h-3"}),z(e.date)]})]}):(0,t.jsx)("div",{className:"bg-white rounded-xl p-3 border-2 border-dashed border-gray-200",children:(0,t.jsxs)("p",{className:"text-gray-400 text-sm flex items-center gap-2",children:[(0,t.jsx)(y.AlertCircle,{className:"w-4 h-4"}),"Awaiting approval"]})})]})]},a)})})]}),(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Approval Progress"}),(0,t.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:[k().filter(e=>e.status).length," / 3"]})]}),(0,t.jsx)("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-green-600 rounded-full transition-all duration-500",style:{width:`${k().filter(e=>e.status).length/3*100}%`}})})]})]})})]}),e.user_id&&(0,t.jsxs)("div",{className:"mt-6 bg-gradient-to-r from-gray-50 to-indigo-50/50 rounded-2xl p-5",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-4 flex items-center gap-2",children:[(0,t.jsx)(f.User,{className:"w-4 h-4"}),"Farmer Information"]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[e.user_id.farmerProfile?.user_image&&(0,t.jsx)("img",{src:e.user_id.farmerProfile.user_image,alt:e.user_id.name,className:"w-16 h-16 rounded-2xl object-cover border-2 border-white shadow-lg"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h4",{className:"font-bold text-gray-900 text-lg",children:e.user_id.name}),(0,t.jsx)("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full font-medium capitalize",children:e.user_id.role})]}),e.user_id.farmerProfile?.farmerId&&(0,t.jsxs)("p",{className:"text-sm text-indigo-600 font-mono mb-2",children:["ID: ",e.user_id.farmerProfile.farmerId]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(S.Phone,{className:"w-4 h-4"}),e.user_id.phone_number]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(A.Mail,{className:"w-4 h-4"}),e.user_id.email]})]})]})]})]})]}),(0,t.jsx)("div",{className:"p-6 bg-gray-50 border-t border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Last updated: ",z(N?.updatedAt)]}),(0,t.jsx)("button",{onClick:l,className:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-medium rounded-xl shadow-lg shadow-indigo-500/30 hover:shadow-xl hover:shadow-indigo-500/40 transition-all duration-300",children:"Close"})]})})]})]})};e.s(["default",0,()=>{let[e,m]=(0,a.useState)("all"),[u,y]=(0,a.useState)(""),[f,j]=(0,a.useState)([]),[_,C]=(0,a.useState)(null),[M,L]=(0,a.useState)({currentPage:1,limit:10,totalRecords:0,totalPages:1}),[S,A]=(0,a.useState)({sell:0,deposit:0,withdraw:0,loan:0}),[P,$]=(0,a.useState)(!0),[D,B]=(0,a.useState)(!1),[V,Z]=(0,a.useState)(null),[F,H]=(0,a.useState)(!1);(0,a.useEffect)(()=>{E()},[M.currentPage]);let E=async(e=!1)=>{e?B(!0):$(!0);try{let e=await fetch(`${U.default}/transaction/getallusertransactions?page=${M.currentPage}&limit=${M.limit}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw Error("Failed to fetch transactions");let t=await e.json();t.success&&(j(t.data),A(t.transactionCounts),L(t.pagination),C(t.user))}catch(e){console.error("Error fetching transactions:",e),I.default.error("Failed to load transactions")}finally{$(!1),B(!1)}},O=e=>{if(e.grain&&e.grain.length>0){let t=e.grain[0];return{quantity:t.quantity_quintal,price:t.price_per_quintal,type:t.category_id?.grain_type||"N/A",quality:t.category_id?.quality||"N/A",unit:t.category_id?.unit||"quintal",moisture:t.moisture_content}}return null},X=f.filter(t=>{let a="all"===e||t.transaction_type===e,s=O(t),r=t.remarks?.toLowerCase().includes(u.toLowerCase())||t.transaction_type?.toLowerCase().includes(u.toLowerCase())||t.warehouse_id?.name?.toLowerCase().includes(u.toLowerCase())||t.warehouse_id?.location?.toLowerCase().includes(u.toLowerCase())||s?.type?.toLowerCase().includes(u.toLowerCase())||t._id?.toLowerCase().includes(u.toLowerCase());return a&&r}),K={total:f.reduce((e,t)=>e+(t.total_amount||0),0),deposits:S.deposit||0,sells:S.sell||0,loans:S.loan||0,withdraws:S.withdraw||0},Q=[{key:"all",label:"All",icon:h.Layers,gradient:"from-indigo-500 to-purple-600",shadow:"shadow-indigo-500/40"},{key:"deposit",label:"Deposits",icon:r.ArrowDownRight,gradient:"from-emerald-500 to-green-600",shadow:"shadow-emerald-500/40"},{key:"sell",label:"Sales",icon:i.TrendingUp,gradient:"from-blue-500 to-indigo-600",shadow:"shadow-blue-500/40"},{key:"loan",label:"Loans",icon:o.CreditCard,gradient:"from-violet-500 to-purple-600",shadow:"shadow-violet-500/40"},{key:"withdraw",label:"Withdrawals",icon:s.ArrowUpRight,gradient:"from-rose-500 to-red-600",shadow:"shadow-rose-500/40"}];return P?(0,t.jsx)(G.default,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50/30",children:[(0,t.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-br from-indigo-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),(0,t.jsx)("div",{className:"absolute top-1/2 -left-40 w-96 h-96 bg-gradient-to-br from-emerald-400/20 to-cyan-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),(0,t.jsx)("div",{className:"absolute -bottom-40 right-1/3 w-96 h-96 bg-gradient-to-br from-rose-400/20 to-orange-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),(0,t.jsxs)("div",{className:"relative max-w-7xl mx-auto p-4 lg:p-8",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,t.jsx)("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl shadow-lg shadow-indigo-500/30",children:(0,t.jsx)(l.Wallet,{className:"w-7 h-7 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 via-indigo-900 to-purple-900 bg-clip-text text-transparent",children:"Transactions"}),_&&(0,t.jsxs)("p",{className:"text-gray-500 text-sm mt-1",children:["Welcome, ",(0,t.jsx)("span",{className:"font-semibold text-indigo-600",children:_.name})," • ",_.role]})]})]})}),(0,t.jsxs)("button",{onClick:()=>E(!0),disabled:D,className:"flex items-center gap-2 px-5 py-3 bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-indigo-300 transition-all duration-300 group",children:[(0,t.jsx)(g.RefreshCw,{className:`w-5 h-5 text-gray-500 group-hover:text-indigo-600 transition-colors ${D?"animate-spin":""}`}),(0,t.jsx)("span",{className:"font-medium text-gray-700 group-hover:text-indigo-600 transition-colors",children:"Refresh"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"col-span-2 sm:col-span-1 group relative overflow-hidden bg-gradient-to-br from-indigo-600 via-purple-600 to-indigo-700 rounded-2xl p-5 shadow-xl shadow-indigo-500/20 hover:shadow-2xl hover:-translate-y-1 transition-all duration-500",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-indigo-100 font-medium text-sm",children:"Total Volume"}),(0,t.jsx)(d.Sparkles,{className:"w-5 h-5 text-white/80"})]}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-white",children:["₹",K.total.toLocaleString("en-IN")]}),(0,t.jsxs)("p",{className:"text-indigo-200 text-xs mt-1",children:[M.totalRecords," transactions"]})]})]}),[{label:"Deposits",value:K.deposits,icon:r.ArrowDownRight,color:"emerald",desc:"Grain added"},{label:"Sales",value:K.sells,icon:i.TrendingUp,color:"blue",desc:"Grain sold"},{label:"Loans",value:K.loans,icon:o.CreditCard,color:"violet",desc:"Credit taken"},{label:"Withdrawals",value:K.withdraws,icon:s.ArrowUpRight,color:"rose",desc:"Grain removed"}].map((e,a)=>(0,t.jsxs)("div",{className:`group relative overflow-hidden bg-white rounded-2xl p-5 shadow-lg border border-${e.color}-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-500`,children:[(0,t.jsx)("div",{className:`absolute -right-4 -top-4 w-16 h-16 bg-gradient-to-br from-${e.color}-500/20 to-${e.color}-600/20 rounded-full group-hover:scale-150 transition-transform duration-500`}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-gray-500 font-medium text-xs",children:e.label}),(0,t.jsx)("div",{className:`p-2 bg-gradient-to-br from-${e.color}-500 to-${e.color}-600 rounded-xl shadow-lg`,children:(0,t.jsx)(e.icon,{className:"w-4 h-4 text-white"})})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),(0,t.jsx)("p",{className:`text-${e.color}-600 text-xs font-medium`,children:e.desc})]})]},a))]}),(0,t.jsx)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-5 shadow-xl border border-gray-100 mb-6",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(n.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search transactions...",value:u,onChange:e=>y(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:Q.map(a=>{let s=e===a.key,r=a.icon;return(0,t.jsxs)("button",{onClick:()=>m(a.key),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all duration-300 ${s?`bg-gradient-to-r ${a.gradient} text-white shadow-lg ${a.shadow}`:"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[(0,t.jsx)(r,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline text-sm",children:a.label})]},a.key)})})]})}),(0,t.jsx)("div",{className:"space-y-4",children:X.map(e=>{var a;let n,d=O(e),m=(a=e.transaction_type,(n={deposit:{bg:"bg-gradient-to-br from-emerald-500 to-green-600",light:"bg-emerald-50",text:"text-emerald-600",glow:"shadow-emerald-500/25"},sell:{bg:"bg-gradient-to-br from-blue-500 to-indigo-600",light:"bg-blue-50",text:"text-blue-600",glow:"shadow-blue-500/25"},loan:{bg:"bg-gradient-to-br from-violet-500 to-purple-600",light:"bg-violet-50",text:"text-violet-600",glow:"shadow-violet-500/25"},withdraw:{bg:"bg-gradient-to-br from-rose-500 to-red-600",light:"bg-rose-50",text:"text-rose-600",glow:"shadow-rose-500/25"}})[a]||n.deposit),h=(e=>{switch(e){case"completed":return{bg:"bg-gradient-to-r from-emerald-500 to-green-500",icon:p.CheckCircle2};case"pending":return{bg:"bg-gradient-to-r from-amber-400 to-orange-500",icon:R.Timer};case"rejected":return{bg:"bg-gradient-to-r from-rose-500 to-red-500",icon:q.XCircle};default:return{bg:"bg-gradient-to-r from-gray-400 to-slate-500",icon:b}}})(e.transaction_status),g=h.icon,u=(e=>{if(!e)return 0;let t=0;return e.supervisor_approval?.status&&t++,e.manager_approval?.status&&t++,e.admin_approval?.status&&t++,t})(e.approval_status);return(0,t.jsx)("div",{onClick:()=>{Z(e),H(!0)},className:"group bg-white/90 backdrop-blur-xl rounded-2xl p-5 shadow-lg border border-gray-100 hover:shadow-2xl hover:-translate-y-1 transition-all duration-500 cursor-pointer",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,t.jsx)("div",{className:`p-3 ${m.bg} rounded-xl shadow-lg ${m.glow} group-hover:scale-110 transition-transform duration-300`,children:(0,t.jsx)("div",{className:"text-white",children:(e=>{switch(e){case"deposit":return(0,t.jsx)(r.ArrowDownRight,{className:"w-5 h-5"});case"sell":return(0,t.jsx)(i.TrendingUp,{className:"w-5 h-5"});case"loan":return(0,t.jsx)(o.CreditCard,{className:"w-5 h-5"});case"withdraw":return(0,t.jsx)(s.ArrowUpRight,{className:"w-5 h-5"});default:return(0,t.jsx)(l.Wallet,{className:"w-5 h-5"})}})(e.transaction_type)})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 capitalize",children:"deposit"===e.transaction_type?"Grain Deposit":"sell"===e.transaction_type?"Grain Sale":"loan"===e.transaction_type?"Loan Credit":"Grain Withdrawal"}),(0,t.jsxs)("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold text-white flex items-center gap-1 ${h.bg}`,children:[(0,t.jsx)(g,{className:"w-3 h-3"}),e.transaction_status]})]}),d&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 ${m.light} ${m.text} rounded-lg text-xs font-medium`,children:[(0,t.jsx)(w.Wheat,{className:"w-3 h-3"}),d.type]}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-amber-50 text-amber-700 rounded-lg text-xs font-medium",children:[(0,t.jsx)(v.Scale,{className:"w-3 h-3"}),d.quantity," ",d.unit]}),(0,t.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 bg-purple-50 text-purple-700 rounded-lg text-xs font-medium",children:["Grade ",d.quality]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-wrap text-xs text-gray-500",children:[e.warehouse_id&&(0,t.jsxs)("span",{className:"flex items-center gap-1 bg-indigo-50 text-indigo-600 px-2 py-1 rounded-lg",children:[(0,t.jsx)(x.MapPin,{className:"w-3 h-3"}),e.warehouse_id.name]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.Clock,{className:"w-3 h-3"}),new Date(e.transaction_date).toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"hidden md:flex flex-col items-center gap-1",children:[(0,t.jsx)("div",{className:"flex items-center gap-1",children:[0,1,2].map(e=>(0,t.jsx)("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold transition-all ${e<u?"bg-gradient-to-br from-emerald-500 to-green-600 text-white shadow-lg shadow-emerald-500/30":"bg-gray-100 text-gray-400"}`,children:e<u?"✓":e+1},e))}),(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:[u,"/3 approved"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["₹",e.total_amount?.toLocaleString("en-IN")||0]}),d&&(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["₹",d.price?.toLocaleString("en-IN"),"/",d.unit]})]}),(0,t.jsx)("div",{className:"p-2 bg-gray-100 rounded-xl group-hover:bg-indigo-100 transition-colors",children:(0,t.jsx)(z.Eye,{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-600 transition-colors"})})]})]})},e._id)})}),0===X.length&&(0,t.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-12 shadow-xl border border-gray-100 text-center",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl mb-6",children:(0,t.jsx)(T.Package,{className:"w-10 h-10 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No transactions found"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:"Try adjusting your search or filter criteria"}),(u||"all"!==e)&&(0,t.jsxs)("button",{onClick:()=>{y(""),m("all")},className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-medium rounded-xl shadow-lg hover:shadow-xl transition-all",children:[(0,t.jsx)(g.RefreshCw,{className:"w-4 h-4"}),"Clear Filters"]})]}),M.totalPages>1&&(0,t.jsxs)("div",{className:"mt-8 flex items-center justify-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>L(e=>({...e,currentPage:Math.max(1,e.currentPage-1)})),disabled:1===M.currentPage,className:"p-3 bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:(0,t.jsx)(N.ChevronLeft,{className:"w-5 h-5"})}),Array.from({length:M.totalPages},(e,t)=>t+1).map(e=>(0,t.jsx)("button",{onClick:()=>L(t=>({...t,currentPage:e})),className:`w-10 h-10 rounded-xl font-medium transition-all ${M.currentPage===e?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200 hover:border-indigo-300"}`,children:e},e)),(0,t.jsx)("button",{onClick:()=>L(e=>({...e,currentPage:Math.min(e.totalPages,e.currentPage+1)})),disabled:M.currentPage===M.totalPages,className:"p-3 bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:(0,t.jsx)(k.ChevronRight,{className:"w-5 h-5"})})]}),X.length>0&&(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-gray-500 text-sm",children:["Showing ",(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:X.length})," of"," ",(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:M.totalRecords})," transactions"]})})]})]}),(0,t.jsx)(W,{transaction:V,isOpen:F,onClose:()=>{H(!1),setTimeout(()=>Z(null),300)}})]})}],9734)}]);