(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31353,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(55436),s=e.i(69638),l=e.i(73884),o=e.i(86536),n=e.i(3116),i=e.i(25652),d=e.i(88844),m=e.i(63209),c=e.i(87316),x=e.i(84614),g=e.i(42920),p=e.i(39544),u=e.i(37727),b=e.i(10813),h=e.i(52754),w=e.i(16715),v=e.i(75254);let f=(0,v.default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var j=e.i(46897),y=e.i(43432),N=e.i(73375),C=e.i(63059),_=e.i(19897),$=e.i(31026),A=e.i(63488),k=e.i(31278),S=e.i(32811);let R=(0,v.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var P=e.i(98919),L=e.i(61911),M=e.i(43553),T=e.i(87378),q=e.i(1928);let D=(0,v.default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var G=e.i(21849),I=e.i(88081),F=e.i(17835);let U=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumSignificantDigits:10}).format(e);var X=e.i(31795),B=e.i(61659),E=e.i(78583),Y=e.i(72520);let V=({icon:e,label:a,value:s,highlight:l=!1})=>(0,t.jsxs)("div",{className:`flex items-center gap-3 p-3 rounded-lg ${l?"bg-white shadow-sm border border-gray-100":""}`,children:[(0,t.jsx)("div",{className:"text-gray-400",children:r.default.cloneElement(e,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:a}),(0,t.jsx)("p",{className:`font-semibold ${l?"text-lg text-emerald-600":"text-gray-900"}`,children:s})]})]}),W=({transaction:e,config:r,transactionType:a,onClose:o,onApprove:i,onReject:b,getApprovalStatus:h,getIndividualApprovalStatus:w,userRole:v="supervisor",canApprove:f=!1,isProcessing:N=!1})=>{if(!e)return null;let C=h(e.approval,e.transaction_status),_=r.icon,$=(e.grain||e.grains||[])[0]||{},R="pending"===e.transaction_status,P="withdraw"===a,T=w(e.approval?.admin_approval),q=w(e.approval?.manager_approval),D=w(e.approval?.supervisor_approval),G={personal_use:{label:"Personal Use",icon:"ðŸ ",color:"bg-blue-50 text-blue-700 border-blue-200"},sale:{label:"For Sale",icon:"ðŸ’°",color:"bg-emerald-50 text-emerald-700 border-emerald-200"},other:{label:"Other",icon:"ðŸ“‹",color:"bg-gray-50 text-gray-700 border-gray-200"}},I=P&&e.remarks?G[e.remarks]||G.other:null,F={admin:M.Crown,manager:S.UserCog,supervisor:L.Users},X=({label:e,approval:r,roleKey:a})=>{let o=F[a],i=v===a,d=(()=>{switch(r.status){case"approved":return{bg:"bg-emerald-100",border:"border-emerald-300",text:"text-emerald-700",icon:(0,t.jsx)(s.CheckCircle,{className:"w-5 h-5 text-emerald-600"})};case"rejected":return{bg:"bg-red-100",border:"border-red-300",text:"text-red-700",icon:(0,t.jsx)(l.XCircle,{className:"w-5 h-5 text-red-600"})};default:return{bg:i&&f?"bg-amber-100":"bg-gray-100",border:i&&f?"border-amber-300":"border-gray-300",text:i&&f?"text-amber-700":"text-gray-500",icon:(0,t.jsx)(n.Clock,{className:`w-5 h-5 ${i&&f?"text-amber-600 animate-pulse":"text-gray-400"}`})}}})();return(0,t.jsxs)("div",{className:`
        flex items-center gap-3 p-4 rounded-xl border-2 ${d.border} ${d.bg}
        ${i&&f?"ring-2 ring-amber-400 ring-offset-2":""}
      `,children:[(0,t.jsx)("div",{className:`p-2 rounded-lg ${d.bg}`,children:d.icon}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o,{className:`w-4 h-4 ${d.text}`}),(0,t.jsx)("span",{className:`font-semibold ${d.text}`,children:e}),i&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-white/50 rounded-full text-xs font-medium",children:"You"})]}),r.hasAction&&r.user&&(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["approved"===r.status?"Approved":"Rejected"," by ",r.user.name]}),"pending"===r.status&&i&&f&&(0,t.jsx)("p",{className:"text-sm text-amber-600 mt-1 font-medium",children:"âš¡ Action required"})]})]})};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"relative w-full max-w-3xl max-h-[90vh] overflow-y-auto bg-white rounded-2xl shadow-2xl",children:[(0,t.jsxs)("div",{className:`sticky top-0 z-10 bg-gradient-to-r ${r.gradient} p-6 rounded-t-2xl`,children:[(0,t.jsx)("button",{onClick:o,className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 rounded-full transition-colors",children:(0,t.jsx)(u.X,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-white/20 rounded-xl",children:(0,t.jsx)(_,{className:"w-8 h-8 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-white",children:[r.label," Request Details"]}),(0,t.jsxs)("p",{className:"text-white/80 text-sm mt-1",children:["Transaction ID: #",e._id?.slice(-8).toUpperCase()]})]})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsxs)("span",{className:`
              inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold
              bg-white/20 text-white backdrop-blur-sm
            `,children:[C.icon,C.text]})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-100",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(x.User,{className:"w-5 h-5 text-gray-600"}),"User Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(V,{icon:(0,t.jsx)(x.User,{}),label:"Name",value:e.user?.name||"N/A"}),(0,t.jsx)(V,{icon:(0,t.jsx)(y.Phone,{}),label:"Phone",value:e.user?.phone_number||"N/A"}),(0,t.jsx)(V,{icon:(0,t.jsx)(A.Mail,{}),label:"Email",value:e.user?.email||"N/A"}),(0,t.jsx)(V,{icon:(0,t.jsx)(c.Calendar,{}),label:"Date",value:e.transaction_date?new Date(e.transaction_date).toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}):"N/A"})]})]}),!P&&e.warehouse&&(0,t.jsxs)("div",{className:"bg-blue-50 rounded-xl p-5 border border-blue-100",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(g.Building,{className:"w-5 h-5 text-blue-600"}),"Warehouse Details"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(V,{icon:(0,t.jsx)(g.Building,{}),label:"Name",value:e.warehouse.name||"N/A"}),(0,t.jsx)(V,{icon:(0,t.jsx)(j.MapPin,{}),label:"Location",value:e.warehouse.location||"N/A"})]})]}),(0,t.jsxs)("div",{className:"bg-emerald-50 rounded-xl p-5 border border-emerald-100",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(d.Package,{className:"w-5 h-5 text-emerald-600"}),"Grain Details"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(V,{icon:(0,t.jsx)(d.Package,{}),label:"Type",value:$.category?.grain_type||"N/A"}),(0,t.jsx)(V,{icon:(0,t.jsx)(E.FileText,{}),label:"Quality Grade",value:$.category?.quality||"N/A"}),(0,t.jsx)(V,{icon:(0,t.jsx)(d.Package,{}),label:"Quantity",value:`${$.quantity_quintal||0} Quintals`}),(0,t.jsx)(V,{icon:(0,t.jsx)(p.Droplets,{}),label:"Moisture Content",value:`${$.moisture_content||0}%`}),(0,t.jsx)(V,{icon:(0,t.jsx)(B.CreditCard,{}),label:"Price per Quintal",value:U($.price_per_quintal||0)}),(0,t.jsx)(V,{icon:(0,t.jsx)(B.CreditCard,{}),label:"Total Amount",value:U(e.total_amount||0),highlight:!0})]})]}),P&&I&&(0,t.jsxs)("div",{className:`rounded-xl p-5 border ${I.color}`,children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(E.FileText,{className:"w-5 h-5"}),"Withdrawal Reason"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:I.icon}),(0,t.jsx)("span",{className:"text-lg font-semibold",children:I.label})]})]}),e.remarks&&!P&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-100",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(E.FileText,{className:"w-5 h-5 text-gray-600"}),"Remarks"]}),(0,t.jsx)("p",{className:"text-gray-700",children:e.remarks})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 rounded-xl p-5 border border-gray-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(m.AlertCircle,{className:"w-5 h-5 text-gray-600"}),"Approval Workflow"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(X,{label:"Supervisor Review",approval:D,roleKey:"supervisor"}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(Y.ArrowRight,{className:"w-5 h-5 text-gray-300 rotate-90"})}),(0,t.jsx)(X,{label:"Manager Approval",approval:q,roleKey:"manager"}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(Y.ArrowRight,{className:"w-5 h-5 text-gray-300 rotate-90"})}),(0,t.jsx)(X,{label:"Admin Final Approval",approval:T,roleKey:"admin"})]})]})]}),f&&R&&(0,t.jsx)("div",{className:"sticky bottom-0 bg-white border-t border-gray-100 p-6 rounded-b-2xl",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,t.jsx)("button",{onClick:o,className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition-all",children:"Cancel"}),(0,t.jsxs)("button",{onClick:b,disabled:N,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white rounded-xl font-semibold shadow-lg shadow-red-500/25 transition-all disabled:opacity-50",children:[N?(0,t.jsx)(k.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(l.XCircle,{className:"w-5 h-5"}),"Reject"]}),(0,t.jsxs)("button",{onClick:i,disabled:N,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-xl font-semibold shadow-lg shadow-emerald-500/25 transition-all disabled:opacity-50",children:[N?(0,t.jsx)(k.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(s.CheckCircle,{className:"w-5 h-5"}),"Approve"]})]})})]})})};var z=e.i(5766);let H=["deposit","sell","withdraw","loan"],O=["all","pending","completed","rejected"],Q={admin:{label:"Admin",icon:M.Crown,color:"purple",gradient:"from-purple-500 to-pink-600",lightGradient:"from-purple-50 to-pink-50",bgColor:"bg-purple-50",textColor:"text-purple-700",borderColor:"border-purple-200",description:"Final approval authority",panelTitle:"Admin Panel",approvalLevel:"Final Approval"},manager:{label:"Manager",icon:S.UserCog,color:"blue",gradient:"from-blue-500 to-indigo-600",lightGradient:"from-blue-50 to-indigo-50",bgColor:"bg-blue-50",textColor:"text-blue-700",borderColor:"border-blue-200",description:"Secondary approval after supervisor",panelTitle:"Manager Panel",approvalLevel:"Secondary Approval"},supervisor:{label:"Supervisor",icon:L.Users,color:"emerald",gradient:"from-emerald-500 to-green-600",lightGradient:"from-emerald-50 to-green-50",bgColor:"bg-emerald-50",textColor:"text-emerald-700",borderColor:"border-emerald-200",description:"Initial approval review",panelTitle:"Supervisor Panel",approvalLevel:"Initial Approval"}},K=({title:e,value:r,subValue:a,icon:s,gradient:l,lightGradient:o,isAmount:n=!1,highlight:i=!1})=>(0,t.jsxs)("div",{className:`relative bg-gradient-to-br ${o} rounded-xl sm:rounded-2xl p-3 sm:p-4 md:p-5 border border-gray-100/80 overflow-hidden group hover:shadow-lg hover:shadow-gray-200/50 transition-all duration-300 hover:-translate-y-0.5 ${i?"ring-2 ring-amber-400 ring-offset-2":""}`,children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-16 sm:w-20 h-16 sm:h-20 bg-gradient-to-br from-white/60 to-transparent rounded-full -mr-8 sm:-mr-10 -mt-8 sm:-mt-10 group-hover:scale-150 transition-transform duration-500"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-1.5 sm:mb-2",children:[(0,t.jsx)("div",{className:`p-1.5 sm:p-2 md:p-2.5 bg-gradient-to-br ${l} rounded-lg sm:rounded-xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300`,children:s}),i&&(0,t.jsxs)("span",{className:"flex h-2.5 w-2.5 sm:h-3 sm:w-3",children:[(0,t.jsx)("span",{className:"animate-ping absolute inline-flex h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full bg-amber-400 opacity-75"}),(0,t.jsx)("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 sm:h-3 sm:w-3 bg-amber-500"})]})]}),(0,t.jsx)("p",{className:"text-[10px] sm:text-xs font-semibold text-gray-500 uppercase tracking-wider mb-0.5 sm:mb-1",children:e}),(0,t.jsx)("p",{className:`${n?"text-sm sm:text-lg md:text-xl":"text-xl sm:text-2xl md:text-3xl"} font-bold text-gray-900 truncate`,children:r}),a&&(0,t.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 mt-0.5 sm:mt-1 truncate",children:a})]})]}),J=({searchValue:e,statusFilter:r,activeTab:a,config:s,onClearSearch:l})=>{let o=s.icon,n=(()=>{if(e)return{title:"No results found",subtitle:`No ${a} transactions match "${e}"`};switch(r){case"pending":return{title:"No pending transactions",subtitle:`All ${a} transactions have been processed. Great job!`};case"completed":return{title:"No completed transactions",subtitle:`Completed ${a} transactions will appear here`};case"rejected":return{title:"No rejected transactions",subtitle:`No ${a} transactions have been rejected yet`};default:return{title:"No transactions found",subtitle:`New ${a} requests will appear here`}}})();return(0,t.jsxs)("div",{className:"text-center py-12 sm:py-16 md:py-24",children:[(0,t.jsx)("div",{className:`inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 ${s.bgColor} rounded-2xl sm:rounded-3xl mb-4 sm:mb-6 shadow-lg`,children:(0,t.jsx)(o,{className:`w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 ${s.textColor}`})}),(0,t.jsx)("p",{className:"text-gray-900 text-lg sm:text-xl md:text-2xl font-bold mb-1.5 sm:mb-2",children:n.title}),(0,t.jsx)("p",{className:"text-gray-500 max-w-md mx-auto text-xs sm:text-sm md:text-base px-4",children:n.subtitle}),e&&(0,t.jsx)("button",{onClick:l,className:"mt-4 sm:mt-6 px-5 sm:px-6 py-2 sm:py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg sm:rounded-xl font-medium shadow-lg shadow-blue-500/25 hover:shadow-xl transition-all text-sm sm:text-base active:scale-95",children:"Clear Search"})]})},Z=({transaction:e,config:r,transactionType:a,userRole:i,roleConfig:u,onApprove:w,onReject:v,onView:f,getApprovalStatus:N,getIndividualApprovalStatus:C,canUserApprove:_,remarksDisplayMap:$,index:S,isProcessing:R=!1})=>{let L,M=N(e.approval,e.transaction_status),T=r.icon,X=(e.grain||e.grains||[])[0]||{},B="pending"===e.transaction_status,E="rejected"===e.transaction_status,Y="completed"===e.transaction_status,V="withdraw"===a,W="loan"===a,z="sell"===a,H="deposit"===a,O=C(e.approval?.admin_approval),K=C(e.approval?.manager_approval),J=C(e.approval?.supervisor_approval),Z=_(e),er=(()=>{switch(i){case"admin":return"approved"===O.status;case"manager":return"approved"===K.status;case"supervisor":return"approved"===J.status;default:return!1}})()&&B,ea=V&&e.remarks?$[e.remarks]||$.other:null;return(0,t.jsxs)("div",{className:`relative bg-white rounded-xl sm:rounded-2xl border-2 overflow-hidden transition-all duration-500 group ${Z?"border-amber-300 shadow-lg shadow-amber-100/50 ring-2 ring-amber-200/50 hover:shadow-xl hover:shadow-amber-200/50":er?"border-blue-200 shadow-md shadow-blue-100/30 hover:shadow-lg":E?"border-red-200 shadow-md shadow-red-100/30 hover:shadow-lg":Y?"border-emerald-200 shadow-md shadow-emerald-100/30 hover:shadow-lg":"border-gray-200 shadow-md hover:shadow-lg hover:border-gray-300"} hover:-translate-y-0.5`,style:{animationDelay:`${50*S}ms`},children:[Z&&(0,t.jsx)("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500 text-white px-3 sm:px-4 py-2 sm:py-2.5",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[(0,t.jsx)("div",{className:"p-1 sm:p-1.5 bg-white/20 rounded-lg backdrop-blur-sm",children:(0,t.jsx)(m.AlertCircle,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,t.jsx)("span",{className:"font-bold text-xs sm:text-sm md:text-base",children:"Action Required"})]}),(0,t.jsx)("span",{className:"hidden sm:inline-block w-px h-4 bg-white/30"}),(0,t.jsx)("span",{className:"hidden sm:inline text-white/90 text-xs sm:text-sm font-medium",children:(()=>{let e=(()=>{switch(a){case"deposit":return"Deposit";case"withdraw":return"Withdrawal";case"sell":return"Sale";case"loan":return"Loan";default:return a}})();switch(i){case"admin":return`${e} Request - Manager Approved, Awaiting Your Final Decision`;case"manager":return`${e} Request - Supervisor Approved, Awaiting Your Decision`;case"supervisor":return`New ${e} Request - Awaiting Your Initial Review`;default:return"Action Required"}})()})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-xs font-semibold",children:"PENDING"})]})]})}),er&&(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-blue-500 text-white px-3 sm:px-4 py-2 sm:py-2.5",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,t.jsx)("div",{className:"p-1 sm:p-1.5 bg-white/20 rounded-lg backdrop-blur-sm",children:(0,t.jsx)(s.CheckCircle,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,t.jsx)("span",{className:"font-bold text-xs sm:text-sm md:text-base",children:"You Approved"}),(0,t.jsx)("span",{className:"hidden sm:inline-block w-px h-4 bg-white/30"}),(0,t.jsx)("span",{className:"hidden sm:inline text-white/90 text-xs sm:text-sm font-medium",children:(()=>{switch(i){case"admin":return"Fully Approved";case"manager":return"Awaiting Admin Final Approval";case"supervisor":return"Awaiting Manager Approval";default:return"Processing"}})()})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[(0,t.jsx)(n.Clock,{className:"w-4 h-4 animate-pulse"}),(0,t.jsx)("span",{className:"text-xs font-semibold",children:"WAITING"})]})]})}),(0,t.jsxs)("div",{className:"p-3 sm:p-4 md:p-6",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4 sm:gap-5",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[(0,t.jsx)("div",{className:`
            p-2.5 sm:p-3 rounded-xl sm:rounded-2xl shadow-lg transition-transform duration-300 group-hover:scale-110
            bg-gradient-to-br ${r.gradient}
          `,children:(0,t.jsx)(T,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,t.jsx)("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 truncate",children:e.user?.name||"Unknown User"}),(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg sm:rounded-xl text-xs font-bold border ${M.color}`,children:[M.icon,M.text]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mt-1 sm:mt-1.5 text-xs sm:text-sm text-gray-500",children:[e.user?.phone_number&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)(y.Phone,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),e.user.phone_number]}),e.user?.email&&(0,t.jsxs)("span",{className:"hidden sm:inline-flex items-center gap-1",children:[(0,t.jsx)(A.Mail,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:e.user.email})]})]})]})]}),W?(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3 sm:mb-4",children:[e.loan_id&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 sm:px-4 py-1.5 sm:py-2 bg-gradient-to-r from-violet-50 to-purple-50 text-violet-700 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border border-violet-200",children:[(0,t.jsx)(I.Hash,{className:"w-3.5 h-3.5"}),"Loan: ",e.loan_id]}),(0,t.jsxs)("span",{className:`px-2.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border-2 ${E?"bg-gradient-to-r from-red-50 to-rose-50 text-red-700 border-red-200":Y?"bg-gradient-to-r from-emerald-50 to-green-50 text-emerald-700 border-emerald-200":Z?"bg-gradient-to-r from-amber-50 to-yellow-50 text-amber-700 border-amber-200":er?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border-blue-200":`bg-gradient-to-r ${r.lightGradient} ${r.textColor} ${r.borderColor}`}`,children:["ðŸ’° Loan Amount: ",U(e.loan_amount||0)]}),e.emi_amount&&(0,t.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500 font-medium bg-gray-50 px-2 py-1 rounded-lg border border-gray-200",children:["EMI: ",U(e.emi_amount),"/month"]})]}):z?(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3 sm:mb-4",children:[X.category&&(0,t.jsxs)("span",{className:`
      px-2.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border-2
      ${E?"bg-gradient-to-r from-red-50 to-rose-50 text-red-700 border-red-200":Y?"bg-gradient-to-r from-emerald-50 to-green-50 text-emerald-700 border-emerald-200":Z?"bg-gradient-to-r from-amber-50 to-yellow-50 text-amber-700 border-amber-200":er?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border-blue-200":`bg-gradient-to-r ${r.lightGradient} ${r.textColor} ${r.borderColor}`}
    `,children:["ðŸŒ¾ ",X.category.grain_type," - Grade"," ",X.category.quality]}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 sm:px-4 py-1.5 sm:py-2 bg-gradient-to-r from-emerald-50 to-teal-50 text-emerald-700 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border border-emerald-200",children:[(0,t.jsx)(q.ShoppingCart,{className:"w-3.5 h-3.5"}),"For Sale"]}),(0,t.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500 font-medium",children:["@"," ",U(e.sale_price||X.price_per_quintal||0),"/qtl"]})]}):(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3 sm:mb-4",children:[X.category&&(0,t.jsxs)("span",{className:`
    px-2.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border-2
    ${E?"bg-gradient-to-r from-red-50 to-rose-50 text-red-700 border-red-200":Y?"bg-gradient-to-r from-emerald-50 to-green-50 text-emerald-700 border-emerald-200":Z?"bg-gradient-to-r from-amber-50 to-yellow-50 text-amber-700 border-amber-200":er?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border-blue-200":`bg-gradient-to-r ${r.lightGradient} ${r.textColor} ${r.borderColor}`}
  `,children:["ðŸŒ¾ ",X.category.grain_type," - Grade"," ",X.category.quality]}),(0,t.jsx)("span",{className:`
  inline-flex items-center gap-1.5 px-2.5 sm:px-4 py-1.5 sm:py-2 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold border
  ${H?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border-blue-200":"bg-gradient-to-r from-amber-50 to-orange-50 text-amber-700 border-amber-200"}
`,children:H?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.ArrowDownRight,{className:"w-3.5 h-3.5"}),"Deposit"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Wallet,{className:"w-3.5 h-3.5"}),"Withdraw"]})}),V&&ea&&(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm font-medium border ${ea.color}`,children:[(0,t.jsx)("span",{children:ea.icon}),ea.label]}),X.price_per_quintal&&(0,t.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500 font-medium bg-gray-50 px-2 py-1 rounded-lg border border-gray-200",children:["@ ",U(X.price_per_quintal),"/qtl"]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:(L=[],(H||V)&&(e.warehouse?.name&&L.push((0,t.jsx)(ee,{icon:(0,t.jsx)(g.Building,{className:"w-3 h-3 sm:w-4 sm:h-4"}),label:e.warehouse?.name||"N/A",color:"blue"},"warehouse")),e.warehouse?.location&&L.push((0,t.jsx)(ee,{icon:(0,t.jsx)(j.MapPin,{className:"w-3 h-3 sm:w-4 sm:h-4"}),label:e.warehouse?.location||"N/A",color:"purple"},"location"))),!W&&X.quantity_quintal&&L.push((0,t.jsx)(ee,{icon:(0,t.jsx)(d.Package,{className:"w-3 h-3 sm:w-4 sm:h-4"}),label:`${X.quantity_quintal||0} Qtl`,color:"green"},"quantity")),(H||V)&&X.moisture_content&&L.push((0,t.jsx)(ee,{icon:(0,t.jsx)(p.Droplets,{className:"w-3 h-3 sm:w-4 sm:h-4"}),label:`${X.moisture_content||0}%`,color:"cyan"},"moisture")),W&&(e.interest_rate&&L.push((0,t.jsx)(ee,{icon:(0,t.jsx)(D,{className:"w-3 h-3 sm:w-4 sm:h-4"}),label:`${e.interest_rate}% Interest`,color:"violet"},"interest")),(e.loan_duration||e.duration_months)&&L.push((0,t.jsx)(ee,{icon:(0,t.jsx)(F.Timer,{className:"w-3 h-3 sm:w-4 sm:h-4"}),label:`${e.loan_duration||e.duration_months} Months`,color:"orange"},"duration")),e.collateral_value&&L.push((0,t.jsx)(ee,{icon:(0,t.jsx)(P.Shield,{className:"w-3 h-3 sm:w-4 sm:h-4"}),label:U(e.collateral_value),color:"green"},"collateral"))),z&&(e.buyer_name&&L.push((0,t.jsx)(ee,{icon:(0,t.jsx)(x.User,{className:"w-3 h-3 sm:w-4 sm:h-4"}),label:e.buyer_name,color:"blue"},"buyer")),(e.sale_price||X.price_per_quintal)&&L.push((0,t.jsx)(ee,{icon:(0,t.jsx)(G.IndianRupee,{className:"w-3 h-3 sm:w-4 sm:h-4"}),label:`${U(e.sale_price||X.price_per_quintal)}/Qtl`,color:"emerald"},"price"))),L.push((0,t.jsx)(ee,{icon:(0,t.jsx)(c.Calendar,{className:"w-3 h-3 sm:w-4 sm:h-4"}),label:e.transaction_date||e.created_at?new Date(e.transaction_date||e.created_at).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):"N/A",color:"orange"},"date")),L)})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-500 uppercase tracking-wider font-semibold mb-0.5 sm:mb-1",children:W?"Loan Amount":z?"Sale Value":"Total Value"}),(0,t.jsx)("p",{className:`
            text-xl sm:text-2xl md:text-3xl font-black bg-gradient-to-r 
            ${E?"from-red-600 to-rose-600":Y?"from-emerald-600 to-green-600":Z?"from-amber-600 to-orange-600":`${r.gradient.replace("from-","from-").replace("to-","to-")}`} 
            bg-clip-text text-transparent
          `,children:U(W?e.loan_amount||e.total_amount||0:z?e.sale_amount||e.total_amount||0:e.total_amount||0)}),(0,t.jsxs)("p",{className:"text-[10px] sm:text-xs text-gray-400 mt-0.5 sm:mt-1 font-mono",children:["ID: ",e._id?.slice(-8).toUpperCase()||"N/A"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,t.jsxs)("button",{onClick:f,className:" inline-flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 sm:py-2.5 bg-gradient-to-r from-gray-50 to-slate-100 text-gray-700 rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm border border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-md transition-all duration-300 hover:-translate-y-0.5 active:scale-95 ",children:[(0,t.jsx)(o.Eye,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,t.jsx)("span",{className:"hidden xs:inline",children:"View"})]}),Z&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:v,disabled:R,className:" inline-flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 sm:py-2.5 bg-gradient-to-r from-red-500 to-rose-600 text-white rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm shadow-lg shadow-red-500/25 hover:shadow-xl hover:shadow-red-500/30 transition-all duration-300 hover:-translate-y-0.5 active:scale-95 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none ",children:[R?(0,t.jsx)(k.Loader2,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 animate-spin"}):(0,t.jsx)(l.XCircle,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,t.jsx)("span",{className:"hidden xs:inline",children:"Reject"})]}),(0,t.jsxs)("button",{onClick:w,disabled:R,className:" inline-flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 sm:py-2.5 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-lg sm:rounded-xl font-semibold text-xs sm:text-sm shadow-lg shadow-emerald-500/25 hover:shadow-xl hover:shadow-emerald-500/30 transition-all duration-300 hover:-translate-y-0.5 active:scale-95 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none ",children:[R?(0,t.jsx)(k.Loader2,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 animate-spin"}):(0,t.jsx)(s.CheckCircle,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,t.jsx)("span",{className:"hidden xs:inline",children:"Approve"})]})]})]})]})]}),B&&(0,t.jsxs)("div",{className:"mt-4 sm:mt-5 pt-4 sm:pt-5 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[(0,t.jsx)("p",{className:"text-xs sm:text-sm font-semibold text-gray-700",children:"Approval Pipeline"}),(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500",children:"approved"===J.status&&"approved"===K.status&&"approved"===O.status?"3/3 Complete":"approved"===J.status&&"approved"===K.status?"2/3 Complete":"approved"===J.status?"1/3 Complete":"0/3 Complete"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,t.jsx)(et,{label:"Supervisor",status:J.status,user:J.user,isCurrentRole:"supervisor"===i,config:Q.supervisor}),(0,t.jsx)("div",{className:`
            flex-1 h-1 rounded-full transition-all duration-500
            ${"approved"===J.status?"bg-gradient-to-r from-emerald-400 to-emerald-500":"rejected"===J.status?"bg-gradient-to-r from-red-400 to-red-500":"bg-gray-200"}
          `}),(0,t.jsx)(et,{label:"Manager",status:K.status,user:K.user,isCurrentRole:"manager"===i,config:Q.manager}),(0,t.jsx)("div",{className:`
            flex-1 h-1 rounded-full transition-all duration-500
            ${"approved"===K.status?"bg-gradient-to-r from-emerald-400 to-emerald-500":"rejected"===K.status?"bg-gradient-to-r from-red-400 to-red-500":"bg-gray-200"}
          `}),(0,t.jsx)(et,{label:"Admin",status:O.status,user:O.user,isCurrentRole:"admin"===i,config:Q.admin})]})]}),(E||Y)&&e.processed_at&&(0,t.jsx)("div",{className:`
        mt-4 sm:mt-5 pt-4 sm:pt-5 border-t 
        ${E?"border-red-100":"border-emerald-100"}
      `,children:(0,t.jsxs)("div",{className:`
          flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg sm:rounded-xl
          ${E?"bg-gradient-to-r from-red-50 to-rose-50 border border-red-200":"bg-gradient-to-r from-emerald-50 to-green-50 border border-emerald-200"}
        `,children:[E?(0,t.jsx)(l.XCircle,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 flex-shrink-0"}):(0,t.jsx)(s.CheckCircle,{className:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 flex-shrink-0"}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:`text-xs sm:text-sm font-semibold ${E?"text-red-700":"text-emerald-700"}`,children:E?"Transaction Rejected":"Transaction Completed"}),(0,t.jsxs)("p",{className:"text-[10px] sm:text-xs text-gray-500 mt-0.5",children:["Processed on"," ",new Date(e.processed_at).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})})]})]})},ee=({icon:e,label:r,color:a})=>{let s={blue:"bg-blue-50 text-blue-700 border-blue-200",green:"bg-green-50 text-green-700 border-green-200",emerald:"bg-emerald-50 text-emerald-700 border-emerald-200",purple:"bg-purple-50 text-purple-700 border-purple-200",violet:"bg-violet-50 text-violet-700 border-violet-200",orange:"bg-orange-50 text-orange-700 border-orange-200",amber:"bg-amber-50 text-amber-700 border-amber-200",cyan:"bg-cyan-50 text-cyan-700 border-cyan-200",gray:"bg-gray-50 text-gray-700 border-gray-200",red:"bg-red-50 text-red-700 border-red-200"};return(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 sm:gap-1.5 px-2 sm:px-3 py-1 sm:py-1.5 rounded-lg text-[10px] sm:text-xs font-semibold border ${s[a]||s.gray}`,children:[e,(0,t.jsx)("span",{className:"truncate max-w-[80px] sm:max-w-[120px]",children:r})]})},et=({label:e,status:r,user:a,isCurrentRole:o,config:i})=>{let d="approved"===r?{bg:"bg-gradient-to-br from-emerald-500 to-green-600",ring:"ring-2 ring-emerald-200 ring-offset-1",icon:(0,t.jsx)(s.CheckCircle,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}:"rejected"===r?{bg:"bg-gradient-to-br from-red-500 to-rose-600",ring:"ring-2 ring-red-200 ring-offset-1",icon:(0,t.jsx)(l.XCircle,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}:o?{bg:"bg-gradient-to-br from-amber-400 to-orange-500",ring:"ring-2 ring-amber-200 ring-offset-1 animate-pulse",icon:(0,t.jsx)(m.AlertCircle,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}:{bg:"bg-gray-200",ring:"",icon:(0,t.jsx)(n.Clock,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400"})};return(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:`p-1.5 sm:p-2 rounded-full ${d.bg} ${d.ring} transition-all duration-300`,children:d.icon}),(0,t.jsx)("span",{className:`mt-1 text-[9px] sm:text-[10px] font-semibold ${"approved"===r?"text-emerald-600":"rejected"===r?"text-red-600":o?"text-amber-600":"text-gray-400"}`,children:e}),a?.name&&(0,t.jsx)("span",{className:"text-[8px] sm:text-[9px] text-gray-400 truncate max-w-[50px] sm:max-w-[70px]",children:a.name.split(" ")[0]})]})};e.s(["default",0,({userRole:e="supervisor"})=>{let[o,c]=(0,r.useState)(""),[x,g]=(0,r.useState)(null),[p,v]=(0,r.useState)("deposit"),[j,y]=(0,r.useState)("all"),[A,S]=(0,r.useState)([]),[P,L]=(0,r.useState)(!0),[M,D]=(0,r.useState)(!1),[G,I]=(0,r.useState)(null),[F,B]=(0,r.useState)(1),[E,Y]=(0,r.useState)({deposit:0,withdraw:0,sell:0,loan:0}),[V,ee]=(0,r.useState)({page:1,limit:5,total_items:0,total_pages:0}),[et,er]=(0,r.useState)({all:{count:0,total_value:0},pending:{count:0,total_value:0},completed:{count:0,total_value:0},rejected:{count:0,total_value:0}}),ea=Q[e]||Q.supervisor,es=ea.icon,el={deposit:{icon:b.ArrowDownRight,color:"blue",gradient:"from-blue-500 to-indigo-600",lightGradient:"from-blue-50 to-indigo-50",bgColor:"bg-blue-50",textColor:"text-blue-700",borderColor:"border-blue-200",iconBg:"bg-blue-100",label:"Deposit",description:"Grain deposit transactions",accentColor:"blue"},sell:{icon:q.ShoppingCart,color:"emerald",gradient:"from-emerald-500 to-teal-600",lightGradient:"from-emerald-50 to-teal-50",bgColor:"bg-emerald-50",textColor:"text-emerald-700",borderColor:"border-emerald-200",iconBg:"bg-emerald-100",label:"Sell",description:"Grain sales transactions",accentColor:"emerald"},withdraw:{icon:h.Wallet,color:"amber",gradient:"from-amber-500 to-orange-600",lightGradient:"from-amber-50 to-orange-50",bgColor:"bg-amber-50",textColor:"text-amber-700",borderColor:"border-amber-200",iconBg:"bg-amber-100",label:"Withdraw",description:"Grain withdrawal transactions",accentColor:"amber"},loan:{icon:T.Banknote,color:"violet",gradient:"from-violet-500 to-purple-600",lightGradient:"from-violet-50 to-purple-50",bgColor:"bg-violet-50",textColor:"text-violet-700",borderColor:"border-violet-200",iconBg:"bg-violet-100",label:"Loan",description:"Loan against grain transactions",accentColor:"violet"}},eo={all:{label:"All",icon:d.Package,color:"gray",bgActive:"bg-gradient-to-r from-slate-700 to-slate-900",bgHover:"hover:bg-slate-50",textColor:"text-slate-600",activeRing:"ring-slate-400"},pending:{label:"Pending",icon:n.Clock,color:"amber",bgActive:"bg-gradient-to-r from-amber-500 to-orange-500",bgHover:"hover:bg-amber-50",textColor:"text-amber-600",activeRing:"ring-amber-400"},completed:{label:"Completed",icon:s.CheckCircle,color:"green",bgActive:"bg-gradient-to-r from-emerald-500 to-green-600",bgHover:"hover:bg-emerald-50",textColor:"text-emerald-600",activeRing:"ring-emerald-400"},rejected:{label:"Rejected",icon:f,color:"red",bgActive:"bg-gradient-to-r from-red-500 to-rose-600",bgHover:"hover:bg-red-50",textColor:"text-red-600",activeRing:"ring-red-400"}},en={personal_use:{label:"Personal Use",icon:"ðŸ ",color:"bg-blue-50 text-blue-700 border-blue-200"},sale:{label:"For Sale",icon:"ðŸ’°",color:"bg-emerald-50 text-emerald-700 border-emerald-200"},other:{label:"Other",icon:"ðŸ“‹",color:"bg-gray-50 text-gray-700 border-gray-200"}},ei=e=>{if(!e)return{status:"pending",text:"Pending",hasAction:!1};let t=e.user&&e.user.name,r=e.date;return!0===e.status&&t?{status:"approved",text:"Approved",hasAction:!0,user:e.user}:!1===e.status&&(t||r)?{status:"rejected",text:"Rejected",hasAction:!0,user:e.user}:{status:"pending",text:"Pending",hasAction:!1}},ed=(r,a)=>{if("completed"===a)return{text:"Completed",color:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border-green-200",dotColor:"bg-green-500",icon:(0,t.jsx)(s.CheckCircle,{className:"w-4 h-4"})};if("rejected"===a)return{text:"Rejected",color:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200",dotColor:"bg-red-500",icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4"})};if("pending"===a){let a=ei(r?.admin_approval),o=ei(r?.manager_approval),i=ei(r?.supervisor_approval);if("admin"===e)return"rejected"===a.status?{text:"You Rejected",color:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200",dotColor:"bg-red-500",icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4"})}:"approved"===a.status?{text:"Fully Approved",color:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border-green-200",dotColor:"bg-green-500",icon:(0,t.jsx)(s.CheckCircle,{className:"w-4 h-4"})}:"rejected"===o.status?{text:"Manager Rejected",color:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200",dotColor:"bg-red-500",icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4"})}:"approved"===o.status?{text:"Awaiting Your Approval",color:"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border-amber-200",dotColor:"bg-amber-500",icon:(0,t.jsx)(m.AlertCircle,{className:"w-4 h-4"})}:"rejected"===i.status?{text:"Supervisor Rejected",color:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200",dotColor:"bg-red-500",icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4"})}:"approved"===i.status?{text:"Awaiting Manager",color:"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 border-blue-200",dotColor:"bg-blue-500",icon:(0,t.jsx)(n.Clock,{className:"w-4 h-4"})}:{text:"Awaiting Supervisor",color:"bg-gradient-to-r from-slate-100 to-gray-100 text-slate-800 border-slate-200",dotColor:"bg-slate-500",icon:(0,t.jsx)(n.Clock,{className:"w-4 h-4"})};if("manager"===e)return"rejected"===o.status?{text:"You Rejected",color:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200",dotColor:"bg-red-500",icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4"})}:"approved"===o.status?"rejected"===a.status?{text:"Admin Rejected",color:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200",dotColor:"bg-red-500",icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4"})}:"approved"===a.status?{text:"Fully Approved",color:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border-green-200",dotColor:"bg-green-500",icon:(0,t.jsx)(s.CheckCircle,{className:"w-4 h-4"})}:{text:"Awaiting Admin",color:"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 border-blue-200",dotColor:"bg-blue-500",icon:(0,t.jsx)(n.Clock,{className:"w-4 h-4"})}:"rejected"===i.status?{text:"Supervisor Rejected",color:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200",dotColor:"bg-red-500",icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4"})}:"approved"===i.status?{text:"Awaiting Your Approval",color:"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border-amber-200",dotColor:"bg-amber-500",icon:(0,t.jsx)(m.AlertCircle,{className:"w-4 h-4"})}:{text:"Awaiting Supervisor",color:"bg-gradient-to-r from-slate-100 to-gray-100 text-slate-800 border-slate-200",dotColor:"bg-slate-500",icon:(0,t.jsx)(n.Clock,{className:"w-4 h-4"})};if("rejected"===i.status)return{text:"You Rejected",color:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200",dotColor:"bg-red-500",icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4"})};if("approved"===i.status)return"rejected"===o.status?{text:"Manager Rejected",color:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200",dotColor:"bg-red-500",icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4"})}:"approved"===o.status?"rejected"===a.status?{text:"Admin Rejected",color:"bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border-red-200",dotColor:"bg-red-500",icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4"})}:"approved"===a.status?{text:"Fully Approved",color:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border-green-200",dotColor:"bg-green-500",icon:(0,t.jsx)(s.CheckCircle,{className:"w-4 h-4"})}:{text:"Awaiting Admin",color:"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 border-purple-200",dotColor:"bg-purple-500",icon:(0,t.jsx)(n.Clock,{className:"w-4 h-4"})}:{text:"Awaiting Manager",color:"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 border-blue-200",dotColor:"bg-blue-500",icon:(0,t.jsx)(n.Clock,{className:"w-4 h-4"})};return{text:"Awaiting Your Approval",color:"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border-amber-200",dotColor:"bg-amber-500",icon:(0,t.jsx)(m.AlertCircle,{className:"w-4 h-4"})}}return{text:"Unknown",color:"bg-gradient-to-r from-gray-100 to-gray-100 text-gray-800 border-gray-200",dotColor:"bg-gray-500",icon:(0,t.jsx)(m.AlertCircle,{className:"w-4 h-4"})}},em=()=>({deposit:{fetch:`${X.default}/approval/pending-deposite-approval`,action:`${X.default}/approval/action-deposite-approval`},withdraw:{fetch:`${X.default}/approval/pending-withdraw-approval`,action:`${X.default}/approval/action-withdraw-approval`},sell:{fetch:`${X.default}/approval/pending-sell-approval`,action:`${X.default}/approval/action-sell-approval`},loan:{fetch:`${X.default}/approval/pending-loan-approval`,action:`${X.default}/approval/action-loan-approval`}}),ec=(0,r.useCallback)(async()=>{try{let e=await fetch(`${X.default}/approval/all-pending-approvals`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){let t=await e.json();Y(t.pending_counts||{deposit:0,withdraw:0,sell:0,loan:0})}}catch(e){console.error("Error fetching pending counts:",e)}},[]),ex=(0,r.useCallback)(async(e,t="all",r=1)=>{try{L(!0);let a=em()[e];if(!a){S([]),ee({page:1,limit:5,total_items:0,total_pages:0}),er({all:{count:0},pending:{count:0},completed:{count:0},rejected:{count:0}}),L(!1);return}let s=await fetch(`${a.fetch}?status=${t}&page=${r}&limit=5`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw Error(`Failed to fetch ${e} transactions`);let l=await s.json();S(l.data||[]),ee(l.pagination||{page:1,limit:5,total_items:0,total_pages:0}),er(l.counts||{all:{count:0,total_value:0},pending:{count:0,total_value:0},completed:{count:0,total_value:0},rejected:{count:0,total_value:0}})}catch(t){console.error(`Error fetching ${e} transactions:`,t),z.default.error(`Failed to fetch ${e} transactions`),S([]),ee({page:1,limit:5,total_items:0,total_pages:0}),er({all:{count:0},pending:{count:0},completed:{count:0},rejected:{count:0}})}finally{L(!1),D(!1)}},[]);(0,r.useEffect)(()=>{ec()},[ec]),(0,r.useEffect)(()=>{ex(p,j,F)},[j,F,p,ex]);let eg=async()=>{D(!0),await Promise.all([ex(p,j,F),ec()])},ep=(()=>{if(!o)return A;let e=o.toLowerCase();return A.filter(t=>{let r=t.user?.name?.toLowerCase().includes(e)||t._id?.toLowerCase().includes(e)||t.warehouse?.name?.toLowerCase().includes(e)||t.warehouse?.location?.toLowerCase().includes(e)||t.user?.phone_number?.includes(o)||t.user?.email?.toLowerCase().includes(e)||t.remarks?.toLowerCase().includes(e),a=t.grain?.[0]?.category?.grain_type?.toLowerCase().includes(e),s="loan"===p&&(t.loan_id?.toLowerCase().includes(e)||t.interest_rate?.toString().includes(o)),l="sell"===p&&(t.buyer_name?.toLowerCase().includes(e)||t.sale_price?.toString().includes(o));return r||a||s||l})})(),eu=e=>{let t=Math.max(1,Math.min(e,V.total_pages));t!==F&&B(t)},eb=t=>{if("pending"!==t.transaction_status)return!1;let r=ei(t.approval?.admin_approval),a=ei(t.approval?.manager_approval),s=ei(t.approval?.supervisor_approval);switch(e){case"admin":return"approved"===a.status&&"pending"===r.status;case"manager":return"approved"===s.status&&"pending"===a.status;case"supervisor":return"pending"===s.status;default:return!1}},eh=()=>A.filter(e=>eb(e)).length,ew=()=>Object.values(E).reduce((e,t)=>e+t,0),ev=async(e,t)=>{try{I(e);let r=em()[p];if(!r){z.default.error("Approval not supported for this transaction type"),I(null);return}let a=await fetch(r.action,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({action:t,transactionId:e})}),s=await a.json().catch(()=>({}));if(a.ok){let e=p.charAt(0).toUpperCase()+p.slice(1);z.default.success(s.message||`${e} transaction ${"approve"===t?"approved":"rejected"} successfully`),await Promise.all([ex(p,j,F),ec()]),g(null)}else 400===a.status?z.default.error(s.message||"Invalid request. Please check the transaction."):401===a.status?z.default.error("Session expired. Please login again."):403===a.status?z.default.error(s.message||"You do not have permission to perform this action."):404===a.status?z.default.error(s.message||"Transaction not found."):z.default.error(s.message||`Failed to ${t} transaction`)}catch(e){console.error(`Error processing ${p} transaction:`,e),z.default.error(`Error ${"approve"===t?"approving":"rejecting"} ${p} transaction. Please try again.`)}finally{I(null)}};return P&&0===A.length&&!M?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"relative w-20 h-20 sm:w-24 sm:h-24 mx-auto",children:[(0,t.jsx)("div",{className:`absolute inset-0 border-4 ${ea.borderColor} rounded-full`}),(0,t.jsx)("div",{className:`absolute inset-0 border-4 border-${ea.color}-500 rounded-full border-t-transparent animate-spin`}),(0,t.jsx)("div",{className:"absolute inset-3 sm:inset-4 border-4 border-indigo-200 rounded-full"}),(0,t.jsx)("div",{className:"absolute inset-3 sm:inset-4 border-4 border-indigo-500 rounded-full border-b-transparent animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}}),(0,t.jsx)(es,{className:`absolute inset-0 m-auto w-8 h-8 ${ea.textColor} animate-pulse`})]}),(0,t.jsxs)("p",{className:"mt-6 sm:mt-8 text-gray-700 font-semibold text-base sm:text-lg",children:["Loading ",ea.label.toLowerCase()," dashboard..."]}),(0,t.jsx)("p",{className:"mt-2 text-gray-400 text-xs sm:text-sm",children:"Please wait while we fetch your data"})]})}):(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[(0,t.jsxs)("div",{className:"relative bg-white rounded-2xl sm:rounded-3xl shadow-xl shadow-gray-200/50 border border-gray-100/80 overflow-hidden",children:[(0,t.jsx)("div",{className:`absolute inset-0 bg-gradient-to-r ${ea.lightGradient} opacity-30`}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-gradient-to-bl from-blue-100/30 to-transparent rounded-full -mr-32 sm:-mr-48 -mt-32 sm:-mt-48"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-48 sm:w-64 h-48 sm:h-64 bg-gradient-to-tr from-indigo-100/30 to-transparent rounded-full -ml-24 sm:-ml-32 -mb-24 sm:-mb-32"}),(0,t.jsx)("div",{className:"relative p-4 sm:p-6 md:p-8",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1 sm:py-1.5 bg-gradient-to-r ${ea.gradient} text-white rounded-full text-xs sm:text-sm font-semibold shadow-lg`,children:[(0,t.jsx)(es,{className:"w-3 h-3 sm:w-4 sm:h-4"}),ea.panelTitle]}),(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 ${ea.bgColor} ${ea.textColor} rounded-full text-xs font-semibold border ${ea.borderColor}`,children:[(0,t.jsx)(R,{className:"w-3 h-3"}),ea.approvalLevel]}),ew()>0&&(0,t.jsxs)("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700 rounded-full text-xs font-bold flex items-center gap-1 border border-amber-200 shadow-sm",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full animate-pulse"}),ew()," Total Pending"]})]}),(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-gray-900 via-gray-800 to-gray-700 bg-clip-text text-transparent",children:"Request Management"}),(0,t.jsxs)("p",{className:"text-gray-500 text-sm sm:text-base md:text-lg max-w-xl",children:[ea.description,". Review and process"," ",p," transactions."]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(a.Search,{className:"absolute left-3 sm:left-4 top-1/2 -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:`Search ${p} transactions...`,value:o,onChange:e=>c(e.target.value),className:"w-full pl-10 sm:pl-12 pr-4 py-3 sm:py-3.5 bg-gray-50/80 backdrop-blur border border-gray-200 rounded-xl sm:rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-400 focus:bg-white transition-all duration-300 placeholder:text-gray-400 text-sm sm:text-base"}),o&&(0,t.jsx)("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 rounded-full transition-colors",children:(0,t.jsx)(u.X,{className:"w-4 h-4 text-gray-400"})})]}),(0,t.jsx)("button",{onClick:eg,disabled:M,className:`
            p-3 sm:p-3.5 bg-white border border-gray-200 rounded-xl sm:rounded-2xl 
            hover:bg-gray-50 hover:border-gray-300 transition-all duration-300 
            shadow-sm hover:shadow-md self-end sm:self-auto
            ${M?"cursor-not-allowed opacity-60":""}
          `,children:(0,t.jsx)(w.RefreshCw,{className:`w-5 h-5 text-gray-600 ${M?"animate-spin":""}`})})]})]})})]}),(0,t.jsx)("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-lg shadow-gray-200/50 border border-gray-100/80 p-1.5 sm:p-2",children:(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-1.5 sm:gap-2",children:H.map(e=>{let r=el[e],a=r.icon,s=p===e,l=E[e]||0,o=s?et.all.count:l;return(0,t.jsxs)("button",{onClick:()=>{e!==p&&(B(1),y("all"),v(e))},className:`
            relative p-3 sm:p-4 md:p-5 rounded-xl sm:rounded-2xl transition-all duration-500 group overflow-hidden
            ${s?`bg-gradient-to-r ${r.gradient} text-white shadow-xl shadow-${r.color}-500/25 scale-[1.02]`:"bg-gray-50/80 hover:bg-gray-100 text-gray-700 hover:scale-[1.01]"}
          `,children:[s&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent"}),(0,t.jsxs)("div",{className:"relative flex items-center gap-2 sm:gap-3",children:[(0,t.jsx)("div",{className:`
              p-2 sm:p-3 rounded-lg sm:rounded-xl transition-all duration-300
              ${s?"bg-white/20 backdrop-blur-sm shadow-inner":`${r.bgColor} group-hover:scale-110`}
            `,children:(0,t.jsx)(a,{className:`w-4 h-4 sm:w-5 sm:h-5 ${s?"text-white":r.textColor}`})}),(0,t.jsxs)("div",{className:"text-left min-w-0",children:[(0,t.jsx)("p",{className:`font-bold text-sm sm:text-base md:text-lg truncate ${s?"text-white":"text-gray-900"}`,children:r.label}),(0,t.jsx)("p",{className:`text-xs sm:text-sm truncate ${s?"text-white/80":"text-gray-500"}`,children:s?`${o} total`:`${l} pending`})]})]}),l>0&&(0,t.jsx)("div",{className:`
              absolute top-1 right-1 min-w-[22px] sm:min-w-[28px] h-5 sm:h-7 px-1.5 sm:px-2 
              bg-gradient-to-r from-red-500 to-rose-500 text-white rounded-full 
              flex items-center justify-center text-xs font-bold shadow-lg
              ${s?"":"animate-pulse"}
            `,children:l})]},e)})})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2 sm:gap-3 md:gap-4",children:[(0,t.jsx)(K,{title:"Total",value:et.all.count,subValue:et.all.total_value?U(et.all.total_value):null,icon:(0,t.jsx)(d.Package,{className:"w-4 h-4 sm:w-5 sm:h-5"}),gradient:"from-blue-500 to-indigo-600",lightGradient:"from-blue-50 to-indigo-50"}),(0,t.jsx)(K,{title:"Your Action",value:eh(),icon:(0,t.jsx)(m.AlertCircle,{className:"w-4 h-4 sm:w-5 sm:h-5"}),gradient:"from-amber-500 to-orange-500",lightGradient:"from-amber-50 to-orange-50",highlight:eh()>0}),(0,t.jsx)(K,{title:"Pending",value:et.pending.count,subValue:et.pending.total_value?U(et.pending.total_value):null,icon:(0,t.jsx)(n.Clock,{className:"w-4 h-4 sm:w-5 sm:h-5"}),gradient:"from-yellow-500 to-amber-500",lightGradient:"from-yellow-50 to-amber-50"}),(0,t.jsx)(K,{title:"Completed",value:et.completed.count,subValue:et.completed.total_value?U(et.completed.total_value):null,icon:(0,t.jsx)(s.CheckCircle,{className:"w-4 h-4 sm:w-5 sm:h-5"}),gradient:"from-emerald-500 to-green-600",lightGradient:"from-emerald-50 to-green-50"}),(0,t.jsx)(K,{title:"Rejected",value:et.rejected.count,subValue:et.rejected.total_value?U(et.rejected.total_value):null,icon:(0,t.jsx)(l.XCircle,{className:"w-4 h-4 sm:w-5 sm:h-5"}),gradient:"from-red-500 to-rose-600",lightGradient:"from-red-50 to-rose-50"}),(0,t.jsx)(K,{title:"Total Value",value:U(et.all.total_value||0),icon:(0,t.jsx)(i.TrendingUp,{className:"w-4 h-4 sm:w-5 sm:h-5"}),gradient:"from-purple-500 to-pink-600",lightGradient:"from-purple-50 to-pink-50",isAmount:!0})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-xl shadow-gray-200/50 border border-gray-100/80 overflow-hidden",children:[(0,t.jsx)("div",{className:"border-b border-gray-100 bg-gradient-to-r from-gray-50/80 to-slate-50/80 px-3 sm:px-4 md:px-6 py-3 sm:py-4",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 w-full sm:w-auto",children:O.map(e=>{let r=eo[e],a=r.icon,s=j===e,l=et[e]?.count||0;return(0,t.jsxs)("button",{onClick:()=>{e!==j&&(B(1),y(e))},className:`
                flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg sm:rounded-xl 
                font-medium text-xs sm:text-sm transition-all duration-300
                ${s?`${r.bgActive} text-white shadow-lg ring-2 ${r.activeRing} ring-offset-1`:`${r.textColor} ${r.bgHover} bg-white border border-gray-200 hover:shadow-md`}
              `,children:[(0,t.jsx)(a,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),(0,t.jsx)("span",{className:"hidden xs:inline",children:r.label}),(0,t.jsx)("span",{className:`
                ml-0.5 sm:ml-1 px-1.5 sm:px-2.5 py-0.5 rounded-full text-xs font-bold min-w-[20px] sm:min-w-[26px] text-center
                ${s?"bg-white/25 text-white":"bg-gray-100 text-gray-700"}
              `,children:P?(0,t.jsx)(k.Loader2,{className:"w-3 h-3 animate-spin"}):l})]},e)})}),(0,t.jsxs)("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg ${el[p].bgColor} ${el[p].borderColor} border`,children:[r.default.createElement(el[p].icon,{className:`w-4 h-4 ${el[p].textColor}`}),(0,t.jsxs)("span",{className:`text-xs sm:text-sm font-semibold ${el[p].textColor}`,children:[el[p].label," Transactions"]})]})]})}),(0,t.jsx)("div",{className:"p-3 sm:p-4 md:p-6",children:P?(0,t.jsx)("div",{className:"flex items-center justify-center py-12 sm:py-16",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 sm:gap-4",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-4 border-blue-200 border-t-blue-500"})}),(0,t.jsxs)("span",{className:"text-gray-500 font-medium text-sm sm:text-base",children:["Loading ",p," transactions..."]})]})}):ep.length>0?(0,t.jsx)("div",{className:"space-y-3 sm:space-y-4",children:ep.map((r,a)=>(0,t.jsx)(Z,{transaction:r,config:el[p],transactionType:p,userRole:e,roleConfig:ea,onApprove:()=>ev(r._id,"approve"),onReject:()=>ev(r._id,"reject"),onView:()=>g(r),getApprovalStatus:ed,getIndividualApprovalStatus:ei,canUserApprove:eb,remarksDisplayMap:en,index:a,isProcessing:G===r._id},r._id))}):(0,t.jsx)(J,{searchValue:o,statusFilter:j,activeTab:p,config:el[p],onClearSearch:()=>c("")})}),V.total_items>0&&!o&&(0,t.jsx)("div",{className:"border-t border-gray-100 px-3 sm:px-4 md:px-6 py-3 sm:py-4 bg-gradient-to-r from-gray-50/80 to-slate-50/80",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1",children:["Showing"," ",(0,t.jsx)("span",{className:"font-bold text-gray-900",children:(V.page-1)*V.limit+1})," ","-"," ",(0,t.jsx)("span",{className:"font-bold text-gray-900",children:Math.min(V.page*V.limit,V.total_items)})," ","of"," ",(0,t.jsx)("span",{className:"font-bold text-gray-900",children:V.total_items})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 order-1 sm:order-2",children:[(0,t.jsx)("button",{onClick:()=>eu(1),disabled:1===F,className:`
              p-1.5 sm:p-2 rounded-lg sm:rounded-xl border transition-all duration-300
              ${1===F?"border-gray-200 text-gray-300 cursor-not-allowed bg-gray-50":"border-gray-200 text-gray-600 hover:bg-white hover:border-gray-300 hover:shadow-md active:scale-95"}
            `,title:"First Page",children:(0,t.jsx)(_.ChevronsLeft,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>eu(F-1),disabled:1===F,className:`
              p-1.5 sm:p-2 rounded-lg sm:rounded-xl border transition-all duration-300
              ${1===F?"border-gray-200 text-gray-300 cursor-not-allowed bg-gray-50":"border-gray-200 text-gray-600 hover:bg-white hover:border-gray-300 hover:shadow-md active:scale-95"}
            `,title:"Previous Page",children:(0,t.jsx)(N.ChevronLeft,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"flex items-center gap-0.5 sm:gap-1 px-1 sm:px-2",children:(()=>{let e=[],r=window.innerWidth<640?3:5,a=V.total_pages,s=Math.max(1,F-Math.floor(r/2)),l=Math.min(a,s+r-1);l-s+1<r&&(s=Math.max(1,l-r+1)),s>1&&(e.push((0,t.jsx)("button",{onClick:()=>eu(1),className:"px-2 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm font-medium text-gray-600 hover:bg-white hover:shadow-md transition-all",children:"1"},1)),s>2&&e.push((0,t.jsx)("span",{className:"px-1 sm:px-2 text-gray-400 text-xs sm:text-sm",children:"â€¢â€¢â€¢"},"dots-start")));for(let r=s;r<=l;r++)e.push((0,t.jsx)("button",{onClick:()=>eu(r),className:`
                      px-2.5 sm:px-3.5 py-1 sm:py-1.5 rounded-lg sm:rounded-xl text-xs sm:text-sm font-semibold transition-all duration-300
                      ${F===r?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg shadow-blue-500/25 scale-105":"text-gray-600 hover:bg-white hover:shadow-md active:scale-95"}
                    `,children:r},r));return l<a&&(l<a-1&&e.push((0,t.jsx)("span",{className:"px-1 sm:px-2 text-gray-400 text-xs sm:text-sm",children:"â€¢â€¢â€¢"},"dots-end")),e.push((0,t.jsx)("button",{onClick:()=>eu(a),className:"px-2 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm font-medium text-gray-600 hover:bg-white hover:shadow-md transition-all",children:a},a))),e})()}),(0,t.jsx)("button",{onClick:()=>eu(F+1),disabled:F===V.total_pages,className:`
              p-1.5 sm:p-2 rounded-lg sm:rounded-xl border transition-all duration-300
              ${F===V.total_pages?"border-gray-200 text-gray-300 cursor-not-allowed bg-gray-50":"border-gray-200 text-gray-600 hover:bg-white hover:border-gray-300 hover:shadow-md active:scale-95"}
            `,title:"Next Page",children:(0,t.jsx)(C.ChevronRight,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>eu(V.total_pages),disabled:F===V.total_pages,className:`
              p-1.5 sm:p-2 rounded-lg sm:rounded-xl border transition-all duration-300
              ${F===V.total_pages?"border-gray-200 text-gray-300 cursor-not-allowed bg-gray-50":"border-gray-200 text-gray-600 hover:bg-white hover:border-gray-300 hover:shadow-md active:scale-95"}
            `,title:"Last Page",children:(0,t.jsx)($.ChevronsRight,{className:"w-4 h-4"})})]})]})})]})]}),x&&(0,t.jsx)(W,{transaction:x,config:el[p],transactionType:p,onClose:()=>g(null),onApprove:()=>ev(x._id,"approve"),onReject:()=>ev(x._id,"reject"),getApprovalStatus:ed,getIndividualApprovalStatus:ei,userRole:e,canApprove:eb(x)})]})}],31353)}]);