(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43184,e=>{"use strict";var a=e.i(43476),s=e.i(37902),t=e.i(71645),r=e.i(55436),l=e.i(84614),i=e.i(37727),n=e.i(43531),c=e.i(88844),d=e.i(35408),o=e.i(15788),x=e.i(63209),b=e.i(63059),m=e.i(87316),h=e.i(46897),g=e.i(43432),j=e.i(63488),u=e.i(88081),p=e.i(31278),f=e.i(21557),y=e.i(72520),N=e.i(83086),w=e.i(52571),v=e.i(50439),k=e.i(78583),S=e.i(98919),I=e.i(21218),$=e.i(79521),_=e.i(3496),C=e.i(82293),F=e.i(18836),W=e.i(92270),q=e.i(25652),Q=e.i(7486),P=e.i(33785),A=e.i(5766),T=e.i(31795);e.s(["default",0,()=>{let[e,U]=(0,t.useState)(""),[D,L]=(0,t.useState)("name"),[M,R]=(0,t.useState)([]),[B,E]=(0,t.useState)(null),[z,Y]=(0,t.useState)(!1),[G,O]=(0,t.useState)(!1),[V,H]=(0,t.useState)([]),[K,X]=(0,t.useState)(null),[J,Z]=(0,t.useState)(!1),[ee,ea]=(0,t.useState)(null),[es,et]=(0,t.useState)(""),[er,el]=(0,t.useState)(""),[ei,en]=(0,t.useState)(!1),[ec,ed]=(0,t.useState)(1),[eo,ex]=(0,t.useState)(!1),[eb,em]=(0,t.useState)(""),[eh,eg]=(0,t.useState)([]),[ej,eu]=(0,t.useState)(null),[ep,ef]=(0,t.useState)(!1),[ey,eN]=(0,t.useState)(null),[ew,ev]=(0,t.useState)(null),ek=[{id:"personal_use",label:"Personal Use",icon:l.User,color:"blue"},{id:"sale",label:"Direct Sale",icon:d.TrendingDown,color:"emerald"},{id:"transfer",label:"Transfer",icon:o.Truck,color:"purple"},{id:"processing",label:"Processing",icon:c.Package,color:"orange"},{id:"other",label:"Other",icon:k.FileText,color:"gray"}];(0,t.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e)return;let a=await fetch(`${T.default}/user/profile`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json();eN(e.user?.role||e.role),console.log(e.warehouseId),ev(e.user?.warehouseId||e.warehouseId)}}catch(e){console.error("Error fetching user profile:",e)}})(),eS()},[]);let eS=async()=>{ef(!0);try{let e=await fetch(`${T.default}/warehouse/inventory`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw Error("Failed to fetch warehouse inventory");let a=await e.json();if(a.success&&a.warehouses)if(eg(a.warehouses),ew){let e=a.warehouses.find(e=>e.warehouseId===ew);e&&eu(e)}else 1===a.warehouses.length&&eu(a.warehouses[0]);else if(a.warehouseId&&a.categories){let e={warehouseId:a.warehouseId,warehouseName:a.warehouseName,warehouseLocation:a.warehouseLocation,categories:a.categories};eg([e]),eu(e)}}catch(e){console.error("Error fetching warehouse inventory:",e),A.default.error("Failed to load warehouse inventory")}finally{ef(!1)}};(0,t.useEffect)(()=>{if(ew&&eh.length>0){let e=eh.find(e=>e.warehouseId===ew);e&&eu(e)}},[ew,eh]);let eI=e=>{if(!ej)return 0;let a=ej.categories?.find(a=>a.category_id===e);return a?Math.max(0,(a.deposit?.completed?.qty||0)-(a.withdraw?.completed||0)-(a.sell?.completed?.qty||0)):0},e$=()=>K?Math.min(parseFloat(K.quantity)||0,eI(K.category_id||K.grain_id)):0,e_=async e=>{let a;if(e.length<2)return void R([]);Y(!0);let s=(a=e.trim()).includes("@")?"email":/^[\d\s\-\+]+$/.test(a)&&a.replace(/\D/g,"").length>=7?"phone_number":/^SGB\d{10}$/i.test(a)?"userId":"name";L(s);try{let a=`${s}=${encodeURIComponent(e)}`,t=await fetch(`${T.default}/user/finduserdetails?${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!t.ok)throw Error("Failed to search users");let r=await t.json();r.users&&Array.isArray(r.users)?R(r.users):r.user?R([r.user]):R([]),O(!0)}catch(e){console.error("Search error:",e),R([]),O(!0)}finally{Y(!1)}},eC=async e=>{Z(!0);try{let a=await fetch(`${T.default}/user/getallgraindeposite?farmerId=${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok)throw Error("Failed to fetch inventory");let s=await a.json(),t=(Array.isArray(s.deposits)?s.deposits:[]).map(e=>{let a=e.category_id||e.grain_id,s=ej?eI(a):Number(e.total_quantity??0);return{category_id:a,grain_id:e.grain_id||a,grain_type:e.grain_type||"Unknown",quality:e.quality||"Standard",quantity:Number(e.total_quantity??0),warehouseAvailable:s,deposited_date:e.deposited_date||null,last_transaction:e.last_transaction||null,warehouseId:ej?.warehouseId||e.warehouseId||null}}).filter(e=>e.quantity>0&&e.warehouseAvailable>0).sort((e,a)=>a.quantity-e.quantity);H(t),ed(2)}catch(e){console.error("Inventory fetch error:",e),A.default.error("Failed to load user inventory"),H([])}finally{Z(!1)}},eF=async e=>{try{let a=await fetch(`${T.default}/pricehistory/pricehistorybygrain?id=${e}`);if(!a.ok)throw Error("Failed to fetch price");let s=await a.json();ea(s)}catch(e){console.error("Price fetch error:",e),A.default.error("Failed to load today's price"),ea(null)}};(0,t.useEffect)(()=>{let a=setTimeout(()=>{e?e_(e):(R([]),O(!1))},500);return()=>clearTimeout(a)},[e]),(0,t.useEffect)(()=>{K&&(eF(K.grain_id||K.category_id),ed(3))},[K]),(0,t.useEffect)(()=>{B&&ej&&eC(B._id||B.id)},[ej]);let eW=()=>es&&ee?.price?(parseFloat(es)*parseFloat(ee.price)).toFixed(2):0,eq=async()=>{if(!es||!er)return void A.default.error("Please fill all required fields");let e=e$();if(parseFloat(es)>e)return void A.default.error(`Withdrawal quantity cannot exceed ${e} Qtl (warehouse limit)`);if(!ej)return void A.default.error("Please select a warehouse");en(!0);try{let e={farmerId:B._id||B.id,grain_id:K.grain_id||K.category_id,quantity:es,price:ee?.price||0,total_value:eW(),WarehouseId:ej.warehouseId,reason:er,notes:eb};if(!(await fetch(`${T.default}/withdrawal/grainwithdrawal`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)})).ok)throw Error("Failed to process withdrawal");A.default.success("Withdrawal processed successfully!"),await eS(),E(null),H([]),X(null),et(""),el(""),em(""),ea(null),ed(1),ex(!1)}catch(e){console.error("Withdrawal error:",e),A.default.error("Failed to process withdrawal")}finally{en(!1)}},eQ="manager"!==ey&&"supervisor"!==ey&&"admin"!==ey||!ew,eP=({label:e,value:s,highlight:t})=>(0,a.jsxs)("div",{className:`${t?"bg-white/80":"bg-white/50"} rounded-xl p-2.5`,children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-0.5",children:e}),(0,a.jsx)("p",{className:`font-semibold truncate ${t?"text-orange-600":"text-gray-900"}`,children:s||"-"})]});return(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 min-h-screen bg-gradient-to-br from-slate-50 via-white to-red-50/30",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 fixed inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-1/4 -left-20 w-72 h-72 bg-red-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-3/4 -right-20 w-72 h-72 bg-orange-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float animation-delay-2000"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute bottom-1/4 left-1/3 w-72 h-72 bg-yellow-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float animation-delay-4000"})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8 max-w-7xl",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 p-4 bg-gradient-to-br from-red-500 to-orange-600 rounded-2xl shadow-lg",children:(0,a.jsx)($.PackageMinus,{className:"h-8 w-8 text-white"})}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 absolute -top-1 -right-1 flex h-3 w-3",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,a.jsx)("h1",{className:"jsx-5b01246a782bc537 text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Grain Withdrawal"}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-600 mt-1",children:"Process grain withdrawals from farmer inventory"})]})]}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 hidden lg:flex items-center bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-2",children:[{step:1,label:"Search Farmer",icon:r.Search},{step:2,label:"Select Grain",icon:c.Package},{step:3,label:"Confirm Withdrawal",icon:F.MinusCircle}].map((e,s)=>(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center",children:[(0,a.jsxs)("div",{className:`jsx-5b01246a782bc537 flex items-center px-4 py-2.5 rounded-xl transition-all duration-500 ${ec>=e.step?"bg-white shadow-md":""}`,children:[(0,a.jsxs)("div",{className:`jsx-5b01246a782bc537 relative flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-500 ${ec>=e.step?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-lg":"bg-gray-200 text-gray-500"}`,children:[ec>e.step?(0,a.jsx)(n.Check,{className:"h-5 w-5"}):(0,a.jsx)(e.icon,{className:"h-5 w-5"}),ec===e.step&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -inset-0.5 bg-gradient-to-r from-red-500 to-orange-600 rounded-xl blur opacity-30 animate-pulse"})]}),(0,a.jsx)("span",{className:`jsx-5b01246a782bc537 ml-3 text-sm font-medium hidden xl:inline transition-all duration-500 ${ec>=e.step?"text-gray-900":"text-gray-500"}`,children:e.label})]}),s<2&&(0,a.jsx)(b.ChevronRight,{className:`h-5 w-5 mx-2 transition-all duration-500 ${ec>e.step?"text-red-500":"text-gray-300"}`})]},e.step))}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 flex lg:hidden justify-center gap-2",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:`jsx-5b01246a782bc537 h-2 rounded-full transition-all duration-500 ${ec>=e?"w-12 bg-gradient-to-r from-red-500 to-orange-600":"w-2 bg-gray-300"}`},e))})]})}),(0,a.jsx)(()=>(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"p-2.5 bg-gradient-to-br from-slate-600 to-gray-700 rounded-xl shadow-lg",children:(0,a.jsx)(Q.Building2,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Select Warehouse"}),ej&&(0,a.jsxs)("span",{className:"ml-auto px-4 py-1.5 bg-slate-100 text-slate-700 rounded-full text-sm font-medium flex items-center gap-1.5",children:[(0,a.jsx)(n.Check,{className:"h-4 w-4"}),ej.warehouseName]})]}),ep?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(p.Loader2,{className:"h-8 w-8 animate-spin text-slate-500"}),(0,a.jsx)("p",{className:"text-gray-600 mt-3",children:"Loading warehouses..."})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:eh.map(e=>{let s=ej?.warehouseId===e.warehouseId,t=e.warehouseId===ew,r=e.categories?.length||0,l=e.categories?.reduce((e,a)=>e+Math.max(0,(a.deposit?.completed?.qty||0)-(a.withdraw?.completed||0)-(a.sell?.completed?.qty||0)),0)||0;return(0,a.jsxs)("div",{onClick:()=>eQ&&void(eu(e),X(null),et("")),className:`group relative cursor-pointer transition-all duration-300 ${!eQ&&!t?"opacity-50 cursor-not-allowed":""}`,children:[(0,a.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br rounded-2xl blur-md transition-all duration-300 ${s?"from-slate-400 to-gray-400 opacity-40":"from-gray-200 to-gray-300 opacity-0 group-hover:opacity-30"}`}),(0,a.jsxs)("div",{className:`relative p-5 rounded-2xl border-2 backdrop-blur-sm transition-all duration-300 ${s?"border-slate-500 bg-gradient-to-br from-slate-50 to-gray-50":"border-gray-200 bg-white hover:border-slate-300"}`,children:[s&&(0,a.jsx)("div",{className:"absolute top-3 right-3 animate-bounceIn",children:(0,a.jsx)("div",{className:"bg-gradient-to-br from-slate-600 to-gray-700 rounded-full p-1.5 shadow-lg",children:(0,a.jsx)(n.Check,{className:"h-4 w-4 text-white"})})}),t&&(0,a.jsx)("div",{className:"absolute top-3 left-3",children:(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium",children:"Assigned"})}),(0,a.jsxs)("div",{className:"flex items-start gap-3 mb-4 mt-2",children:[(0,a.jsx)("div",{className:`p-3 rounded-xl transition-all duration-300 ${s?"bg-gradient-to-br from-slate-600 to-gray-700 shadow-lg":"bg-gradient-to-br from-gray-100 to-gray-200"}`,children:(0,a.jsx)(P.Warehouse,{className:`h-6 w-6 ${s?"text-white":"text-gray-600"}`})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 truncate",children:e.warehouseName}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 flex items-center gap-1 mt-0.5",children:[(0,a.jsx)(h.MapPin,{className:"h-3.5 w-3.5"}),e.warehouseLocation]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Categories"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:r})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Total Stock"}),(0,a.jsxs)("p",{className:"font-semibold text-gray-900",children:[l," Qtl"]})]})]})]})]},e.warehouseId)})}),!ep&&0===eh.length&&(0,a.jsxs)("div",{className:"text-center py-12 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(Q.Building2,{className:"h-8 w-8 text-gray-400"})}),(0,a.jsx)("p",{className:"text-gray-700 font-semibold",children:"No warehouses available"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Please contact administrator"})]})]}),{className:"jsx-5b01246a782bc537"}),ej&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6 animate-fadeIn",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 p-2.5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg",children:(0,a.jsx)(r.Search,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("h2",{className:"jsx-5b01246a782bc537 text-xl font-bold text-gray-800",children:"Search Farmer"}),B&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 ml-auto px-4 py-1.5 bg-blue-100 text-blue-700 rounded-full text-sm font-medium flex items-center gap-1.5",children:[(0,a.jsx)(n.Check,{className:"h-4 w-4"}),"Farmer Selected"]})]}),B?(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border-2 border-blue-200 p-6 animate-fadeIn",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white font-bold text-xl shadow-lg",children:B.name?.charAt(0).toUpperCase()||"F"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -bottom-1 -right-1 bg-white rounded-full p-1",children:(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 bg-blue-500 rounded-full p-1",children:(0,a.jsx)(n.Check,{className:"h-3 w-3 text-white"})})})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 font-bold text-xl text-gray-900",children:B.name}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-600 text-sm lg:text-base",children:B.email}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-wrap items-center gap-3 mt-1",children:[B.phone_number&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 flex items-center gap-1",children:[(0,a.jsx)(g.Phone,{className:"h-4 w-4"}),B.phone_number]}),B.userId&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-blue-600 font-medium flex items-center gap-1",children:[(0,a.jsx)(u.Hash,{className:"h-4 w-4"}),B.userId]})]})]})]}),(0,a.jsx)("button",{onClick:()=>{E(null),H([]),X(null),ed(1)},className:"jsx-5b01246a782bc537 p-3 hover:bg-red-50 rounded-xl transition-all duration-200 group",children:(0,a.jsx)(i.X,{className:"h-6 w-6 text-gray-500 group-hover:text-red-500 transition-colors"})})]})}):(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative group",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -inset-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl blur opacity-20 group-hover:opacity-30 transition duration-300"}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)(r.Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, email, phone, or farmer ID...",value:e,onChange:e=>U(e.target.value),onFocus:()=>e&&O(!0),className:"jsx-5b01246a782bc537 w-full pl-12 pr-12 py-4 bg-white rounded-2xl border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all duration-300 text-base lg:text-lg font-medium placeholder-gray-400"}),z&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute right-4 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)(p.Loader2,{className:"animate-spin h-5 w-5 text-blue-500"})})]})]}),e&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 mt-3 flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 px-3 py-1.5 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 text-blue-700 rounded-full text-xs font-medium flex items-center gap-1.5",children:["email"===D&&(0,a.jsx)(j.Mail,{className:"h-3.5 w-3.5"}),"phone_number"===D&&(0,a.jsx)(g.Phone,{className:"h-3.5 w-3.5"}),"userId"===D&&(0,a.jsx)(u.Hash,{className:"h-3.5 w-3.5"}),"name"===D&&(0,a.jsx)(l.User,{className:"h-3.5 w-3.5"}),"Searching by ",D.replace("_"," ")]}),(0,a.jsx)(N.Sparkles,{className:"h-4 w-4 text-yellow-500 animate-pulse"})]}),G&&M.length>0&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute z-40 w-full mt-3 bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-96 overflow-y-auto animate-slideDown",children:M.map((e,s)=>(0,a.jsxs)("div",{onClick:()=>{E(e),U(""),O(!1),R([]),eC(e._id||e.id)},className:"jsx-5b01246a782bc537 group px-5 py-4 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 cursor-pointer flex items-center gap-4 transition-all duration-200 border-b border-gray-100 last:border-b-0 first:rounded-t-2xl last:rounded-b-2xl",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:shadow-xl transition-all duration-200",children:e.name?.charAt(0).toUpperCase()||"F"}),e.isActive&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:e.name||"Unknown Farmer"}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-600 truncate",children:e.email||"No email"}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-wrap items-center gap-3 mt-1",children:[e.phone_number&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-xs text-gray-500 flex items-center gap-1",children:[(0,a.jsx)(g.Phone,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 truncate",children:e.phone_number})]}),e.userId&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-xs text-blue-600 font-medium flex items-center gap-1",children:[(0,a.jsx)(u.Hash,{className:"h-3 w-3"}),e.userId]})]})]}),(0,a.jsx)(b.ChevronRight,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-500 group-hover:translate-x-1 transition-all duration-200 flex-shrink-0"})]},e._id||e.id||s))}),G&&e&&0===M.length&&!z&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute z-40 w-full mt-3 bg-white rounded-2xl shadow-2xl border border-gray-200 p-8 animate-slideDown",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(l.User,{className:"h-8 w-8 text-gray-400"})}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-900 font-semibold",children:"No farmers found"}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 mt-1",children:"Try searching with different criteria"})]})})]})})]}),B&&ec>=2&&ej&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6 animate-fadeIn",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 p-2.5 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl shadow-lg",children:(0,a.jsx)(c.Package,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("h2",{className:"jsx-5b01246a782bc537 text-xl font-bold text-gray-800",children:"Available Inventory"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 px-3 py-1 bg-gray-100 text-gray-600 rounded-lg text-sm font-medium flex items-center gap-1.5",children:[(0,a.jsx)(Q.Building2,{className:"h-4 w-4"}),ej.warehouseName]}),K&&(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 ml-auto px-4 py-1.5 bg-purple-100 text-purple-700 rounded-full text-sm font-medium flex items-center gap-1.5",children:[(0,a.jsx)(n.Check,{className:"h-4 w-4"}),"Grain Selected"]})]}),J?(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-col items-center justify-center py-20",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-20 h-20 border-4 border-purple-200 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-0 left-0 w-20 h-20 border-4 border-purple-500 rounded-full animate-spin border-t-transparent"})]}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-600 mt-4",children:"Loading inventory..."})]}):V.length>0?(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:V.map((e,s)=>{let t=eI(e.category_id),r=Math.min(e.quantity,t),i=t<e.quantity;return(0,a.jsxs)("div",{onClick:()=>r>0&&void(X(e),et(""),el(""),em("")),className:`jsx-5b01246a782bc537 group relative cursor-pointer transition-all duration-300 transform hover:scale-105 ${K===e?"scale-105":""} ${r<=0?"opacity-50 cursor-not-allowed":""}`,children:[(0,a.jsx)("div",{className:`jsx-5b01246a782bc537 absolute inset-0 bg-gradient-to-br rounded-2xl blur-md transition-all duration-300 ${K===e?"from-purple-400 to-pink-400 opacity-40":"from-gray-200 to-gray-300 opacity-0 group-hover:opacity-30"}`}),(0,a.jsxs)("div",{className:`jsx-5b01246a782bc537 relative p-6 rounded-2xl border-2 backdrop-blur-sm transition-all duration-300 ${K===e?"border-purple-400 bg-gradient-to-br from-purple-50 to-pink-50":"border-gray-200 bg-white hover:border-purple-300 hover:bg-gradient-to-br hover:from-purple-50/50 hover:to-pink-50/50"}`,children:[K===e&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-3 right-3 animate-bounceIn",children:(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full p-1.5 shadow-lg",children:(0,a.jsx)(n.Check,{className:"h-4 w-4 text-white"})})}),i&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-3 left-3",children:(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 px-2 py-1 bg-amber-100 text-amber-700 rounded-lg text-xs font-medium flex items-center gap-1",children:[(0,a.jsx)(x.AlertCircle,{className:"h-3 w-3"}),"Limited Stock"]})}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-start gap-3 mb-4 mt-2",children:[(0,a.jsx)("div",{className:`jsx-5b01246a782bc537 p-3 rounded-xl transition-all duration-300 ${K===e?"bg-gradient-to-br from-purple-500 to-pink-600 shadow-lg":"bg-gradient-to-br from-gray-100 to-gray-200 group-hover:from-purple-100 group-hover:to-pink-100"}`,children:(0,a.jsx)(v.Wheat,{className:`h-6 w-6 transition-colors ${K===e?"text-white":"text-gray-600 group-hover:text-purple-600"}`})}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"jsx-5b01246a782bc537 font-bold text-gray-900 truncate",children:e.grain_type}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-2 mt-1",children:(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 px-2 py-0.5 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium",children:e.quality})})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-3",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-2 pb-3 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(l.User,{className:"h-4 w-4"}),"User's Stock"]}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-gray-900",children:[e.quantity," Qtl"]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(Q.Building2,{className:"h-4 w-4"}),"Warehouse Stock"]}),(0,a.jsxs)("span",{className:`jsx-5b01246a782bc537 font-bold ${t<e.quantity?"text-amber-600":"text-gray-900"}`,children:[t," Qtl"]})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center pt-1",children:[(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(_.Scale,{className:"h-4 w-4"}),"Can Withdraw"]}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-lg text-purple-600",children:[r," Qtl"]})]})]})]})]},s)})}):(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center py-20 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-24 h-24 bg-gradient-to-br from-gray-200 to-gray-300 rounded-3xl flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(c.Package,{className:"h-12 w-12 text-gray-400"})}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-700 font-semibold text-lg",children:"No inventory found"}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 mt-2",children:"This farmer has no grain available in this warehouse"})]})]}),K&&ec>=3&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 animate-fadeIn",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 p-2.5 bg-gradient-to-br from-red-500 to-orange-600 rounded-xl shadow-lg",children:(0,a.jsx)(d.TrendingDown,{className:"h-5 w-5 text-white"})}),(0,a.jsx)("h2",{className:"jsx-5b01246a782bc537 text-xl font-bold text-gray-800",children:"Withdrawal Details"})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[(0,a.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,a.jsx)(c.Package,{className:"h-5 w-5 text-blue-600"}),"Selected Grain"]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-3",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Grain Type"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 font-semibold text-gray-900",children:K.grain_type})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Quality"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 font-semibold text-gray-900",children:K.quality})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2 border-t border-blue-200/50 pt-3",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"User's Stock"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-blue-600",children:[K.quantity," Qtl"]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Warehouse Stock"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-gray-700",children:[eI(K.category_id)," Qtl"]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2 bg-purple-100 rounded-xl px-3",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-purple-700 font-medium",children:"Max Withdrawal"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-purple-700 text-lg",children:[e$()," Qtl"]})]})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl p-6 border border-emerald-200",children:[(0,a.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,a.jsx)(q.TrendingUp,{className:"h-5 w-5 text-emerald-600"}),"Today's Market Price"]}),ee?(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center py-4",children:[(0,a.jsxs)("p",{className:"jsx-5b01246a782bc537 text-5xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:["₹",ee.price]}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 mt-2",children:"per quintal"}),ee.date&&(0,a.jsxs)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-400 mt-3 flex items-center justify-center gap-1",children:[(0,a.jsx)(m.Calendar,{className:"h-3.5 w-3.5"}),"Updated: ",new Date(ee.date).toLocaleDateString()]})]}):(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center py-8",children:[(0,a.jsx)(p.Loader2,{className:"h-8 w-8 animate-spin text-emerald-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500",children:"Loading price..."})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6 border border-amber-200",children:[(0,a.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,a.jsx)(I.Activity,{className:"h-5 w-5 text-amber-600"}),"Stock Status"]}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600",children:"Warehouse Level"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm font-semibold text-gray-900",children:[eI(K.category_id)," Qtl"]})]}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,a.jsx)("div",{style:{width:"100%"},className:"jsx-5b01246a782bc537 bg-gradient-to-r from-amber-500 to-orange-500 h-3 rounded-full transition-all duration-500"})}),es&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 mt-3",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600",children:"After Withdrawal"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm font-semibold text-orange-600",children:[(eI(K.category_id)-parseFloat(es)).toFixed(2)," Qtl"]})]}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,a.jsx)("div",{style:{width:`${(eI(K.category_id)-parseFloat(es))/eI(K.category_id)*100}%`},className:"jsx-5b01246a782bc537 bg-gradient-to-r from-red-500 to-orange-500 h-3 rounded-full transition-all duration-500"})})]})]})})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,a.jsxs)("label",{className:"jsx-5b01246a782bc537 block text-sm font-semibold text-gray-700 mb-2",children:["Withdrawal Quantity (Quintal) ",(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,a.jsx)("input",{type:"number",min:"0",max:e$(),step:"0.01",placeholder:`Max: ${e$()} Qtl`,value:es,onChange:e=>{let a=e.target.value,s=e$();(""===a||parseFloat(a)>=0&&parseFloat(a)<=s)&&et(a)},className:"jsx-5b01246a782bc537 w-full px-4 py-3.5 pr-16 bg-white border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-red-500/10 focus:border-red-500 transition-all duration-200 text-lg font-medium"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-500 font-medium",children:"Qtl"})})]}),es&&(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 mt-2 p-3 bg-orange-50 rounded-xl border border-orange-200",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-start gap-2",children:[(0,a.jsx)(w.Info,{className:"h-4 w-4 text-orange-600 mt-0.5"}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex-1 text-sm",children:[(0,a.jsxs)("p",{className:"jsx-5b01246a782bc537 text-orange-800 font-medium",children:["Remaining after withdrawal: ",(e$()-parseFloat(es)).toFixed(2)," Qtl (from warehouse)"]}),parseFloat(es)>.8*e$()&&(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-orange-600 text-xs mt-1",children:"You're withdrawing more than 80% of available stock"})]})]})}),(0,a.jsxs)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-500 mt-1",children:["Maximum withdrawal limited by: Min(User Stock: ",K.quantity," Qtl, Warehouse Stock: ",eI(K.category_id)," Qtl)"]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,a.jsxs)("label",{className:"jsx-5b01246a782bc537 block text-sm font-semibold text-gray-700 mb-2",children:["Withdrawal Reason ",(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-red-500",children:"*"})]}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 grid grid-cols-2 gap-3",children:ek.map(e=>{let s=er===e.id;return(0,a.jsx)("button",{type:"button",onClick:()=>el(e.id),className:`jsx-5b01246a782bc537 p-3 rounded-xl border-2 transition-all duration-200 ${s?"border-orange-500 bg-orange-50 ring-2 ring-orange-500/20":"border-gray-200 hover:border-gray-300 bg-white"}`,children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-2",children:[(0,a.jsx)(e.icon,{className:`h-5 w-5 ${s?"text-orange-600":"text-gray-400"}`}),(0,a.jsx)("span",{className:`jsx-5b01246a782bc537 text-sm font-medium ${s?"text-gray-900":"text-gray-600"}`,children:e.label})]})},e.id)})})]}),es&&ee&&(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 border border-indigo-200 animate-slideUp",children:[(0,a.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,a.jsx)(f.Calculator,{className:"h-5 w-5 text-indigo-600"}),"Withdrawal Value"]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-3",children:[(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Quantity"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-medium text-gray-900",children:[es," Quintal"]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Rate per Quintal"}),(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 font-medium text-gray-900",children:["₹",ee.price]})]}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 border-t border-indigo-200 pt-3",children:(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700",children:"Total Value"}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 text-right",children:[(0,a.jsxs)("span",{className:"jsx-5b01246a782bc537 text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:["₹",eW()]}),(0,a.jsx)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-500 mt-0.5",children:"Market value at withdrawal"})]})]})})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,a.jsxs)("label",{className:"jsx-5b01246a782bc537 block text-sm font-semibold text-gray-700 mb-2",children:["Additional Notes ",(0,a.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-400",children:"(Optional)"})]}),(0,a.jsx)("textarea",{placeholder:"Enter any additional information...",rows:3,value:eb,onChange:e=>em(e.target.value),className:"jsx-5b01246a782bc537 w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-red-500/10 focus:border-red-500 transition-all duration-200 resize-none"})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex gap-3 pt-2",children:[(0,a.jsx)("button",{onClick:()=>{X(null),et(""),el(""),em(""),ed(2)},className:"jsx-5b01246a782bc537 flex-1 py-3.5 px-6 rounded-xl font-semibold border-2 border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Back"}),(0,a.jsxs)("button",{onClick:()=>ex(!0),disabled:!es||!er||ei||parseFloat(es)>e$(),className:"jsx-5b01246a782bc537 flex-1 relative overflow-hidden group rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 absolute inset-0 bg-gradient-to-r from-red-600 to-orange-600 transition-transform group-hover:scale-105"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 relative flex items-center justify-center gap-2 px-6 py-3.5 text-white font-semibold",children:ei?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Loader2,{className:"h-5 w-5 animate-spin"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537",children:"Processing..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($.PackageMinus,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"jsx-5b01246a782bc537",children:"Process Withdrawal"}),(0,a.jsx)(y.ArrowRight,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]})})]})]}),(0,a.jsxs)("div",{className:"jsx-5b01246a782bc537 flex gap-3 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[(0,a.jsx)(S.Shield,{className:"h-5 w-5 text-gray-600 flex-shrink-0 mt-0.5"}),(0,a.jsx)("div",{className:"jsx-5b01246a782bc537 flex-1",children:(0,a.jsxs)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-600 leading-relaxed",children:["This withdrawal will be permanently recorded from ",(0,a.jsx)("strong",{className:"jsx-5b01246a782bc537",children:ej?.warehouseName})," with today's market value of ₹",eW(),". The grain will be removed from both the farmer's inventory and warehouse stock immediately."]})})]})]})]})]})]}),(0,a.jsx)(()=>{if(!eo)return null;e$();let e=K?(parseFloat(K.quantity)-parseFloat(es||0)).toFixed(2):"0",s=K?(eI(K.category_id)-parseFloat(es||0)).toFixed(2):"0",t=ek.find(e=>e.id===er);return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md",onClick:()=>ex(!1)}),(0,a.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] bg-white rounded-3xl shadow-2xl overflow-auto animate-modalSlide no-scrollbar",children:[(0,a.jsx)("div",{className:"h-2 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500"}),(0,a.jsxs)("div",{className:"p-6 md:p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-red-500 to-orange-600 rounded-2xl shadow-lg",children:(0,a.jsx)($.PackageMinus,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Confirm Withdrawal"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:"Review withdrawal details before confirming"})]})]}),(0,a.jsx)("button",{onClick:()=>ex(!1),className:"p-2.5 hover:bg-gray-100 rounded-xl transition-colors",children:(0,a.jsx)(i.X,{className:"h-5 w-5 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 rounded-2xl p-5 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(Q.Building2,{className:"h-5 w-5 text-slate-600"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:"Warehouse Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(eP,{label:"Warehouse",value:ej?.warehouseName}),(0,a.jsx)(eP,{label:"Location",value:ej?.warehouseLocation})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-5 border border-blue-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(C.UserCheck,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:"Farmer Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(eP,{label:"Name",value:B?.name}),(0,a.jsx)(eP,{label:"ID",value:B?.userId}),(0,a.jsx)(eP,{label:"Email",value:B?.email}),(0,a.jsx)(eP,{label:"Phone",value:B?.phone_number||"-"})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-5 border border-purple-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(v.Wheat,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:"Grain Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,a.jsx)(eP,{label:"Type",value:K?.grain_type}),(0,a.jsx)(eP,{label:"Quality",value:K?.quality}),(0,a.jsx)(eP,{label:"User's Stock",value:`${K?.quantity} Qtl`}),(0,a.jsx)(eP,{label:"Warehouse Stock",value:`${eI(K?.category_id)} Qtl`}),(0,a.jsx)(eP,{label:"Withdrawing",value:`${es||0} Qtl`,highlight:!0}),(0,a.jsx)(eP,{label:"Rate",value:`₹${ee?.price||0}/Qtl`})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 rounded-2xl p-5 border border-amber-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(I.Activity,{className:"h-5 w-5 text-amber-600"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:"Stock Impact"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"bg-white/70 rounded-xl p-3",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"User's Remaining"}),(0,a.jsxs)("p",{className:"font-bold text-lg text-gray-900",children:[e," Qtl"]})]}),(0,a.jsxs)("div",{className:"bg-white/70 rounded-xl p-3",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Warehouse Remaining"}),(0,a.jsxs)("p",{className:"font-bold text-lg text-gray-900",children:[s," Qtl"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl p-5 border border-emerald-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(f.Calculator,{className:"h-5 w-5 text-emerald-600"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:"Withdrawal Value"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Quantity × Rate"}),(0,a.jsxs)("span",{className:"text-gray-900 font-medium",children:[es||0," × ₹",ee?.price||0]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 border-t border-emerald-200",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-800",children:"Total Value"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-emerald-600",children:["₹",eW()]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-5 border border-orange-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(W.LogOut,{className:"h-5 w-5 text-orange-600"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800",children:"Withdrawal Information"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[t&&(0,a.jsx)(t.icon,{className:"h-5 w-5 text-orange-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Reason"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:t?.label})]})]}),eb&&(0,a.jsxs)("div",{className:"bg-white/70 rounded-xl p-3",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Additional Notes"}),(0,a.jsx)("p",{className:"text-sm text-gray-700",children:eb})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 p-4 bg-red-50 border border-red-200 rounded-xl",children:[(0,a.jsx)(x.AlertCircle,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-red-800 font-medium",children:"Important: This action cannot be reversed"}),(0,a.jsxs)("p",{className:"text-xs text-red-700 mt-1",children:[es||0," quintals (Value: ₹",eW(),") will be permanently removed from both the farmer's inventory and warehouse stock."]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>ex(!1),className:"flex-1 py-3.5 px-6 rounded-xl font-semibold border-2 border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Cancel"}),(0,a.jsx)("button",{onClick:eq,disabled:ei,className:"flex-1 py-3.5 px-6 rounded-xl font-semibold bg-gradient-to-r from-red-600 to-orange-600 text-white hover:from-red-700 hover:to-orange-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg",children:ei?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Loader2,{className:"h-5 w-5 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Check,{className:"h-5 w-5"}),"Confirm Withdrawal"]})})]})]})]})]})},{className:"jsx-5b01246a782bc537"}),(0,a.jsx)(s.default,{id:"5b01246a782bc537",children:"@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}.animate-float.jsx-5b01246a782bc537{animation:6s ease-in-out infinite float}.animation-delay-2000.jsx-5b01246a782bc537{animation-delay:2s}.animation-delay-4000.jsx-5b01246a782bc537{animation-delay:4s}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-slideDown.jsx-5b01246a782bc537{animation:.3s ease-out slideDown}@keyframes slideUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-slideUp.jsx-5b01246a782bc537{animation:.3s ease-out slideUp}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.animate-fadeIn.jsx-5b01246a782bc537{animation:.5s ease-out fadeIn}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{transform:scale(1.05)}70%{transform:scale(.9)}to{opacity:1;transform:scale(1)}}.animate-bounceIn.jsx-5b01246a782bc537{animation:.6s cubic-bezier(.68,-.55,.265,1.55) bounceIn}@keyframes modalSlide{0%{opacity:0;transform:scale(.9)translateY(20px)}to{opacity:1;transform:scale(1)translateY(0)}}.animate-modalSlide.jsx-5b01246a782bc537{animation:.3s ease-out modalSlide}"})]})}])}]);