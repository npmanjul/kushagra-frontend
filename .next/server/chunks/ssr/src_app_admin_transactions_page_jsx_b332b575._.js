module.exports=[59112,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(83490),e=a.i(57894),f=a.i(68790),g=a.i(56738),h=a.i(90166),i=a.i(13749),j=a.i(50522),k=a.i(16201),l=a.i(62722),m=a.i(41710),n=a.i(46842),o=a.i(24987),p=a.i(41675),q=a.i(83497),r=a.i(69012),s=a.i(87532),t=a.i(69520),u=a.i(77156),v=a.i(84505),w=a.i(24669),x=a.i(18341),y=a.i(31746),z=a.i(70106);let A=(0,z.default)("calendar-range",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);var B=a.i(33508);let C=(0,z.default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var D=a.i(60779),E=a.i(5784),F=a.i(96221),G=a.i(70893);let H=(0,z.default)("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]),I=(0,z.default)("arrow-down-to-line",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]),J=(0,z.default)("arrow-up-from-line",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var K=a.i(66322),L=a.i(35050),M=a.i(4416),N=a.i(23821),O=a.i(18398),P=a.i(57425);let Q=({isOpen:a,onClose:d})=>{let[e,f]=(0,c.useState)({transaction_type:"",page:1,limit:10,start_date:"",end_date:"",status:"",search:"",min_amount:"",max_amount:"",grain_type:"",warehouse_id:""}),[g,h]=(0,c.useState)(!1),[n,p]=(0,c.useState)(!1),[u,v]=(0,c.useState)([]),[x,y]=(0,c.useState)({currentPage:1,limit:10,totalRecords:0,totalPages:0}),[z,A]=(0,c.useState)({sell:0,deposit:0,withdraw:0,loan:0}),[C,Q]=(0,c.useState)(!0),R=async()=>{h(!0);try{let a=((a=e)=>{let b=new URLSearchParams;return Object.entries(a).forEach(([a,c])=>{""!==c&&null!=c&&b.append(a,c)}),b.toString()})(),b=await fetch(`${D.default}/transaction/getalltransactions?${a}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),c=await b.json();c.success&&(v(c.data||[]),y(c.pagination||{currentPage:1,limit:10,totalRecords:0,totalPages:0}),A(c.transactionCounts||{sell:0,deposit:0,withdraw:0,loan:0}))}catch(a){console.error("Error fetching transactions:",a)}finally{h(!1)}},S=(a,b)=>{f(c=>({...c,[a]:b,page:1}))},T=a=>{a>=1&&a<=x.totalPages&&f(b=>({...b,page:a}))},U=Object.entries(e).filter(([a,b])=>""!==b&&!["page","limit"].includes(a)).length;return((0,c.useEffect)(()=>{a&&R()},[a,e.page,e.limit]),(0,c.useEffect)(()=>{let b=setTimeout(()=>{a&&R()},500);return()=>clearTimeout(b)},[e.search]),a)?(0,b.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:d}),(0,b.jsx)("div",{className:"fixed inset-2 md:inset-4 lg:inset-6 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"relative w-full h-full max-w-[1600px] mx-auto flex flex-col bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,b.jsx)("div",{className:"flex-shrink-0 bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-2.5 bg-white/20 backdrop-blur-sm rounded-xl",children:(0,b.jsx)(r.Filter,{className:"h-5 w-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-white",children:"Transaction Explorer"}),(0,b.jsx)("p",{className:"text-sm text-white/70",children:"Filter, view and export transactions"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"hidden lg:flex items-center gap-2 mr-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/10 rounded-lg",children:[(0,b.jsx)(I,{className:"h-4 w-4 text-green-300"}),(0,b.jsx)("span",{className:"text-white text-sm font-medium",children:z.deposit})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/10 rounded-lg",children:[(0,b.jsx)(J,{className:"h-4 w-4 text-orange-300"}),(0,b.jsx)("span",{className:"text-white text-sm font-medium",children:z.withdraw})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/10 rounded-lg",children:[(0,b.jsx)(w.TrendingUp,{className:"h-4 w-4 text-blue-300"}),(0,b.jsx)("span",{className:"text-white text-sm font-medium",children:z.sell})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/10 rounded-lg",children:[(0,b.jsx)(K.Banknote,{className:"h-4 w-4 text-purple-300"}),(0,b.jsx)("span",{className:"text-white text-sm font-medium",children:z.loan})]})]}),(0,b.jsxs)("button",{onClick:()=>Q(!C),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${C?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[(0,b.jsx)(H,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Filters"}),U>0&&(0,b.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${C?"bg-purple-100 text-purple-600":"bg-white/30 text-white"}`,children:U})]}),(0,b.jsx)("button",{onClick:()=>(0,P.default)({data:u,service:"transactions"}),className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-xl text-sm font-medium transition-all disabled:opacity-50",children:(0,b.jsx)("span",{className:"hidden sm:inline",children:"Download PDF"})}),(0,b.jsx)("button",{onClick:d,className:"p-2 hover:bg-white/20 rounded-xl text-white/80 hover:text-white transition-colors",children:(0,b.jsx)(B.X,{className:"h-5 w-5"})})]})]})}),C&&(0,b.jsx)("div",{className:"flex-shrink-0 bg-gray-50 border-b px-6 py-4",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(s.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by farmer name, phone, email, or transaction ID...",value:e.search,onChange:a=>S("search",a.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("label",{className:"absolute -top-2 left-3 bg-gray-50 px-1 text-xs text-gray-500",children:"Type"}),(0,b.jsx)("select",{value:e.transaction_type,onChange:a=>S("transaction_type",a.target.value),className:"w-full appearance-none px-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm pr-10",children:[{value:"",label:"All Types"},{value:"deposit",label:"Deposit"},{value:"withdraw",label:"Withdraw"},{value:"sell",label:"Sell"},{value:"loan",label:"Loan"}].map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))}),(0,b.jsx)(E.ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("label",{className:"absolute -top-2 left-3 bg-gray-50 px-1 text-xs text-gray-500",children:"Status"}),(0,b.jsx)("select",{value:e.status,onChange:a=>S("status",a.target.value),className:"w-full appearance-none px-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm pr-10",children:[{value:"",label:"All Status"},{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"rejected",label:"Rejected"},{value:"failed",label:"Failed"}].map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))}),(0,b.jsx)(E.ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("label",{className:"absolute -top-2 left-3 bg-gray-50 px-1 text-xs text-gray-500",children:"Grain"}),(0,b.jsx)("select",{value:e.grain_type,onChange:a=>S("grain_type",a.target.value),className:"w-full appearance-none px-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm pr-10",children:[{value:"",label:"All Grains"},{value:"Wheat",label:"Wheat"},{value:"Rice",label:"Rice"},{value:"Corn",label:"Corn"},{value:"Barley",label:"Barley"},{value:"Soybean",label:"Soybean"},{value:"Oats",label:"Oats"}].map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))}),(0,b.jsx)(E.ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("label",{className:"absolute -top-2 left-3 bg-gray-50 px-1 text-xs text-gray-500",children:"From"}),(0,b.jsx)("input",{type:"date",value:e.start_date,onChange:a=>S("start_date",a.target.value),className:"w-full px-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("label",{className:"absolute -top-2 left-3 bg-gray-50 px-1 text-xs text-gray-500",children:"To"}),(0,b.jsx)("input",{type:"date",value:e.end_date,onChange:a=>S("end_date",a.target.value),className:"w-full px-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"number",placeholder:"Min ₹",value:e.min_amount,onChange:a=>S("min_amount",a.target.value),className:"w-full px-3 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm"}),(0,b.jsx)("span",{className:"text-gray-400",children:"-"}),(0,b.jsx)("input",{type:"number",placeholder:"Max ₹",value:e.max_amount,onChange:a=>S("max_amount",a.target.value),className:"w-full px-3 py-2.5 bg-white border border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-100 transition-all outline-none text-sm"})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Quick:"}),(0,b.jsx)("button",{onClick:()=>{let a=new Date().toISOString().split("T")[0];f(b=>({...b,start_date:a,end_date:a,page:1}))},className:"px-3 py-1.5 text-xs bg-white border border-gray-200 hover:border-purple-300 hover:bg-purple-50 text-gray-600 hover:text-purple-600 rounded-lg transition-colors",children:"Today"}),(0,b.jsx)("button",{onClick:()=>{let a=new Date,b=new Date(a.getTime()-6048e5);f(c=>({...c,start_date:b.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0],page:1}))},className:"px-3 py-1.5 text-xs bg-white border border-gray-200 hover:border-purple-300 hover:bg-purple-50 text-gray-600 hover:text-purple-600 rounded-lg transition-colors",children:"Last 7 Days"}),(0,b.jsx)("button",{onClick:()=>{let a=new Date,b=new Date(a.getTime()-2592e6);f(c=>({...c,start_date:b.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0],page:1}))},className:"px-3 py-1.5 text-xs bg-white border border-gray-200 hover:border-purple-300 hover:bg-purple-50 text-gray-600 hover:text-purple-600 rounded-lg transition-colors",children:"Last 30 Days"}),(0,b.jsx)("div",{className:"w-px h-4 bg-gray-300 mx-1"}),(0,b.jsx)("button",{onClick:()=>S("transaction_type","deposit"),className:"px-3 py-1.5 text-xs bg-green-50 border border-green-200 hover:bg-green-100 text-green-600 rounded-lg transition-colors",children:"Deposits"}),(0,b.jsx)("button",{onClick:()=>S("transaction_type","sell"),className:"px-3 py-1.5 text-xs bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-600 rounded-lg transition-colors",children:"Sales"}),(0,b.jsx)("button",{onClick:()=>S("status","completed"),className:"px-3 py-1.5 text-xs bg-emerald-50 border border-emerald-200 hover:bg-emerald-100 text-emerald-600 rounded-lg transition-colors",children:"Completed"}),(0,b.jsx)("button",{onClick:()=>S("status","pending"),className:"px-3 py-1.5 text-xs bg-amber-50 border border-amber-200 hover:bg-amber-100 text-amber-600 rounded-lg transition-colors",children:"Pending"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{onClick:()=>{f({transaction_type:"",page:1,limit:10,start_date:"",end_date:"",status:"",search:"",min_amount:"",max_amount:"",grain_type:"",warehouse_id:""})},className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-xl transition-colors text-sm",children:[(0,b.jsx)(t.RefreshCw,{className:"h-4 w-4"}),"Reset"]}),(0,b.jsxs)("button",{onClick:R,disabled:g,className:"flex items-center gap-2 px-5 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-xl transition-colors text-sm font-medium shadow-lg shadow-purple-200",children:[g?(0,b.jsx)(F.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(r.Filter,{className:"h-4 w-4"}),"Apply Filters"]})]})]})]})}),(0,b.jsxs)("div",{className:"flex-shrink-0 px-6 py-3 bg-white border-b flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["Showing"," ",(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:u.length})," ","of"," ",(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:x.totalRecords?.toLocaleString()})," ","transactions"]}),U>0&&(0,b.jsxs)("span",{className:"text-xs text-purple-600 bg-purple-50 px-2 py-1 rounded-full",children:[U," filter",U>1?"s":""," ","active"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Per page:"}),(0,b.jsx)("select",{value:e.limit,onChange:a=>S("limit",parseInt(a.target.value)),className:"px-3 py-1.5 border border-gray-200 rounded-lg text-sm focus:border-purple-500 outline-none",children:[10,20,50,100].map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto",children:g?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full py-20",children:[(0,b.jsx)(F.Loader2,{className:"h-10 w-10 text-purple-600 animate-spin mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Loading transactions..."})]}):0===u.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full py-20",children:[(0,b.jsx)("div",{className:"p-4 bg-gray-100 rounded-full mb-4",children:(0,b.jsx)(q.Package,{className:"h-10 w-10 text-gray-400"})}),(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"No transactions found"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Try adjusting your filters"})]}):(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Farmer"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Type"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Grain Details"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Warehouse"}),(0,b.jsx)("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Approval"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Date"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:u.map((a,c)=>{var d,e,f;let g,h=(d=a.transaction_type,({deposit:{icon:(0,b.jsx)(I,{className:"h-4 w-4"}),color:"text-green-600",bgColor:"bg-green-100",label:"Deposit"},withdraw:{icon:(0,b.jsx)(J,{className:"h-4 w-4"}),color:"text-orange-600",bgColor:"bg-orange-100",label:"Withdraw"},sell:{icon:(0,b.jsx)(w.TrendingUp,{className:"h-4 w-4"}),color:"text-blue-600",bgColor:"bg-blue-100",label:"Sell"},loan:{icon:(0,b.jsx)(K.Banknote,{className:"h-4 w-4"}),color:"text-purple-600",bgColor:"bg-purple-100",label:"Loan"}})[d?.toLowerCase()]||{icon:(0,b.jsx)(q.Package,{className:"h-4 w-4"}),color:"text-gray-600",bgColor:"bg-gray-100",label:d||"Unknown"}),i=a.grain?.[0]||{};return(0,b.jsxs)("tr",{className:"hover:bg-purple-50/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[a.user_id?.farmerProfile?.user_image?(0,b.jsx)("img",{src:a.user_id.farmerProfile.user_image,alt:a.user_id.name,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-200"}):(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-indigo-500 flex items-center justify-center text-white font-semibold text-sm",children:a.user_id?.name?.charAt(0)||"U"}),(0,b.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:a.user_id?.name||"Unknown"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.user_id?.farmerProfile?.farmerId||a.user_id?.phone_number})]})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg ${h.bgColor}`,children:[(0,b.jsx)("span",{className:h.color,children:h.icon}),(0,b.jsx)("span",{className:`text-sm font-medium capitalize ${h.color}`,children:h.label})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${(e=a.transaction_status,({completed:"bg-emerald-100 text-emerald-700 border-emerald-200",pending:"bg-amber-100 text-amber-700 border-amber-200",processing:"bg-blue-100 text-blue-700 border-blue-200",cancelled:"bg-red-100 text-red-700 border-red-200"})[e?.toLowerCase()]||"bg-gray-100 text-gray-700 border-gray-200")}`,children:[(f=a.transaction_status,({completed:(0,b.jsx)(k.CheckCircle,{className:"h-3.5 w-3.5"}),pending:(0,b.jsx)(m.Clock,{className:"h-3.5 w-3.5"}),processing:(0,b.jsx)(F.Loader2,{className:"h-3.5 w-3.5 animate-spin"}),cancelled:(0,b.jsx)(l.XCircle,{className:"h-3.5 w-3.5"})})[f?.toLowerCase()]||null),(0,b.jsx)("span",{className:"capitalize",children:a.transaction_status||"Unknown"})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(L.Wheat,{className:"h-4 w-4 text-amber-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-800",children:i.category_id?.grain_type||"N/A"}),(0,b.jsxs)("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 rounded text-gray-600",children:["Grade ",i.category_id?.quality||"-"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(O.Scale,{className:"h-3 w-3"}),i.quantity_quintal||0," ",i.category_id?.unit||"quintal"]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(N.Droplets,{className:"h-3 w-3"}),i.moisture_content||0,"% moisture"]})]})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.warehouse_id?(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(G.Warehouse,{className:"h-4 w-4 text-blue-500 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-800",children:a.warehouse_id.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,b.jsx)(o.MapPin,{className:"h-3 w-3"}),a.warehouse_id.location]})]})]}):(0,b.jsx)("span",{className:"text-sm text-gray-400",children:"N/A"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:`font-bold text-sm ${"sell"===a.transaction_type||"withdraw"===a.transaction_type?"text-green-600":"text-gray-900"}`,children:(g=a.total_amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(g||0))}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["@ ₹",i.price_per_quintal||0,"/",i.category_id?.unit||"q"]})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[a.approval_status?.admin_approval?.status&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-green-600",children:[(0,b.jsx)(M.ShieldCheck,{className:"h-3 w-3"}),"Admin ✓"]}),a.approval_status?.manager_approval?.status&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-blue-600",children:[(0,b.jsx)(k.CheckCircle,{className:"h-3 w-3"}),"Manager ✓"]}),a.approval_status?.supervisor_approval?.status&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-purple-600",children:[(0,b.jsx)(k.CheckCircle,{className:"h-3 w-3"}),"Supervisor ✓"]}),!a.approval_status?.admin_approval?.status&&!a.approval_status?.manager_approval?.status&&!a.approval_status?.supervisor_approval?.status&&(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"Pending"})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-700",children:a.transaction_date?new Date(a.transaction_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.transaction_date?new Date(a.transaction_date).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):""})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.remarks?(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:a.remarks.replace(/_/g," ")})}):(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"No remarks"})})]},a._id||c)})})]})}),u.length>0&&(0,b.jsxs)("div",{className:"flex-shrink-0 px-6 py-4 bg-gray-50 border-t flex items-center justify-between",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Page"," ",(0,b.jsx)("span",{className:"font-medium",children:x.currentPage})," of"," ",(0,b.jsx)("span",{className:"font-medium",children:x.totalPages})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{onClick:()=>T(x.currentPage-1),disabled:1===x.currentPage,className:"flex items-center gap-1 px-4 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:bg-white hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,b.jsx)(i.ChevronLeft,{className:"h-4 w-4"}),"Previous"]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,x.totalPages)},(a,c)=>{let d;return d=x.totalPages<=5||x.currentPage<=3?c+1:x.currentPage>=x.totalPages-2?x.totalPages-4+c:x.currentPage-2+c,(0,b.jsx)("button",{onClick:()=>T(d),className:`w-10 h-10 rounded-lg text-sm font-medium transition-colors ${x.currentPage===d?"bg-purple-600 text-white shadow-lg shadow-purple-200":"text-gray-600 hover:bg-white border border-transparent hover:border-gray-200"}`,children:d},d)})}),(0,b.jsxs)("button",{onClick:()=>T(x.currentPage+1),disabled:x.currentPage===x.totalPages,className:"flex items-center gap-1 px-4 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:bg-white hover:border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",(0,b.jsx)(j.ChevronRight,{className:"h-4 w-4"})]})]})]})]})})]}):null};a.s(["default",0,()=>{let[a,z]=(0,c.useState)([]),[E,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(1),[M,N]=(0,c.useState)(""),[O,R]=(0,c.useState)({currentPage:1,limit:20,totalRecords:0,totalPages:1}),[S,T]=(0,c.useState)({sell:0,deposit:0,withdraw:0,loan:0}),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(""),[$,_]=(0,c.useState)(""),[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)(!1),[ae,af]=(0,c.useState)(!1),[ag,ah]=(0,c.useState)(null),[ai,aj]=(0,c.useState)(20),ak=[{key:"",label:"All",icon:r.Filter,color:"bg-gradient-to-r from-slate-600 to-slate-700",lightColor:"bg-slate-50",textColor:"text-slate-600",accent:"border-slate-400"},{key:"deposit",label:"Deposit",icon:e.ArrowDownCircle,color:"bg-gradient-to-r from-emerald-500 to-teal-500",lightColor:"bg-emerald-50",textColor:"text-emerald-600",accent:"border-emerald-400"},{key:"withdraw",label:"Withdraw",icon:f.ArrowUpCircle,color:"bg-gradient-to-r from-orange-400 to-amber-500",lightColor:"bg-orange-50",textColor:"text-orange-600",accent:"border-orange-400"},{key:"sell",label:"Sell",icon:h.DollarSign,color:"bg-gradient-to-r from-sky-500 to-blue-500",lightColor:"bg-sky-50",textColor:"text-sky-600",accent:"border-sky-400"},{key:"loan",label:"Loan",icon:g.Wallet,color:"bg-gradient-to-r from-violet-500 to-purple-500",lightColor:"bg-violet-50",textColor:"text-violet-600",accent:"border-violet-400"}];(0,c.useEffect)(()=>{al()},[I,K,ai]);let al=async()=>{F(!0),H(null);try{let a={transaction_type:I,limit:ai,page:K};Y&&(a.start_date=Y),$&&(a.end_date=$);let b=await d.default.get(`${D.default}/transaction/getalltransactions`,{params:a,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});z(b.data.data||[]),R(b.data.pagination||{currentPage:1,limit:20,totalRecords:0,totalPages:1}),T(b.data.transactionCounts||{sell:0,deposit:0,withdraw:0,loan:0}),N(b.data.warehouse)}catch(a){H("Failed to fetch transactions. Please try again."),console.error("Error fetching transactions:",a)}finally{F(!1)}},am=()=>{L(1),al()},an=()=>{Z(""),_(""),L(1),setTimeout(()=>al(),0)},ao=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",ap=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a||0),aq=a=>{let c={completed:{color:"bg-green-100 text-green-800 border-green-200",icon:k.CheckCircle,gradient:"bg-gradient-to-r from-green-500 to-emerald-500"},pending:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:m.Clock,gradient:"bg-gradient-to-r from-yellow-500 to-amber-500"},rejected:{color:"bg-red-100 text-red-800 border-red-200",icon:l.XCircle,gradient:"bg-gradient-to-r from-red-500 to-rose-500"}},d=c[a]||c.pending,e=d.icon;return(0,b.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold border shadow-sm ${d.color}`,children:[(0,b.jsx)(e,{size:14}),a?.charAt(0).toUpperCase()+a?.slice(1)]})},ar=a=>{let c={deposit:{icon:e.ArrowDownCircle,color:"text-green-600 bg-green-100"},withdraw:{icon:f.ArrowUpCircle,color:"text-orange-600 bg-orange-100"},sell:{icon:h.DollarSign,color:"text-blue-600 bg-blue-100"},loan:{icon:g.Wallet,color:"text-purple-600 bg-purple-100"}},d=c[a]||c.deposit,i=d.icon;return(0,b.jsx)("div",{className:`p-3 rounded-2xl ${d.color} shadow-sm`,children:(0,b.jsx)(i,{size:24,strokeWidth:2})})},as=({approval:a})=>{if(!a)return null;let c=[{label:"Supervisor",data:a.supervisor_approval,shortLabel:"SUP"},{label:"Manager",data:a.manager_approval,shortLabel:"MGR"},{label:"Admin",data:a.admin_approval,shortLabel:"ADM"}];return(0,b.jsx)("div",{className:"flex items-center gap-1.5 flex-wrap",children:c.map((a,c)=>(0,b.jsxs)("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-all ${a.data?.status?"bg-green-100 text-green-700 border border-green-200":a.data?.date?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-500 border border-gray-200"}`,title:a.label,children:[a.data?.status?(0,b.jsx)(k.CheckCircle,{size:12}):a.data?.date?(0,b.jsx)(l.XCircle,{size:12}):(0,b.jsx)(m.Clock,{size:12}),(0,b.jsx)("span",{className:"hidden sm:inline",children:a.label}),(0,b.jsx)("span",{className:"sm:hidden",children:a.shortLabel})]},c))})};return(0,b.jsx)("div",{className:"min-h-screen p-4",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent mb-2",children:"Transactions"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage and track all your grain transactions"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:()=>ad(!0),disabled:ae||E||0===a.length,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all font-semibold shadow-lg shadow-green-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(C,{size:18}),"Download All"]}),(0,b.jsx)("p",{className:"text-gray-100 font-bold bg-blue-600 px-6 py-2 rounded-full",children:M})]})]}),(0,b.jsx)(()=>(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[(0,b.jsx)(A,{size:20,className:"text-blue-500"}),(0,b.jsx)("span",{children:"Date Range Filter"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:Y,onChange:a=>Z(a.target.value),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",max:$||void 0})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"End Date"}),(0,b.jsx)("input",{type:"date",value:$,onChange:a=>_(a.target.value),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",min:Y||void 0})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:am,disabled:E,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all font-semibold shadow-lg shadow-blue-200 disabled:opacity-50",children:[(0,b.jsx)(s.Search,{size:16}),"Apply Filter"]}),(Y||$)&&(0,b.jsxs)("button",{onClick:an,className:"flex items-center gap-2 px-4 py-2.5 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-all font-medium",children:[(0,b.jsx)(B.X,{size:16}),"Clear"]})]})]}),(Y||$)&&(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Active filter:"}),(0,b.jsx)("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-lg font-medium",children:Y&&$?`${new Date(Y).toLocaleDateString()} - ${new Date($).toLocaleDateString()}`:Y?`From ${new Date(Y).toLocaleDateString()}`:`Until ${new Date($).toLocaleDateString()}`})]})]}),{}),(0,b.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:ak.slice(1).map(a=>{let c=S[a.key]||0;return(0,b.jsxs)("div",{onClick:()=>{J(a.key),L(1)},className:`relative overflow-hidden bg-white rounded-2xl p-5 shadow-sm border-2 transition-all cursor-pointer group hover:shadow-xl ${I===a.key?"border-blue-400 shadow-lg shadow-blue-100":"border-gray-100 hover:border-gray-200"}`,children:[(0,b.jsx)("div",{className:`absolute top-0 right-0 w-20 h-20 ${a.lightColor} rounded-bl-full opacity-50 group-hover:opacity-100 transition-opacity`}),(0,b.jsx)("div",{className:`relative z-10 w-12 h-12 ${a.color} rounded-2xl flex items-center justify-center mb-4 shadow-lg`,children:(0,b.jsx)(a.icon,{size:24,className:"text-white"})}),(0,b.jsx)("p",{className:"text-gray-500 text-sm font-medium relative z-10",children:a.label}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-800 mt-1 relative z-10",children:c}),I===a.key&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-500"})]},a.key)})}),(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 mb-6 p-2",children:(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:ak.map(a=>(0,b.jsxs)("button",{onClick:()=>{J(a.key),L(1)},className:`flex items-center gap-2 px-5 py-3 rounded-xl font-semibold text-sm transition-all ${I===a.key?`${a.color} text-white shadow-lg`:`${a.textColor} hover:bg-gray-100`}`,children:[(0,b.jsx)(a.icon,{size:18}),a.label,""===a.key?(0,b.jsx)("span",{className:"ml-1 px-2 py-0.5 bg-white/20 rounded-lg text-xs",children:S.sell+S.deposit+S.withdraw+S.loan}):(0,b.jsx)("span",{className:`ml-1 px-2 py-0.5 rounded-lg text-xs ${I===a.key?"bg-white/20":"bg-gray-100"}`,children:S[a.key]||0})]},a.key))})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,b.jsxs)("p",{className:"text-gray-600",children:["Showing"," ",(0,b.jsx)("span",{className:"font-bold text-gray-800",children:a.length})," ","of"," ",(0,b.jsx)("span",{className:"font-bold text-gray-800",children:O.totalRecords})," ","transactions"]}),I&&(0,b.jsxs)("span",{className:`px-3 py-1 rounded-lg text-xs font-semibold ${ak.find(a=>a.key===I)?.lightColor} ${ak.find(a=>a.key===I)?.textColor}`,children:[I.charAt(0).toUpperCase()+I.slice(1)," ","only"]}),(Y||$)&&(0,b.jsx)("span",{className:"px-3 py-1 rounded-lg text-xs font-semibold bg-blue-50 text-blue-600",children:"Date filtered"})]}),(0,b.jsxs)("button",{onClick:al,disabled:E,className:"flex items-center gap-2 px-5 py-2.5 bg-white rounded-xl border border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all font-medium shadow-sm",children:[(0,b.jsx)(t.RefreshCw,{size:16,className:E?"animate-spin":""}),"Refresh"]})]}),E&&(0,b.jsx)("div",{className:"flex items-center justify-center py-24",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-pulse"}),(0,b.jsx)("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})]}),(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"Loading transactions..."})]})}),G&&!E&&(0,b.jsxs)("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-8 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(l.XCircle,{className:"w-8 h-8 text-red-500"})}),(0,b.jsx)("p",{className:"text-red-700 font-semibold text-lg mb-2",children:"Oops! Something went wrong"}),(0,b.jsx)("p",{className:"text-red-600 mb-4",children:G}),(0,b.jsx)("button",{onClick:al,className:"px-6 py-2.5 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-semibold shadow-lg shadow-red-200",children:"Try Again"})]}),!E&&!G&&(0,b.jsx)("div",{className:"space-y-4",children:0===a.length?(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-16 text-center shadow-sm border border-gray-100",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(q.Package,{className:"w-10 h-10 text-gray-400"})}),(0,b.jsx)("p",{className:"text-gray-700 text-xl font-semibold mb-2",children:"No transactions found"}),(0,b.jsx)("p",{className:"text-gray-500",children:I||Y||$?"No transactions match your filters. Try adjusting your search criteria.":"No transactions available yet. Check back later."}),(I||Y||$)&&(0,b.jsx)("button",{onClick:()=>{J(""),an()},className:"mt-4 px-5 py-2.5 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors font-medium",children:"Clear All Filters"})]}):a.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-5 hover:shadow-xl hover:border-blue-200 transition-all cursor-pointer group",onClick:()=>{V(a),X(!0)},children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[ar(a.transaction_type),(0,b.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,b.jsx)("img",{src:a.user_id?.farmerProfile?.user_image||"/placeholder-user.png",alt:a.user_id?.name,className:"w-12 h-12 rounded-xl object-cover border-2 border-gray-100 shadow-sm flex-shrink-0",onError:b=>{b.target.src="https://ui-avatars.com/api/?name="+encodeURIComponent(a.user_id?.name||"User")}}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"font-bold text-gray-800 truncate",children:a.user_id?.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500 truncate",children:a.user_id?.farmerProfile?.farmerId})]})]})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:a.grain?.map((a,c)=>(0,b.jsxs)("span",{className:"inline-flex items-center px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-semibold border border-blue-100",children:[(0,b.jsx)(q.Package,{size:14,className:"mr-1.5"}),a.category_id?.grain_type,(0,b.jsxs)("span",{className:"ml-1 text-blue-500",children:["(",a.quantity_quintal?.toFixed(2)," qtl)"]})]},c))}),(0,b.jsx)(as,{approval:a.approval_status})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between lg:justify-end gap-4 pt-4 lg:pt-0 border-t lg:border-t-0 border-gray-100",children:[(0,b.jsxs)("div",{className:"text-left lg:text-right",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:ap(a.total_amount)}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 flex items-center gap-1 lg:justify-end",children:[(0,b.jsx)(p.Calendar,{size:14}),ao(a.transaction_date)]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[aq(a.transaction_status),(0,b.jsx)("div",{className:"flex items-center gap-1",children:(0,b.jsx)("button",{className:"opacity-0 group-hover:opacity-100 transition-all p-2 bg-gray-100 rounded-xl hover:bg-blue-100 hover:text-blue-600",title:"View Details",children:(0,b.jsx)(u.Eye,{size:18})})})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 flex flex-wrap items-center gap-4",children:[a.warehouse_id&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 bg-gray-50 px-3 py-1.5 rounded-lg",children:[(0,b.jsx)(o.MapPin,{size:14,className:"text-purple-500"}),(0,b.jsxs)("span",{className:"text-sm",children:[a.warehouse_id.name,","," ",a.warehouse_id.location]})]}),a.remarks&&(0,b.jsx)("div",{className:"flex items-center gap-2 bg-amber-50 px-3 py-1.5 rounded-lg",children:(0,b.jsx)("span",{className:"text-sm text-amber-700 font-medium capitalize",children:a.remarks.replace(/_/g," ")})})]})]},a._id))}),!E&&!G&&a.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(()=>O.totalPages<=1&&O.totalRecords<=ai?null:(0,b.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-between gap-4 bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[(0,b.jsxs)("p",{className:"text-gray-600 text-sm",children:["Showing"," ",(0,b.jsx)("span",{className:"font-bold text-gray-800",children:(K-1)*O.limit+1})," ","to"," ",(0,b.jsx)("span",{className:"font-bold text-gray-800",children:Math.min(K*O.limit,O.totalRecords)})," ","of"," ",(0,b.jsx)("span",{className:"font-bold text-gray-800",children:O.totalRecords})," ","transactions"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Per page:"}),(0,b.jsxs)("select",{value:ai,onChange:a=>{aj(Number(a.target.value)),L(1)},className:"px-3 py-1.5 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[(0,b.jsx)("option",{value:10,children:"10"}),(0,b.jsx)("option",{value:20,children:"20"}),(0,b.jsx)("option",{value:50,children:"50"}),(0,b.jsx)("option",{value:100,children:"100"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("button",{onClick:()=>L(1),disabled:1===K,className:"p-2 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-100 disabled:opacity-40 disabled:cursor-not-allowed transition-all",title:"First Page",children:(0,b.jsx)(x.ChevronsLeft,{size:18})}),(0,b.jsxs)("button",{onClick:()=>L(a=>Math.max(a-1,1)),disabled:1===K,className:"flex items-center gap-1 px-3 py-2 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-100 disabled:opacity-40 disabled:cursor-not-allowed transition-all",children:[(0,b.jsx)(i.ChevronLeft,{size:18}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Prev"})]}),(0,b.jsxs)("div",{className:"hidden sm:flex items-center gap-1",children:[K>3&&O.totalPages>5&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>L(1),className:"w-10 h-10 rounded-xl text-gray-600 hover:bg-gray-100 border border-gray-200 font-semibold",children:"1"}),K>4&&(0,b.jsx)("span",{className:"px-2 text-gray-400",children:"..."})]}),(()=>{let a=[],b=Math.max(1,K-Math.floor(2.5)),c=Math.min(O.totalPages,b+5-1);c-b+1<5&&(b=Math.max(1,c-5+1));for(let d=b;d<=c;d++)a.push(d);return a})().map(a=>(0,b.jsx)("button",{onClick:()=>L(a),className:`w-10 h-10 rounded-xl font-semibold transition-all ${K===a?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg shadow-blue-200":"text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:a},a)),K<O.totalPages-2&&O.totalPages>5&&(0,b.jsxs)(b.Fragment,{children:[K<O.totalPages-3&&(0,b.jsx)("span",{className:"px-2 text-gray-400",children:"..."}),(0,b.jsx)("button",{onClick:()=>L(O.totalPages),className:"w-10 h-10 rounded-xl text-gray-600 hover:bg-gray-100 border border-gray-200 font-semibold",children:O.totalPages})]})]}),(0,b.jsxs)("div",{className:"sm:hidden px-3 py-2 bg-gray-100 rounded-xl",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-800",children:K}),(0,b.jsxs)("span",{className:"text-gray-500",children:[" / ",O.totalPages]})]}),(0,b.jsxs)("button",{onClick:()=>L(a=>Math.min(a+1,O.totalPages)),disabled:K===O.totalPages,className:"flex items-center gap-1 px-3 py-2 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-100 disabled:opacity-40 disabled:cursor-not-allowed transition-all",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,b.jsx)(j.ChevronRight,{size:18})]}),(0,b.jsx)("button",{onClick:()=>L(O.totalPages),disabled:K===O.totalPages,className:"p-2 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-100 disabled:opacity-40 disabled:cursor-not-allowed transition-all",title:"Last Page",children:(0,b.jsx)(y.ChevronsRight,{size:18})})]})]}),{}),(0,b.jsx)(()=>{let[a,d]=(0,c.useState)(""),e=()=>{let b=parseInt(a);b>=1&&b<=O.totalPages&&(L(b),d(""))};return O.totalPages<=5?null:(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-4 justify-center",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Jump to page:"}),(0,b.jsx)("input",{type:"number",min:"1",max:O.totalPages,value:a,onChange:a=>d(a.target.value),onKeyPress:a=>"Enter"===a.key&&e(),className:"w-20 px-3 py-1.5 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Page"}),(0,b.jsx)("button",{onClick:e,className:"px-3 py-1.5 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-all text-sm font-medium",children:"Go"})]})},{})]}),W&&(0,b.jsx)(({transaction:a,onClose:c})=>a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:c,children:(0,b.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-100 px-6 py-5 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Transaction Details"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-0.5",children:["ID: ",a._id?.slice(-8).toUpperCase()]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{onClick:()=>(0,P.default)({data:U,service:"usertransaction"}),className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-100 transition-colors font-medium",children:[(0,b.jsx)(v.Download,{size:18}),"Download PDF"]}),(0,b.jsx)("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded-xl transition-colors",children:(0,b.jsx)(l.XCircle,{size:24,className:"text-gray-400 hover:text-gray-600"})})]})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-2xl p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[ar(a.transaction_type),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Transaction Type"}),(0,b.jsx)("p",{className:"text-lg font-bold text-gray-800 capitalize",children:a.transaction_type})]})]}),aq(a.transaction_status)]}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-5 border border-blue-100",children:[(0,b.jsxs)("h4",{className:"text-sm font-semibold text-gray-600 mb-3 flex items-center gap-2",children:[(0,b.jsx)(n.User,{size:16}),"Farmer Details"]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("img",{src:a.user_id?.farmerProfile?.user_image||"/placeholder-user.png",alt:a.user_id?.name,className:"w-16 h-16 rounded-2xl object-cover border-4 border-white shadow-lg",onError:b=>{b.target.src="https://ui-avatars.com/api/?name="+encodeURIComponent(a.user_id?.name||"User")}}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-bold text-gray-800 text-lg",children:a.user_id?.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.user_id?.email}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.user_id?.phone_number}),(0,b.jsx)("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-semibold",children:a.user_id?.farmerProfile?.farmerId})]})]})]}),a.warehouse_id&&(0,b.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-purple-50 rounded-2xl border border-purple-100",children:[(0,b.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl",children:(0,b.jsx)(o.MapPin,{className:"text-purple-600",size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Warehouse"}),(0,b.jsx)("p",{className:"font-bold text-gray-800",children:a.warehouse_id.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.warehouse_id.location})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,b.jsx)(q.Package,{size:18}),"Grain Details"]}),(0,b.jsx)("div",{className:"space-y-3",children:a.grain?.map((a,c)=>(0,b.jsxs)("div",{className:"border-2 border-gray-100 rounded-2xl p-4 hover:border-blue-200 transition-all bg-white shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("span",{className:"font-bold text-gray-800 text-lg",children:a.category_id?.grain_type}),(0,b.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-sm font-semibold",children:["Grade ",a.category_id?.quality]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3",children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs",children:"Quantity"}),(0,b.jsxs)("p",{className:"font-bold text-gray-800",children:[a.quantity_quintal?.toFixed(2)," qtl"]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-3",children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs",children:"Price/Quintal"}),(0,b.jsx)("p",{className:"font-bold text-gray-800",children:ap(a.price_per_quintal)})]}),a.moisture_content>0&&(0,b.jsxs)("div",{className:"bg-yellow-50 rounded-xl p-3",children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs",children:"Moisture"}),(0,b.jsxs)("p",{className:"font-bold text-yellow-700",children:[a.moisture_content,"%"]})]})]})]},c))})]}),(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 rounded-2xl p-5 text-white shadow-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-blue-100 text-sm font-medium",children:"Total Amount"}),(0,b.jsx)("p",{className:"text-4xl font-bold mt-1",children:ap(a.total_amount)})]}),(0,b.jsx)("div",{className:"p-4 bg-white/20 rounded-2xl backdrop-blur-sm",children:(0,b.jsx)(w.TrendingUp,{size:32})})]})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,b.jsx)(k.CheckCircle,{size:18}),"Approval Workflow"]}),(0,b.jsx)("div",{className:"space-y-3",children:[{label:"Supervisor",data:a.approval_status?.supervisor_approval},{label:"Manager",data:a.approval_status?.manager_approval},{label:"Admin",data:a.approval_status?.admin_approval}].map((a,c)=>(0,b.jsxs)("div",{className:`flex items-center justify-between p-4 rounded-2xl border-2 transition-all ${a.data?.status?"bg-green-50 border-green-200":a.data?.date?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`p-2 rounded-xl ${a.data?.status?"bg-green-100":a.data?.date?"bg-red-100":"bg-gray-200"}`,children:a.data?.status?(0,b.jsx)(k.CheckCircle,{className:"text-green-600",size:24}):a.data?.date?(0,b.jsx)(l.XCircle,{className:"text-red-600",size:24}):(0,b.jsx)(m.Clock,{className:"text-gray-400",size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:a.label}),a.data?.user_id?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.data.user_id.name}):(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Pending approval"})]})]}),a.data?.date&&(0,b.jsx)("span",{className:"text-xs text-gray-500 bg-white px-3 py-1 rounded-lg shadow-sm",children:ao(a.data.date)})]},c))})]}),a.remarks&&(0,b.jsxs)("div",{className:"bg-amber-50 rounded-2xl p-4 border border-amber-200",children:[(0,b.jsx)("p",{className:"text-sm text-amber-700 font-medium mb-1",children:"Remarks"}),(0,b.jsx)("p",{className:"font-semibold text-gray-800 capitalize",children:a.remarks.replace(/_/g," ")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-gray-500 bg-gray-50 rounded-xl p-3",children:[(0,b.jsx)(p.Calendar,{size:18}),(0,b.jsxs)("span",{className:"text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:"Transaction Date:"})," ",ao(a.transaction_date)]})]})]})]})}):null,{transaction:U,onClose:()=>{X(!1),V(null)}}),(0,b.jsx)(Q,{isOpen:ac,onClose:()=>ad(!1),onDownload:a=>{console.log("Downloaded transactions:",a)}})]})})}],59112)}];

//# sourceMappingURL=src_app_admin_transactions_page_jsx_b332b575._.js.map