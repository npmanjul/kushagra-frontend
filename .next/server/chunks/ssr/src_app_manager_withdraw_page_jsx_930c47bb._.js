module.exports=[27332,a=>{"use strict";var b=a.i(87924),c=a.i(31626),d=a.i(72131),e=a.i(87532),f=a.i(46842),g=a.i(33508),h=a.i(33441),i=a.i(83497),j=a.i(53277),k=a.i(10227),l=a.i(92e3),m=a.i(50522),n=a.i(41675),o=a.i(24987),p=a.i(63519),q=a.i(92258),r=a.i(2835),s=a.i(96221),t=a.i(73237),u=a.i(32860),v=a.i(8406),w=a.i(97063),x=a.i(35050),y=a.i(4720),z=a.i(3314),A=a.i(90669),B=a.i(79822),C=a.i(18398),D=a.i(46864),E=a.i(16157),F=a.i(20005),G=a.i(24669),H=a.i(67900),I=a.i(70893),J=a.i(6704),K=a.i(60779);a.s(["default",0,()=>{let[a,L]=(0,d.useState)(""),[M,N]=(0,d.useState)("name"),[O,P]=(0,d.useState)([]),[Q,R]=(0,d.useState)(null),[S,T]=(0,d.useState)(!1),[U,V]=(0,d.useState)(!1),[W,X]=(0,d.useState)([]),[Y,Z]=(0,d.useState)(null),[$,_]=(0,d.useState)(!1),[aa,ab]=(0,d.useState)(null),[ac,ad]=(0,d.useState)(""),[ae,af]=(0,d.useState)(""),[ag,ah]=(0,d.useState)(!1),[ai,aj]=(0,d.useState)(1),[ak,al]=(0,d.useState)(!1),[am,an]=(0,d.useState)(""),[ao,ap]=(0,d.useState)([]),[aq,ar]=(0,d.useState)(null),[as,at]=(0,d.useState)(!1),[au,av]=(0,d.useState)(null),[aw,ax]=(0,d.useState)(null),ay=[{id:"personal_use",label:"Personal Use",icon:f.User,color:"blue"},{id:"sale",label:"Direct Sale",icon:j.TrendingDown,color:"emerald"},{id:"transfer",label:"Transfer",icon:k.Truck,color:"purple"},{id:"processing",label:"Processing",icon:i.Package,color:"orange"},{id:"other",label:"Other",icon:y.FileText,color:"gray"}];(0,d.useEffect)(()=>{(async()=>{try{let a=localStorage.getItem("token");if(!a)return;let b=await fetch(`${K.default}/user/profile`,{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();av(a.user?.role||a.role),console.log(a.warehouseId),ax(a.user?.warehouseId||a.warehouseId)}}catch(a){console.error("Error fetching user profile:",a)}})(),az()},[]);let az=async()=>{at(!0);try{let a=await fetch(`${K.default}/warehouse/inventory`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok)throw Error("Failed to fetch warehouse inventory");let b=await a.json();if(b.success&&b.warehouses)if(ap(b.warehouses),aw){let a=b.warehouses.find(a=>a.warehouseId===aw);a&&ar(a)}else 1===b.warehouses.length&&ar(b.warehouses[0]);else if(b.warehouseId&&b.categories){let a={warehouseId:b.warehouseId,warehouseName:b.warehouseName,warehouseLocation:b.warehouseLocation,categories:b.categories};ap([a]),ar(a)}}catch(a){console.error("Error fetching warehouse inventory:",a),J.default.error("Failed to load warehouse inventory")}finally{at(!1)}};(0,d.useEffect)(()=>{if(aw&&ao.length>0){let a=ao.find(a=>a.warehouseId===aw);a&&ar(a)}},[aw,ao]);let aA=a=>{if(!aq)return 0;let b=aq.categories?.find(b=>b.category_id===a);return b?Math.max(0,(b.deposit?.completed?.qty||0)-(b.withdraw?.completed||0)-(b.sell?.completed?.qty||0)):0},aB=()=>Y?Math.min(parseFloat(Y.quantity)||0,aA(Y.category_id||Y.grain_id)):0,aC=async a=>{let b;if(a.length<2)return void P([]);T(!0);let c=(b=a.trim()).includes("@")?"email":/^[\d\s\-\+]+$/.test(b)&&b.replace(/\D/g,"").length>=7?"phone_number":/^SGB\d{10}$/i.test(b)?"userId":"name";N(c);try{let b=`${c}=${encodeURIComponent(a)}`,d=await fetch(`${K.default}/user/finduserdetails?${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!d.ok)throw Error("Failed to search users");let e=await d.json();e.users&&Array.isArray(e.users)?P(e.users):e.user?P([e.user]):P([]),V(!0)}catch(a){console.error("Search error:",a),P([]),V(!0)}finally{T(!1)}},aD=async a=>{_(!0);try{let b=await fetch(`${K.default}/user/getallgraindeposite?farmerId=${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!b.ok)throw Error("Failed to fetch inventory");let c=await b.json(),d=(Array.isArray(c.deposits)?c.deposits:[]).map(a=>{let b=a.category_id||a.grain_id,c=aq?aA(b):Number(a.total_quantity??0);return{category_id:b,grain_id:a.grain_id||b,grain_type:a.grain_type||"Unknown",quality:a.quality||"Standard",quantity:Number(a.total_quantity??0),warehouseAvailable:c,deposited_date:a.deposited_date||null,last_transaction:a.last_transaction||null,warehouseId:aq?.warehouseId||a.warehouseId||null}}).filter(a=>a.quantity>0&&a.warehouseAvailable>0).sort((a,b)=>b.quantity-a.quantity);X(d),aj(2)}catch(a){console.error("Inventory fetch error:",a),J.default.error("Failed to load user inventory"),X([])}finally{_(!1)}},aE=async a=>{try{let b=await fetch(`${K.default}/pricehistory/pricehistorybygrain?id=${a}`);if(!b.ok)throw Error("Failed to fetch price");let c=await b.json();ab(c)}catch(a){console.error("Price fetch error:",a),J.default.error("Failed to load today's price"),ab(null)}};(0,d.useEffect)(()=>{let b=setTimeout(()=>{a?aC(a):(P([]),V(!1))},500);return()=>clearTimeout(b)},[a]),(0,d.useEffect)(()=>{Y&&(aE(Y.grain_id||Y.category_id),aj(3))},[Y]),(0,d.useEffect)(()=>{Q&&aq&&aD(Q._id||Q.id)},[aq]);let aF=()=>ac&&aa?.price?(parseFloat(ac)*parseFloat(aa.price)).toFixed(2):0,aG=async()=>{if(!ac||!ae)return void J.default.error("Please fill all required fields");let a=aB();if(parseFloat(ac)>a)return void J.default.error(`Withdrawal quantity cannot exceed ${a} Qtl (warehouse limit)`);if(!aq)return void J.default.error("Please select a warehouse");ah(!0);try{let a={farmerId:Q._id||Q.id,grain_id:Y.grain_id||Y.category_id,quantity:ac,price:aa?.price||0,total_value:aF(),WarehouseId:aq.warehouseId,reason:ae,notes:am};if(!(await fetch(`${K.default}/withdrawal/grainwithdrawal`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(a)})).ok)throw Error("Failed to process withdrawal");J.default.success("Withdrawal processed successfully!"),await az(),R(null),X([]),Z(null),ad(""),af(""),an(""),ab(null),aj(1),al(!1)}catch(a){console.error("Withdrawal error:",a),J.default.error("Failed to process withdrawal")}finally{ah(!1)}},aH="manager"!==au&&"supervisor"!==au&&"admin"!==au||!aw,aI=({label:a,value:c,highlight:d})=>(0,b.jsxs)("div",{className:`${d?"bg-white/80":"bg-white/50"} rounded-xl p-2.5`,children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-0.5",children:a}),(0,b.jsx)("p",{className:`font-semibold truncate ${d?"text-orange-600":"text-gray-900"}`,children:c||"-"})]});return(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 min-h-screen bg-gradient-to-br from-slate-50 via-white to-red-50/30",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 fixed inset-0 overflow-hidden pointer-events-none",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-1/4 -left-20 w-72 h-72 bg-red-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float"}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-3/4 -right-20 w-72 h-72 bg-orange-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float animation-delay-2000"}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute bottom-1/4 left-1/3 w-72 h-72 bg-yellow-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float animation-delay-4000"})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8 max-w-7xl",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6",children:(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 p-4 bg-gradient-to-br from-red-500 to-orange-600 rounded-2xl shadow-lg",children:(0,b.jsx)(B.PackageMinus,{className:"h-8 w-8 text-white"})}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 absolute -top-1 -right-1 flex h-3 w-3",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,b.jsx)("h1",{className:"jsx-5b01246a782bc537 text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Grain Withdrawal"}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-600 mt-1",children:"Process grain withdrawals from farmer inventory"})]})]}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 hidden lg:flex items-center bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-2",children:[{step:1,label:"Search Farmer",icon:e.Search},{step:2,label:"Select Grain",icon:i.Package},{step:3,label:"Confirm Withdrawal",icon:E.MinusCircle}].map((a,c)=>(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center",children:[(0,b.jsxs)("div",{className:`jsx-5b01246a782bc537 flex items-center px-4 py-2.5 rounded-xl transition-all duration-500 ${ai>=a.step?"bg-white shadow-md":""}`,children:[(0,b.jsxs)("div",{className:`jsx-5b01246a782bc537 relative flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-500 ${ai>=a.step?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-lg":"bg-gray-200 text-gray-500"}`,children:[ai>a.step?(0,b.jsx)(h.Check,{className:"h-5 w-5"}):(0,b.jsx)(a.icon,{className:"h-5 w-5"}),ai===a.step&&(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -inset-0.5 bg-gradient-to-r from-red-500 to-orange-600 rounded-xl blur opacity-30 animate-pulse"})]}),(0,b.jsx)("span",{className:`jsx-5b01246a782bc537 ml-3 text-sm font-medium hidden xl:inline transition-all duration-500 ${ai>=a.step?"text-gray-900":"text-gray-500"}`,children:a.label})]}),c<2&&(0,b.jsx)(m.ChevronRight,{className:`h-5 w-5 mx-2 transition-all duration-500 ${ai>a.step?"text-red-500":"text-gray-300"}`})]},a.step))}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 flex lg:hidden justify-center gap-2",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:`jsx-5b01246a782bc537 h-2 rounded-full transition-all duration-500 ${ai>=a?"w-12 bg-gradient-to-r from-red-500 to-orange-600":"w-2 bg-gray-300"}`},a))})]})}),(0,b.jsx)(()=>(0,b.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"p-2.5 bg-gradient-to-br from-slate-600 to-gray-700 rounded-xl shadow-lg",children:(0,b.jsx)(H.Building2,{className:"h-5 w-5 text-white"})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Select Warehouse"}),aq&&(0,b.jsxs)("span",{className:"ml-auto px-4 py-1.5 bg-slate-100 text-slate-700 rounded-full text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(h.Check,{className:"h-4 w-4"}),aq.warehouseName]})]}),as?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin text-slate-500"}),(0,b.jsx)("p",{className:"text-gray-600 mt-3",children:"Loading warehouses..."})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ao.map(a=>{let c=aq?.warehouseId===a.warehouseId,d=a.warehouseId===aw,e=a.categories?.length||0,f=a.categories?.reduce((a,b)=>a+Math.max(0,(b.deposit?.completed?.qty||0)-(b.withdraw?.completed||0)-(b.sell?.completed?.qty||0)),0)||0;return(0,b.jsxs)("div",{onClick:()=>aH&&void(ar(a),Z(null),ad("")),className:`group relative cursor-pointer transition-all duration-300 ${!aH&&!d?"opacity-50 cursor-not-allowed":""}`,children:[(0,b.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br rounded-2xl blur-md transition-all duration-300 ${c?"from-slate-400 to-gray-400 opacity-40":"from-gray-200 to-gray-300 opacity-0 group-hover:opacity-30"}`}),(0,b.jsxs)("div",{className:`relative p-5 rounded-2xl border-2 backdrop-blur-sm transition-all duration-300 ${c?"border-slate-500 bg-gradient-to-br from-slate-50 to-gray-50":"border-gray-200 bg-white hover:border-slate-300"}`,children:[c&&(0,b.jsx)("div",{className:"absolute top-3 right-3 animate-bounceIn",children:(0,b.jsx)("div",{className:"bg-gradient-to-br from-slate-600 to-gray-700 rounded-full p-1.5 shadow-lg",children:(0,b.jsx)(h.Check,{className:"h-4 w-4 text-white"})})}),d&&(0,b.jsx)("div",{className:"absolute top-3 left-3",children:(0,b.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium",children:"Assigned"})}),(0,b.jsxs)("div",{className:"flex items-start gap-3 mb-4 mt-2",children:[(0,b.jsx)("div",{className:`p-3 rounded-xl transition-all duration-300 ${c?"bg-gradient-to-br from-slate-600 to-gray-700 shadow-lg":"bg-gradient-to-br from-gray-100 to-gray-200"}`,children:(0,b.jsx)(I.Warehouse,{className:`h-6 w-6 ${c?"text-white":"text-gray-600"}`})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 truncate",children:a.warehouseName}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 flex items-center gap-1 mt-0.5",children:[(0,b.jsx)(o.MapPin,{className:"h-3.5 w-3.5"}),a.warehouseLocation]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Categories"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:e})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Total Stock"}),(0,b.jsxs)("p",{className:"font-semibold text-gray-900",children:[f," Qtl"]})]})]})]})]},a.warehouseId)})}),!as&&0===ao.length&&(0,b.jsxs)("div",{className:"text-center py-12 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(H.Building2,{className:"h-8 w-8 text-gray-400"})}),(0,b.jsx)("p",{className:"text-gray-700 font-semibold",children:"No warehouses available"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Please contact administrator"})]})]}),{className:"jsx-5b01246a782bc537"}),aq&&(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6 animate-fadeIn",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 p-2.5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg",children:(0,b.jsx)(e.Search,{className:"h-5 w-5 text-white"})}),(0,b.jsx)("h2",{className:"jsx-5b01246a782bc537 text-xl font-bold text-gray-800",children:"Search Farmer"}),Q&&(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 ml-auto px-4 py-1.5 bg-blue-100 text-blue-700 rounded-full text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(h.Check,{className:"h-4 w-4"}),"Farmer Selected"]})]}),Q?(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border-2 border-blue-200 p-6 animate-fadeIn",children:(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white font-bold text-xl shadow-lg",children:Q.name?.charAt(0).toUpperCase()||"F"}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -bottom-1 -right-1 bg-white rounded-full p-1",children:(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 bg-blue-500 rounded-full p-1",children:(0,b.jsx)(h.Check,{className:"h-3 w-3 text-white"})})})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 font-bold text-xl text-gray-900",children:Q.name}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-600 text-sm lg:text-base",children:Q.email}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-wrap items-center gap-3 mt-1",children:[Q.phone_number&&(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 flex items-center gap-1",children:[(0,b.jsx)(p.Phone,{className:"h-4 w-4"}),Q.phone_number]}),Q.userId&&(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-blue-600 font-medium flex items-center gap-1",children:[(0,b.jsx)(r.Hash,{className:"h-4 w-4"}),Q.userId]})]})]})]}),(0,b.jsx)("button",{onClick:()=>{R(null),X([]),Z(null),aj(1)},className:"jsx-5b01246a782bc537 p-3 hover:bg-red-50 rounded-xl transition-all duration-200 group",children:(0,b.jsx)(g.X,{className:"h-6 w-6 text-gray-500 group-hover:text-red-500 transition-colors"})})]})}):(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 relative group",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -inset-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl blur opacity-20 group-hover:opacity-30 transition duration-300"}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,b.jsx)(e.Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name, email, phone, or farmer ID...",value:a,onChange:a=>L(a.target.value),onFocus:()=>a&&V(!0),className:"jsx-5b01246a782bc537 w-full pl-12 pr-12 py-4 bg-white rounded-2xl border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all duration-300 text-base lg:text-lg font-medium placeholder-gray-400"}),S&&(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute right-4 top-1/2 transform -translate-y-1/2",children:(0,b.jsx)(s.Loader2,{className:"animate-spin h-5 w-5 text-blue-500"})})]})]}),a&&(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 mt-3 flex flex-wrap items-center gap-2",children:[(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 px-3 py-1.5 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 text-blue-700 rounded-full text-xs font-medium flex items-center gap-1.5",children:["email"===M&&(0,b.jsx)(q.Mail,{className:"h-3.5 w-3.5"}),"phone_number"===M&&(0,b.jsx)(p.Phone,{className:"h-3.5 w-3.5"}),"userId"===M&&(0,b.jsx)(r.Hash,{className:"h-3.5 w-3.5"}),"name"===M&&(0,b.jsx)(f.User,{className:"h-3.5 w-3.5"}),"Searching by ",M.replace("_"," ")]}),(0,b.jsx)(v.Sparkles,{className:"h-4 w-4 text-yellow-500 animate-pulse"})]}),U&&O.length>0&&(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute z-40 w-full mt-3 bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-96 overflow-y-auto animate-slideDown",children:O.map((a,c)=>(0,b.jsxs)("div",{onClick:()=>{R(a),L(""),V(!1),P([]),aD(a._id||a.id)},className:"jsx-5b01246a782bc537 group px-5 py-4 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 cursor-pointer flex items-center gap-4 transition-all duration-200 border-b border-gray-100 last:border-b-0 first:rounded-t-2xl last:rounded-b-2xl",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:shadow-xl transition-all duration-200",children:a.name?.charAt(0).toUpperCase()||"F"}),a.isActive&&(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:a.name||"Unknown Farmer"}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-600 truncate",children:a.email||"No email"}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-wrap items-center gap-3 mt-1",children:[a.phone_number&&(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 text-xs text-gray-500 flex items-center gap-1",children:[(0,b.jsx)(p.Phone,{className:"h-3 w-3"}),(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 truncate",children:a.phone_number})]}),a.userId&&(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 text-xs text-blue-600 font-medium flex items-center gap-1",children:[(0,b.jsx)(r.Hash,{className:"h-3 w-3"}),a.userId]})]})]}),(0,b.jsx)(m.ChevronRight,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-500 group-hover:translate-x-1 transition-all duration-200 flex-shrink-0"})]},a._id||a.id||c))}),U&&a&&0===O.length&&!S&&(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute z-40 w-full mt-3 bg-white rounded-2xl shadow-2xl border border-gray-200 p-8 animate-slideDown",children:(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(f.User,{className:"h-8 w-8 text-gray-400"})}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-900 font-semibold",children:"No farmers found"}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 mt-1",children:"Try searching with different criteria"})]})})]})})]}),Q&&ai>=2&&aq&&(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 mb-6 animate-fadeIn",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 p-2.5 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl shadow-lg",children:(0,b.jsx)(i.Package,{className:"h-5 w-5 text-white"})}),(0,b.jsx)("h2",{className:"jsx-5b01246a782bc537 text-xl font-bold text-gray-800",children:"Available Inventory"}),(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 px-3 py-1 bg-gray-100 text-gray-600 rounded-lg text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(H.Building2,{className:"h-4 w-4"}),aq.warehouseName]}),Y&&(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 ml-auto px-4 py-1.5 bg-purple-100 text-purple-700 rounded-full text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(h.Check,{className:"h-4 w-4"}),"Grain Selected"]})]}),$?(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex flex-col items-center justify-center py-20",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 w-20 h-20 border-4 border-purple-200 rounded-full animate-pulse"}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-0 left-0 w-20 h-20 border-4 border-purple-500 rounded-full animate-spin border-t-transparent"})]}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-600 mt-4",children:"Loading inventory..."})]}):W.length>0?(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:W.map((a,c)=>{let d=aA(a.category_id),e=Math.min(a.quantity,d),g=d<a.quantity;return(0,b.jsxs)("div",{onClick:()=>e>0&&void(Z(a),ad(""),af(""),an("")),className:`jsx-5b01246a782bc537 group relative cursor-pointer transition-all duration-300 transform hover:scale-105 ${Y===a?"scale-105":""} ${e<=0?"opacity-50 cursor-not-allowed":""}`,children:[(0,b.jsx)("div",{className:`jsx-5b01246a782bc537 absolute inset-0 bg-gradient-to-br rounded-2xl blur-md transition-all duration-300 ${Y===a?"from-purple-400 to-pink-400 opacity-40":"from-gray-200 to-gray-300 opacity-0 group-hover:opacity-30"}`}),(0,b.jsxs)("div",{className:`jsx-5b01246a782bc537 relative p-6 rounded-2xl border-2 backdrop-blur-sm transition-all duration-300 ${Y===a?"border-purple-400 bg-gradient-to-br from-purple-50 to-pink-50":"border-gray-200 bg-white hover:border-purple-300 hover:bg-gradient-to-br hover:from-purple-50/50 hover:to-pink-50/50"}`,children:[Y===a&&(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-3 right-3 animate-bounceIn",children:(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full p-1.5 shadow-lg",children:(0,b.jsx)(h.Check,{className:"h-4 w-4 text-white"})})}),g&&(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute top-3 left-3",children:(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 px-2 py-1 bg-amber-100 text-amber-700 rounded-lg text-xs font-medium flex items-center gap-1",children:[(0,b.jsx)(l.AlertCircle,{className:"h-3 w-3"}),"Limited Stock"]})}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-start gap-3 mb-4 mt-2",children:[(0,b.jsx)("div",{className:`jsx-5b01246a782bc537 p-3 rounded-xl transition-all duration-300 ${Y===a?"bg-gradient-to-br from-purple-500 to-pink-600 shadow-lg":"bg-gradient-to-br from-gray-100 to-gray-200 group-hover:from-purple-100 group-hover:to-pink-100"}`,children:(0,b.jsx)(x.Wheat,{className:`h-6 w-6 transition-colors ${Y===a?"text-white":"text-gray-600 group-hover:text-purple-600"}`})}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"jsx-5b01246a782bc537 font-bold text-gray-900 truncate",children:a.grain_type}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-2 mt-1",children:(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 px-2 py-0.5 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium",children:a.quality})})]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-3",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-2 pb-3 border-b border-gray-100",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600 flex items-center gap-1",children:[(0,b.jsx)(f.User,{className:"h-4 w-4"}),"User's Stock"]}),(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-gray-900",children:[a.quantity," Qtl"]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600 flex items-center gap-1",children:[(0,b.jsx)(H.Building2,{className:"h-4 w-4"}),"Warehouse Stock"]}),(0,b.jsxs)("span",{className:`jsx-5b01246a782bc537 font-bold ${d<a.quantity?"text-amber-600":"text-gray-900"}`,children:[d," Qtl"]})]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center pt-1",children:[(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600 flex items-center gap-1",children:[(0,b.jsx)(C.Scale,{className:"h-4 w-4"}),"Can Withdraw"]}),(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-lg text-purple-600",children:[e," Qtl"]})]})]})]})]},c)})}):(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center py-20 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 w-24 h-24 bg-gradient-to-br from-gray-200 to-gray-300 rounded-3xl flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(i.Package,{className:"h-12 w-12 text-gray-400"})}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-gray-700 font-semibold text-lg",children:"No inventory found"}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 mt-2",children:"This farmer has no grain available in this warehouse"})]})]}),Y&&ai>=3&&(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 lg:p-8 animate-fadeIn",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 p-2.5 bg-gradient-to-br from-red-500 to-orange-600 rounded-xl shadow-lg",children:(0,b.jsx)(j.TrendingDown,{className:"h-5 w-5 text-white"})}),(0,b.jsx)("h2",{className:"jsx-5b01246a782bc537 text-xl font-bold text-gray-800",children:"Withdrawal Details"})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[(0,b.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,b.jsx)(i.Package,{className:"h-5 w-5 text-blue-600"}),"Selected Grain"]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-3",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Grain Type"}),(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 font-semibold text-gray-900",children:Y.grain_type})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Quality"}),(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 font-semibold text-gray-900",children:Y.quality})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2 border-t border-blue-200/50 pt-3",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"User's Stock"}),(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-blue-600",children:[Y.quantity," Qtl"]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Warehouse Stock"}),(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-gray-700",children:[aA(Y.category_id)," Qtl"]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center py-2 bg-purple-100 rounded-xl px-3",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-purple-700 font-medium",children:"Max Withdrawal"}),(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 font-bold text-purple-700 text-lg",children:[aB()," Qtl"]})]})]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl p-6 border border-emerald-200",children:[(0,b.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,b.jsx)(G.TrendingUp,{className:"h-5 w-5 text-emerald-600"}),"Today's Market Price"]}),aa?(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center py-4",children:[(0,b.jsxs)("p",{className:"jsx-5b01246a782bc537 text-5xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:["₹",aa.price]}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500 mt-2",children:"per quintal"}),aa.date&&(0,b.jsxs)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-400 mt-3 flex items-center justify-center gap-1",children:[(0,b.jsx)(n.Calendar,{className:"h-3.5 w-3.5"}),"Updated: ",new Date(aa.date).toLocaleDateString()]})]}):(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 text-center py-8",children:[(0,b.jsx)(s.Loader2,{className:"h-8 w-8 animate-spin text-emerald-500 mx-auto mb-2"}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-sm text-gray-500",children:"Loading price..."})]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6 border border-amber-200",children:[(0,b.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,b.jsx)(A.Activity,{className:"h-5 w-5 text-amber-600"}),"Stock Status"]}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center mb-2",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600",children:"Warehouse Level"}),(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm font-semibold text-gray-900",children:[aA(Y.category_id)," Qtl"]})]}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,b.jsx)("div",{style:{width:"100%"},className:"jsx-5b01246a782bc537 bg-gradient-to-r from-amber-500 to-orange-500 h-3 rounded-full transition-all duration-500"})}),ac&&(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 mt-3",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center mb-2",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-sm text-gray-600",children:"After Withdrawal"}),(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 text-sm font-semibold text-orange-600",children:[(aA(Y.category_id)-parseFloat(ac)).toFixed(2)," Qtl"]})]}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,b.jsx)("div",{style:{width:`${(aA(Y.category_id)-parseFloat(ac))/aA(Y.category_id)*100}%`},className:"jsx-5b01246a782bc537 bg-gradient-to-r from-red-500 to-orange-500 h-3 rounded-full transition-all duration-500"})})]})]})})]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-4",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,b.jsxs)("label",{className:"jsx-5b01246a782bc537 block text-sm font-semibold text-gray-700 mb-2",children:["Withdrawal Quantity (Quintal) ",(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 relative",children:[(0,b.jsx)("input",{type:"number",min:"0",max:aB(),step:"0.01",placeholder:`Max: ${aB()} Qtl`,value:ac,onChange:a=>{let b=a.target.value,c=aB();(""===b||parseFloat(b)>=0&&parseFloat(b)<=c)&&ad(b)},className:"jsx-5b01246a782bc537 w-full px-4 py-3.5 pr-16 bg-white border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-red-500/10 focus:border-red-500 transition-all duration-200 text-lg font-medium"}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-500 font-medium",children:"Qtl"})})]}),ac&&(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 mt-2 p-3 bg-orange-50 rounded-xl border border-orange-200",children:(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-start gap-2",children:[(0,b.jsx)(w.Info,{className:"h-4 w-4 text-orange-600 mt-0.5"}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex-1 text-sm",children:[(0,b.jsxs)("p",{className:"jsx-5b01246a782bc537 text-orange-800 font-medium",children:["Remaining after withdrawal: ",(aB()-parseFloat(ac)).toFixed(2)," Qtl (from warehouse)"]}),parseFloat(ac)>.8*aB()&&(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-orange-600 text-xs mt-1",children:"You're withdrawing more than 80% of available stock"})]})]})}),(0,b.jsxs)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-500 mt-1",children:["Maximum withdrawal limited by: Min(User Stock: ",Y.quantity," Qtl, Warehouse Stock: ",aA(Y.category_id)," Qtl)"]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,b.jsxs)("label",{className:"jsx-5b01246a782bc537 block text-sm font-semibold text-gray-700 mb-2",children:["Withdrawal Reason ",(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-red-500",children:"*"})]}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 grid grid-cols-2 gap-3",children:ay.map(a=>{let c=ae===a.id;return(0,b.jsx)("button",{type:"button",onClick:()=>af(a.id),className:`jsx-5b01246a782bc537 p-3 rounded-xl border-2 transition-all duration-200 ${c?"border-orange-500 bg-orange-50 ring-2 ring-orange-500/20":"border-gray-200 hover:border-gray-300 bg-white"}`,children:(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex items-center gap-2",children:[(0,b.jsx)(a.icon,{className:`h-5 w-5 ${c?"text-orange-600":"text-gray-400"}`}),(0,b.jsx)("span",{className:`jsx-5b01246a782bc537 text-sm font-medium ${c?"text-gray-900":"text-gray-600"}`,children:a.label})]})},a.id)})})]}),ac&&aa&&(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 border border-indigo-200 animate-slideUp",children:[(0,b.jsxs)("h3",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,b.jsx)(t.Calculator,{className:"h-5 w-5 text-indigo-600"}),"Withdrawal Value"]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 space-y-3",children:[(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Quantity"}),(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 font-medium text-gray-900",children:[ac," Quintal"]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-600",children:"Rate per Quintal"}),(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 font-medium text-gray-900",children:["₹",aa.price]})]}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 border-t border-indigo-200 pt-3",children:(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex justify-between items-center",children:[(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 font-semibold text-gray-700",children:"Total Value"}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 text-right",children:[(0,b.jsxs)("span",{className:"jsx-5b01246a782bc537 text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:["₹",aF()]}),(0,b.jsx)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-500 mt-0.5",children:"Market value at withdrawal"})]})]})})]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537",children:[(0,b.jsxs)("label",{className:"jsx-5b01246a782bc537 block text-sm font-semibold text-gray-700 mb-2",children:["Additional Notes ",(0,b.jsx)("span",{className:"jsx-5b01246a782bc537 text-gray-400",children:"(Optional)"})]}),(0,b.jsx)("textarea",{placeholder:"Enter any additional information...",rows:3,value:am,onChange:a=>an(a.target.value),className:"jsx-5b01246a782bc537 w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-red-500/10 focus:border-red-500 transition-all duration-200 resize-none"})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex gap-3 pt-2",children:[(0,b.jsx)("button",{onClick:()=>{Z(null),ad(""),af(""),an(""),aj(2)},className:"jsx-5b01246a782bc537 flex-1 py-3.5 px-6 rounded-xl font-semibold border-2 border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Back"}),(0,b.jsxs)("button",{onClick:()=>al(!0),disabled:!ac||!ae||ag||parseFloat(ac)>aB(),className:"jsx-5b01246a782bc537 flex-1 relative overflow-hidden group rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 absolute inset-0 bg-gradient-to-r from-red-600 to-orange-600 transition-transform group-hover:scale-105"}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 relative flex items-center justify-center gap-2 px-6 py-3.5 text-white font-semibold",children:ag?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Loader2,{className:"h-5 w-5 animate-spin"}),(0,b.jsx)("span",{className:"jsx-5b01246a782bc537",children:"Processing..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B.PackageMinus,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"jsx-5b01246a782bc537",children:"Process Withdrawal"}),(0,b.jsx)(u.ArrowRight,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]})})]})]}),(0,b.jsxs)("div",{className:"jsx-5b01246a782bc537 flex gap-3 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[(0,b.jsx)(z.Shield,{className:"h-5 w-5 text-gray-600 flex-shrink-0 mt-0.5"}),(0,b.jsx)("div",{className:"jsx-5b01246a782bc537 flex-1",children:(0,b.jsxs)("p",{className:"jsx-5b01246a782bc537 text-xs text-gray-600 leading-relaxed",children:["This withdrawal will be permanently recorded from ",(0,b.jsx)("strong",{className:"jsx-5b01246a782bc537",children:aq?.warehouseName})," with today's market value of ₹",aF(),". The grain will be removed from both the farmer's inventory and warehouse stock immediately."]})})]})]})]})]})]}),(0,b.jsx)(()=>{if(!ak)return null;aB();let a=Y?(parseFloat(Y.quantity)-parseFloat(ac||0)).toFixed(2):"0",c=Y?(aA(Y.category_id)-parseFloat(ac||0)).toFixed(2):"0",d=ay.find(a=>a.id===ae);return(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md",onClick:()=>al(!1)}),(0,b.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] bg-white rounded-3xl shadow-2xl overflow-auto animate-modalSlide no-scrollbar",children:[(0,b.jsx)("div",{className:"h-2 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500"}),(0,b.jsxs)("div",{className:"p-6 md:p-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-3 bg-gradient-to-br from-red-500 to-orange-600 rounded-2xl shadow-lg",children:(0,b.jsx)(B.PackageMinus,{className:"h-6 w-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Confirm Withdrawal"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:"Review withdrawal details before confirming"})]})]}),(0,b.jsx)("button",{onClick:()=>al(!1),className:"p-2.5 hover:bg-gray-100 rounded-xl transition-colors",children:(0,b.jsx)(g.X,{className:"h-5 w-5 text-gray-500"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-50 rounded-2xl p-5 border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(H.Building2,{className:"h-5 w-5 text-slate-600"}),(0,b.jsx)("h4",{className:"font-semibold text-gray-800",children:"Warehouse Details"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)(aI,{label:"Warehouse",value:aq?.warehouseName}),(0,b.jsx)(aI,{label:"Location",value:aq?.warehouseLocation})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-5 border border-blue-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(D.UserCheck,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)("h4",{className:"font-semibold text-gray-800",children:"Farmer Details"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)(aI,{label:"Name",value:Q?.name}),(0,b.jsx)(aI,{label:"ID",value:Q?.userId}),(0,b.jsx)(aI,{label:"Email",value:Q?.email}),(0,b.jsx)(aI,{label:"Phone",value:Q?.phone_number||"-"})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-5 border border-purple-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(x.Wheat,{className:"h-5 w-5 text-purple-600"}),(0,b.jsx)("h4",{className:"font-semibold text-gray-800",children:"Grain Details"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,b.jsx)(aI,{label:"Type",value:Y?.grain_type}),(0,b.jsx)(aI,{label:"Quality",value:Y?.quality}),(0,b.jsx)(aI,{label:"User's Stock",value:`${Y?.quantity} Qtl`}),(0,b.jsx)(aI,{label:"Warehouse Stock",value:`${aA(Y?.category_id)} Qtl`}),(0,b.jsx)(aI,{label:"Withdrawing",value:`${ac||0} Qtl`,highlight:!0}),(0,b.jsx)(aI,{label:"Rate",value:`₹${aa?.price||0}/Qtl`})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 rounded-2xl p-5 border border-amber-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(A.Activity,{className:"h-5 w-5 text-amber-600"}),(0,b.jsx)("h4",{className:"font-semibold text-gray-800",children:"Stock Impact"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"bg-white/70 rounded-xl p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"User's Remaining"}),(0,b.jsxs)("p",{className:"font-bold text-lg text-gray-900",children:[a," Qtl"]})]}),(0,b.jsxs)("div",{className:"bg-white/70 rounded-xl p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Warehouse Remaining"}),(0,b.jsxs)("p",{className:"font-bold text-lg text-gray-900",children:[c," Qtl"]})]})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl p-5 border border-emerald-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(t.Calculator,{className:"h-5 w-5 text-emerald-600"}),(0,b.jsx)("h4",{className:"font-semibold text-gray-800",children:"Withdrawal Value"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Quantity × Rate"}),(0,b.jsxs)("span",{className:"text-gray-900 font-medium",children:[ac||0," × ₹",aa?.price||0]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-3 border-t border-emerald-200",children:[(0,b.jsx)("span",{className:"text-lg font-semibold text-gray-800",children:"Total Value"}),(0,b.jsxs)("span",{className:"text-2xl font-bold text-emerald-600",children:["₹",aF()]})]})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-5 border border-orange-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(F.LogOut,{className:"h-5 w-5 text-orange-600"}),(0,b.jsx)("h4",{className:"font-semibold text-gray-800",children:"Withdrawal Information"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[d&&(0,b.jsx)(d.icon,{className:"h-5 w-5 text-orange-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Reason"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:d?.label})]})]}),am&&(0,b.jsxs)("div",{className:"bg-white/70 rounded-xl p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Additional Notes"}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:am})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 p-4 bg-red-50 border border-red-200 rounded-xl",children:[(0,b.jsx)(l.AlertCircle,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-red-800 font-medium",children:"Important: This action cannot be reversed"}),(0,b.jsxs)("p",{className:"text-xs text-red-700 mt-1",children:[ac||0," quintals (Value: ₹",aF(),") will be permanently removed from both the farmer's inventory and warehouse stock."]})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:()=>al(!1),className:"flex-1 py-3.5 px-6 rounded-xl font-semibold border-2 border-gray-300 text-gray-700 hover:bg-gray-50 transition-all",children:"Cancel"}),(0,b.jsx)("button",{onClick:aG,disabled:ag,className:"flex-1 py-3.5 px-6 rounded-xl font-semibold bg-gradient-to-r from-red-600 to-orange-600 text-white hover:from-red-700 hover:to-orange-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg",children:ag?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Loader2,{className:"h-5 w-5 animate-spin"}),"Processing..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Check,{className:"h-5 w-5"}),"Confirm Withdrawal"]})})]})]})]})]})},{className:"jsx-5b01246a782bc537"}),(0,b.jsx)(c.default,{id:"5b01246a782bc537",children:"@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}.animate-float.jsx-5b01246a782bc537{animation:6s ease-in-out infinite float}.animation-delay-2000.jsx-5b01246a782bc537{animation-delay:2s}.animation-delay-4000.jsx-5b01246a782bc537{animation-delay:4s}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-slideDown.jsx-5b01246a782bc537{animation:.3s ease-out slideDown}@keyframes slideUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-slideUp.jsx-5b01246a782bc537{animation:.3s ease-out slideUp}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.animate-fadeIn.jsx-5b01246a782bc537{animation:.5s ease-out fadeIn}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{transform:scale(1.05)}70%{transform:scale(.9)}to{opacity:1;transform:scale(1)}}.animate-bounceIn.jsx-5b01246a782bc537{animation:.6s cubic-bezier(.68,-.55,.265,1.55) bounceIn}@keyframes modalSlide{0%{opacity:0;transform:scale(.9)translateY(20px)}to{opacity:1;transform:scale(1)translateY(0)}}.animate-modalSlide.jsx-5b01246a782bc537{animation:.3s ease-out modalSlide}"})]})}])}];

//# sourceMappingURL=src_app_manager_withdraw_page_jsx_930c47bb._.js.map