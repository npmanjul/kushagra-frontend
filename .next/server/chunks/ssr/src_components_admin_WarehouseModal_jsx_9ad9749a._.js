module.exports=[12397,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33508),e=a.i(70893),f=a.i(24987),g=a.i(83497),h=a.i(46842),i=a.i(46864),j=a.i(60246),k=a.i(33441),l=a.i(5784),m=a.i(67900),n=a.i(8406),o=a.i(60779),p=a.i(6704);a.s(["default",0,({isOpen:a,onClose:q,onSubmit:r,managers:s,supervisors:t,staff:u})=>{let[v,w]=(0,c.useState)({name:"",location:"",capacity_quintal:"",manager_id:"",supervisor_id:"",staff_ids:[]}),[x,y]=(0,c.useState)({}),[z,A]=(0,c.useState)(!1),B=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=a=>{B.current&&!B.current.contains(a.target)&&A(!1)};return z&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[z]);let C=a=>{let{name:b,value:c}=a.target;w(a=>({...a,[b]:c})),x[b]&&y(a=>({...a,[b]:""}))},D=a=>{w(b=>({...b,staff_ids:b.staff_ids.includes(a)?b.staff_ids.filter(b=>b!==a):[...b.staff_ids,a]})),x.staff_ids&&y(a=>({...a,staff_ids:""}))},E=async a=>{let b;a.preventDefault();let c=(b={},v.name.trim()||(b.name="Warehouse name is required"),v.location.trim()||(b.location="Location is required"),(!v.capacity_quintal||v.capacity_quintal<=0)&&(b.capacity_quintal="Valid capacity is required"),v.manager_id||(b.manager_id="Manager selection is required"),v.supervisor_id||(b.supervisor_id="Supervisor selection is required"),0===v.staff_ids.length&&(b.staff_ids="At least one staff member is required"),b);if(Object.keys(c).length>0)return void y(c);try{let a={name:v.name,location:v.location,capacity_quintal:parseFloat(v.capacity_quintal),manager_id:v.manager_id,supervisor_id:v.supervisor_id,staff_ids:v.staff_ids},b=await fetch(`${o.default}/warehouse/createwarehouse`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();b.ok?(p.default.success("Warehouse created successfully"),r?.(c),w({name:"",location:"",capacity_quintal:"",manager_id:"",supervisor_id:"",staff_ids:[]}),y({}),q?.()):p.default.error(c.message||"Failed to create warehouse")}catch(a){console.error("Error creating warehouse:",a),p.default.error("Something went wrong while creating warehouse")}};return a?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:(0,b.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden transform transition-all animate-slideUp",children:[(0,b.jsxs)("div",{className:"relative bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),(0,b.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 bg-white/20 backdrop-blur-sm rounded-2xl",children:(0,b.jsx)(m.Building2,{className:"w-7 h-7 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Create New Warehouse"}),(0,b.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"Fill in the details to add a new warehouse"})]})]}),(0,b.jsx)("button",{onClick:q,className:"p-2.5 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-200 backdrop-blur-sm",children:(0,b.jsx)(d.X,{className:"w-5 h-5 text-white"})})]})]}),(0,b.jsxs)("form",{onSubmit:E,className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"group",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Warehouse Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-1.5 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg",children:(0,b.jsx)(e.Warehouse,{className:"w-4 h-4 text-white"})}),(0,b.jsx)("input",{type:"text",name:"name",value:v.name,onChange:C,placeholder:"Enter warehouse name",className:`w-full pl-12 pr-4 py-3.5 border-2 rounded-xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200 ${x.name?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`})]}),x.name&&(0,b.jsxs)("p",{className:"mt-2 text-sm text-red-500 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),x.name]})]}),(0,b.jsxs)("div",{className:"group",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Location ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-1.5 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg",children:(0,b.jsx)(f.MapPin,{className:"w-4 h-4 text-white"})}),(0,b.jsx)("input",{type:"text",name:"location",value:v.location,onChange:C,placeholder:"Enter location",className:`w-full pl-12 pr-4 py-3.5 border-2 rounded-xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200 ${x.location?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`})]}),x.location&&(0,b.jsxs)("p",{className:"mt-2 text-sm text-red-500 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),x.location]})]}),(0,b.jsxs)("div",{className:"group",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Capacity (Quintal) ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-1.5 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg",children:(0,b.jsx)(g.Package,{className:"w-4 h-4 text-white"})}),(0,b.jsx)("input",{type:"number",name:"capacity_quintal",value:v.capacity_quintal,onChange:C,placeholder:"Enter capacity",step:"0.01",min:"0",className:`w-full pl-12 pr-4 py-3.5 border-2 rounded-xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200 ${x.capacity_quintal?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`})]}),x.capacity_quintal&&(0,b.jsxs)("p",{className:"mt-2 text-sm text-red-500 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),x.capacity_quintal]})]}),(0,b.jsxs)("div",{className:"group",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Manager ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-1.5 bg-gradient-to-br from-orange-500 to-red-500 rounded-lg",children:(0,b.jsx)(h.User,{className:"w-4 h-4 text-white"})}),(0,b.jsxs)("select",{name:"manager_id",value:v.manager_id,onChange:C,className:`w-full pl-12 pr-10 py-3.5 border-2 rounded-xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200 appearance-none bg-white cursor-pointer ${x.manager_id?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,b.jsx)("option",{value:"",children:"Select a manager"}),s?.map(a=>(0,b.jsxs)("option",{value:a._id,children:[a.name,"-",a.warehouse_name?a.warehouse_name:"No Warehouse Assigned",",",a.warehouse_location]},a._id))]}),(0,b.jsx)(l.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),x.manager_id&&(0,b.jsxs)("p",{className:"mt-2 text-sm text-red-500 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),x.manager_id]})]}),(0,b.jsxs)("div",{className:"group",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Supervisor ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-1.5 bg-gradient-to-br from-cyan-500 to-blue-500 rounded-lg",children:(0,b.jsx)(i.UserCheck,{className:"w-4 h-4 text-white"})}),(0,b.jsxs)("select",{name:"supervisor_id",value:v.supervisor_id,onChange:C,className:`w-full pl-12 pr-10 py-3.5 border-2 rounded-xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200 appearance-none bg-white cursor-pointer ${x.supervisor_id?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,b.jsx)("option",{value:"",children:"Select a supervisor"}),t?.map(a=>(0,b.jsxs)("option",{value:a._id,children:[a.name,"-",a.warehouse_name?a.warehouse_name:"No Warehouse Assigned",",",a.warehouse_location]},a._id))]}),(0,b.jsx)(l.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),x.supervisor_id&&(0,b.jsxs)("p",{className:"mt-2 text-sm text-red-500 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),x.supervisor_id]})]})]}),(0,b.jsxs)("div",{className:"group",ref:B,children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-1.5 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg",children:(0,b.jsx)(j.Users,{className:"w-4 h-4 text-white"})}),"Staff Members ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]})}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{onClick:()=>A(!z),className:`w-full px-4 py-3.5 border-2 rounded-xl cursor-pointer flex items-center justify-between transition-all duration-200 ${x.staff_ids?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"} ${z?"ring-4 ring-blue-500/20 border-blue-500":""}`,children:[(0,b.jsx)("div",{className:"flex-1",children:v.staff_ids.length>0?(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:v.staff_ids.length<=3?v.staff_ids.map(a=>{let c=u?.find(b=>b._id===a);return c?(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-sm rounded-full font-medium",children:[c.name,"-",c.warehouse_name?c.warehouse_name:"No Warehouse Assigned",",",c.warehouse_location,(0,b.jsx)("button",{type:"button",onClick:b=>{b.stopPropagation(),D(a)},className:"hover:bg-white/20 rounded-full p-0.5 transition-colors",children:(0,b.jsx)(d.X,{className:"w-3.5 h-3.5"})})]},a):null}):(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-sm rounded-full font-medium",children:[v.staff_ids.length," members selected"]}),(0,b.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),w(a=>({...a,staff_ids:[]}))},className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)(d.X,{className:"w-4 h-4"})})]})}):(0,b.jsx)("span",{className:"text-gray-400",children:"Click to select staff members"})}),(0,b.jsx)(l.ChevronDown,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-64 overflow-hidden",children:u&&u.length>0?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-gray-50 to-gray-100 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[v.staff_ids.length," of ",u.length," selected"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),w(a=>({...a,staff_ids:u.map(a=>a._id)})),x.staff_ids&&y(a=>({...a,staff_ids:""}))},className:"px-3 py-1 text-xs font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Select All"}),(0,b.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),w(a=>({...a,staff_ids:[]}))},className:"px-3 py-1 text-xs font-medium text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:"Clear"})]})]}),(0,b.jsx)("div",{className:"overflow-y-auto max-h-48 p-2",children:u.map(a=>(0,b.jsxs)("div",{onClick:b=>{b.stopPropagation(),D(a._id)},className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 mb-1 ${v.staff_ids.includes(a._id)?"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200":"hover:bg-gray-50"}`,children:[(0,b.jsx)("div",{className:`w-5 h-5 border-2 rounded-md flex items-center justify-center transition-all duration-200 ${v.staff_ids.includes(a._id)?"bg-gradient-to-r from-blue-500 to-indigo-500 border-blue-500":"border-gray-300 hover:border-gray-400"}`,children:v.staff_ids.includes(a._id)&&(0,b.jsx)(k.Check,{className:"w-3 h-3 text-white"})}),(0,b.jsxs)("span",{className:`text-sm font-medium ${v.staff_ids.includes(a._id)?"text-blue-700":"text-gray-700"}`,children:[a.name,"-",a.warehouse_name?a.warehouse_name:"No Warehouse Assigned",",",a.warehouse_location]})]},a._id))})]}):(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsx)(j.Users,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No staff members available"})]})})]}),x.staff_ids&&(0,b.jsxs)("p",{className:"mt-2 text-sm text-red-500 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),x.staff_ids]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-6 border-t border-gray-100",children:[(0,b.jsx)("button",{type:"button",onClick:q,className:"flex-1 px-6 py-3.5 border-2 border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 font-semibold transition-all duration-200",children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",className:"flex-1 px-6 py-3.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 font-semibold transition-all duration-200 shadow-lg shadow-blue-500/25 flex items-center justify-center gap-2",children:[(0,b.jsx)(n.Sparkles,{className:"w-5 h-5"}),"Create Warehouse"]})]})]})]})}):null}])}];

//# sourceMappingURL=src_components_admin_WarehouseModal_jsx_9ad9749a._.js.map