module.exports=[22605,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(92258),e=a.i(43108),f=a.i(3314),g=a.i(16201),h=a.i(92e3),i=a.i(32860),j=a.i(210),k=a.i(96221),l=a.i(77156),m=a.i(41379),n=a.i(37047),o=a.i(60779),p=a.i(50944);a.s(["default",0,()=>{let[a,q]=(0,c.useState)(1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(["","","","","",""]),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(0),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(""),R=(0,p.useRouter)();(0,c.useEffect)(()=>{if(J>0){let a=setTimeout(()=>K(J-1),1e3);return()=>clearTimeout(a)}},[J]);let S=async()=>{if(r.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?t.trim()?!(t.length<6)||(G("Password must be at least 6 characters"),!1):(G("Please enter your password"),!1):(G("Please enter a valid email address"),!1):(G("Please enter your email address"),!1)){E(!0),G(""),I("");try{let a=await fetch(`${o.default}/auth/sendotp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:t})}),b=await a.json();if(!a.ok)throw Error(b?.message||"Failed to send OTP");b?.token&&Q(b.token),I("OTP sent successfully to your email"),K(60),setTimeout(()=>{q(2),I("")},1500)}catch(a){G(a.message||"Failed to send OTP. Please try again."),console.error("Error sending OTP:",a)}finally{E(!1)}}},T=async()=>{y(["","","","","",""]),G(""),E(!0);try{let a=await fetch(`${o.default}/auth/sendotp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:t,type:"PIN_RESET"})}),b=await a.json();if(!a.ok)throw Error(b?.message||"Failed to resend OTP");I("OTP resent successfully"),K(60),setTimeout(()=>I(""),3e3)}catch(a){G(a.message||"Failed to resend OTP. Please try again.")}finally{E(!1)}},U=a=>{a.preventDefault();let b=a.clipboardData.getData("text").slice(0,6);if(!/^\d+$/.test(b))return;let c=[...x];for(let a=0;a<b.length;a++)c[a]=b[a];y(c)},V=async()=>{let a=x.join("");if(6!==a.length)return void G("Please enter a 6-digit OTP");E(!0),G("");try{let b=await fetch(`${o.default}/auth/verifyotp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:a,type:"PIN_RESET"})}),c=await b.json();if(!b.ok)throw Error(c?.message||"Invalid OTP");I("OTP verified successfully!"),setTimeout(()=>{q(3),I("")},1e3)}catch(a){G(a.message||"Invalid OTP. Please try again."),console.error("Error verifying OTP:",a)}finally{E(!1)}},W=async()=>{if(6!==z.length)return void G("PIN must be 6 digits");if(z!==B)return void G("PINs do not match");E(!0),G("");try{let a=await fetch(`${o.default}/auth/resetpin`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({token:P,newPin:z})}),b=await a.json();if(!a.ok)throw Error(b?.message||"Failed to reset PIN");q(4)}catch(a){G(a.message||"Failed to reset PIN. Please try again."),console.error("Error resetting PIN:",a)}finally{E(!1)}},X=(a,b)=>{/^\d*$/.test(a)&&a.length<=6&&("new"===b?A(a):C(a),G(""))};return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4 sm:p-6 md:p-8",children:(0,b.jsx)("div",{className:"bg-white rounded-3xl shadow-2xl shadow-black/10 max-w-md w-full p-6 sm:p-8 border border-gray-100",children:(0,b.jsxs)("div",{className:"relative",children:[a<4&&(0,b.jsx)("div",{className:"flex items-center justify-center gap-2 mb-8",children:[1,2,3].map(d=>(0,b.jsxs)(c.default.Fragment,{children:[(0,b.jsx)("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-semibold transition-all duration-300 border-2 ${a>d?"bg-black border-black text-white":a===d?"bg-black border-black text-white scale-110 shadow-lg shadow-black/20":"bg-white border-gray-200 text-gray-400"}`,children:a>d?(0,b.jsx)(g.CheckCircle,{className:"w-4 h-4"}):d}),d<3&&(0,b.jsx)("div",{className:`w-12 h-0.5 rounded-full transition-all duration-500 ${a>d?"bg-black":"bg-gray-200"}`})]},d))}),F&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-xl flex items-start gap-3 text-gray-700",children:[(0,b.jsx)(h.AlertCircle,{className:"w-5 h-5 flex-shrink-0 mt-0.5 text-black"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:F})]}),H&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-xl flex items-start gap-3 text-gray-700",children:[(0,b.jsx)(g.CheckCircle,{className:"w-5 h-5 flex-shrink-0 mt-0.5 text-black"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:H})]}),(0,b.jsxs)("div",{className:"transition-all duration-300 ease-in-out",children:[1===a&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"w-20 h-20 mx-auto mb-5 bg-black rounded-2xl flex items-center justify-center shadow-xl shadow-black/20",children:(0,b.jsx)(n.KeyRound,{className:"w-10 h-10 text-white"})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-black mb-2",children:"Reset Your PIN"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Enter your credentials to receive a verification code"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,b.jsx)(d.Mail,{className:"h-5 w-5 text-gray-400"})}),(0,b.jsx)("input",{type:"email",value:r,onChange:a=>{s(a.target.value),G("")},placeholder:"Enter your email",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:border-black focus:ring-2 focus:ring-black/5 focus:outline-none transition-all bg-white text-black placeholder-gray-400",autoFocus:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,b.jsx)(e.Lock,{className:"h-5 w-5 text-gray-400"})}),(0,b.jsx)("input",{type:v?"text":"password",value:t,onChange:a=>{u(a.target.value),G("")},placeholder:"Enter your password",className:"w-full pl-12 pr-12 py-4 border-2 border-gray-200 rounded-xl focus:border-black focus:ring-2 focus:ring-black/5 focus:outline-none transition-all bg-white text-black placeholder-gray-400"}),(0,b.jsx)("button",{type:"button",onClick:()=>w(!v),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-black transition-colors",children:v?(0,b.jsx)(m.EyeOff,{className:"h-5 w-5"}):(0,b.jsx)(l.Eye,{className:"h-5 w-5"})})]})]}),(0,b.jsx)("button",{onClick:S,disabled:D||!r||!t,className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-900 transform hover:-translate-y-0.5 hover:shadow-xl hover:shadow-black/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-none flex items-center justify-center group",children:D?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Loader2,{className:"w-5 h-5 animate-spin mr-2"}),"Verifying..."]}):(0,b.jsxs)(b.Fragment,{children:["Send Verification Code",(0,b.jsx)(i.ArrowRight,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})}),(0,b.jsx)("div",{className:"text-center pt-2",children:(0,b.jsxs)("button",{onClick:()=>R.push("/login"),className:"text-sm text-gray-500 hover:text-black font-medium transition-colors inline-flex items-center gap-1",children:[(0,b.jsx)(j.ArrowLeft,{className:"w-4 h-4"}),"Back to Login"]})})]}),2===a&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"w-20 h-20 mx-auto mb-5 bg-black rounded-2xl flex items-center justify-center shadow-xl shadow-black/20",children:(0,b.jsx)(d.Mail,{className:"w-10 h-10 text-white"})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-black mb-2",children:"Verify Your Email"}),(0,b.jsxs)("p",{className:"text-gray-500",children:["We sent a 6-digit code to"," ",(0,b.jsx)("span",{className:"font-semibold text-black",children:(a=>{if(!a)return"";let[b,c]=a.split("@"),d=b.substring(0,2)+"****";return`${d}@${c}`})(r)})]})]}),(0,b.jsx)("div",{className:"flex justify-center gap-2 sm:gap-3",children:x.map((a,c)=>(0,b.jsx)("input",{id:`otp-${c}`,type:"text",inputMode:"numeric",maxLength:"1",value:a,onChange:a=>((a,b)=>{if(!/^\d*$/.test(b))return;let c=[...x];if(c[a]=b.slice(-1),y(c),G(""),b&&a<5){let b=document.getElementById(`otp-${a+1}`);b?.focus()}})(c,a.target.value),onKeyDown:a=>((a,b)=>{if("Backspace"===b.key&&!x[a]&&a>0){let b=document.getElementById(`otp-${a-1}`);b?.focus()}})(c,a),onPaste:U,className:"w-11 h-14 sm:w-12 sm:h-16 text-center text-xl sm:text-2xl font-bold border-2 border-gray-200 rounded-xl focus:border-black focus:ring-2 focus:ring-black/5 focus:outline-none transition-all bg-white text-black",autoFocus:0===c},c))}),(0,b.jsx)("div",{className:"text-center",children:J>0?(0,b.jsxs)("p",{className:"text-gray-500 text-sm",children:["Resend code in"," ",(0,b.jsxs)("span",{className:"font-semibold text-black tabular-nums",children:[J,"s"]})]}):(0,b.jsx)("button",{onClick:T,disabled:D,className:"text-black hover:text-gray-700 font-medium text-sm underline underline-offset-4 disabled:opacity-50 transition-colors",children:"Didn't receive code? Resend"})}),(0,b.jsx)("button",{onClick:V,disabled:D||6!==x.join("").length,className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-900 transform hover:-translate-y-0.5 hover:shadow-xl hover:shadow-black/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:D?(0,b.jsx)(k.Loader2,{className:"w-5 h-5 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:["Verify Code",(0,b.jsx)(i.ArrowRight,{className:"w-5 h-5 ml-2"})]})}),(0,b.jsxs)("button",{onClick:()=>{q(1),y(["","","","","",""]),K(0),G("")},className:"w-full text-gray-500 hover:text-black font-medium transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)(j.ArrowLeft,{className:"w-4 h-4"}),"Change Email"]})]}),3===a&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"w-20 h-20 mx-auto mb-5 bg-black rounded-2xl flex items-center justify-center shadow-xl shadow-black/20",children:(0,b.jsx)(e.Lock,{className:"w-10 h-10 text-white"})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-black mb-2",children:"Create New PIN"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Choose a secure 6-digit PIN for your account"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"New PIN"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:L?"text":"password",maxLength:"6",value:z,onChange:a=>X(a.target.value,"new"),placeholder:"••••••",className:"w-full px-4 py-4 text-center text-2xl font-bold tracking-[0.5em] border-2 border-gray-200 rounded-xl focus:border-black focus:ring-2 focus:ring-black/5 focus:outline-none transition-all bg-white text-black placeholder-gray-300",autoComplete:"off",autoFocus:!0}),(0,b.jsx)("button",{type:"button",onClick:()=>M(!L),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-black transition-colors",children:L?(0,b.jsx)(m.EyeOff,{className:"w-5 h-5"}):(0,b.jsx)(l.Eye,{className:"w-5 h-5"})})]}),z.length>0&&(0,b.jsx)("div",{className:"flex gap-1 mt-2",children:[...Array(6)].map((a,c)=>(0,b.jsx)("div",{className:`h-1.5 flex-1 rounded-full transition-all ${c<z.length?"bg-black":"bg-gray-200"}`},c))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm PIN"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:N?"text":"password",maxLength:"6",value:B,onChange:a=>X(a.target.value,"confirm"),placeholder:"••••••",className:"w-full px-4 py-4 text-center text-2xl font-bold tracking-[0.5em] border-2 border-gray-200 rounded-xl focus:border-black focus:ring-2 focus:ring-black/5 focus:outline-none transition-all bg-white text-black placeholder-gray-300",autoComplete:"off"}),(0,b.jsx)("button",{type:"button",onClick:()=>O(!N),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-black transition-colors",children:N?(0,b.jsx)(m.EyeOff,{className:"w-5 h-5"}):(0,b.jsx)(l.Eye,{className:"w-5 h-5"})})]})]}),6===z.length&&B.length>0&&(0,b.jsx)("div",{className:`p-3 rounded-xl flex items-center gap-2 border ${z===B?"bg-gray-50 text-black border-gray-200":"bg-white text-gray-600 border-gray-200"}`,children:z===B?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.CheckCircle,{className:"w-4 h-4 flex-shrink-0"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"PINs match!"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.AlertCircle,{className:"w-4 h-4 flex-shrink-0"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"PINs don't match"})]})}),(0,b.jsx)("button",{onClick:W,disabled:D||6!==z.length||6!==B.length||z!==B,className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-900 transform hover:-translate-y-0.5 hover:shadow-xl hover:shadow-black/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:D?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Loader2,{className:"w-5 h-5 animate-spin mr-2"}),"Resetting PIN..."]}):(0,b.jsxs)(b.Fragment,{children:["Reset PIN",(0,b.jsx)(f.Shield,{className:"w-5 h-5 ml-2"})]})})]}),4===a&&(0,b.jsxs)("div",{className:"text-center py-6",children:[(0,b.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 bg-black rounded-full flex items-center justify-center shadow-xl shadow-black/30",children:(0,b.jsx)(g.CheckCircle,{className:"w-12 h-12 text-white"})}),(0,b.jsx)("h3",{className:"text-3xl font-bold text-black mb-3",children:"PIN Reset Successful!"}),(0,b.jsx)("p",{className:"text-gray-500 mb-2",children:"Your PIN has been successfully updated"}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mb-8",children:"You can now use your new PIN for transactions"}),(0,b.jsxs)("button",{onClick:()=>R.push("/login"),className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-900 transform hover:-translate-y-0.5 hover:shadow-xl hover:shadow-black/20 transition-all flex items-center justify-center group",children:["Continue to Login",(0,b.jsx)(i.ArrowRight,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]})]})})})}])}];

//# sourceMappingURL=src_app_resetpin_page_dd078d0e.js.map