module.exports=[36991,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(70106);let e=(0,d.default)("apple",[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]]);var f=a.i(39761),g=a.i(11156),h=a.i(84505),i=a.i(15618);let j=(0,d.default)("receipt-cent",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M12 6.5v11",key:"ecfhkf"}],["path",{d:"M15 9.4a4 4 0 1 0 0 5.2",key:"1makmb"}]]),k=(0,d.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var l=a.i(24669),m=a.i(53277),n=a.i(70893),o=a.i(38124),o=o,p=a.i(22520),q=a.i(57344),r=a.i(90669),s=a.i(8406),t=a.i(6704),u=a.i(43897),v=a.i(60779),w=a.i(75147),x=a.i(33508),y=a.i(41675),z=a.i(83497);let A=(0,d.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),B=(0,d.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var C=a.i(41710),D=a.i(2835),E=a.i(24987),F=a.i(46842),G=a.i(63519),H=a.i(67900),I=a.i(67453),J=a.i(3314),K=a.i(46864),L=a.i(86520),M=a.i(35050),N=a.i(18398),O=a.i(4334),P=a.i(13749),Q=a.i(50522),R=a.i(66322),S=a.i(14753);let T=({isOpen:a,setIsOpen:d,category_id:e})=>{let[f,h]=(0,c.useState)("all"),[i,j]=(0,c.useState)(null),[k,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),q=async()=>{if(n(!0),e)try{let a=await fetch(`${v.default}/user/categorytransactiondetails/${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok)throw Error("Failed to fetch transactions");let b=await a.json();b.success&&j(b)}catch(a){console.error("Error fetching transactions:",a),t.toast.error("Failed to load transactions")}finally{n(!1)}};(0,c.useEffect)(()=>{a&&e&&q()},[e,a]);let r=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a||0),u=i?.transactions?i.transactions.reduce((a,b)=>{let c=b.grain?.total_amount||0,d=b.grain?.quantity_quintal||0,e=(b.price_analysis?.profit_per_quintal||0)*d;return"deposit"===b.transaction_type&&(a.totalDeposit+=c,a.depositQty+=d),"sell"===b.transaction_type&&(a.totalSell+=c,a.sellQty+=d),"loan"===b.transaction_type&&(a.totalLoan+=c),"withdraw"===b.transaction_type&&(a.totalWithdraw+=c,a.withdrawQty+=d),a.totalProfit+=e,a.totalCurrentValue+=b.price_analysis?.total_current_value||0,a},{totalDeposit:0,totalSell:0,totalLoan:0,totalWithdraw:0,totalProfit:0,totalCurrentValue:0,depositQty:0,sellQty:0,withdrawQty:0}):{},w=i?.transactions?.filter(a=>"all"===f||a.transaction_type===f)||[],T=[{key:"all",label:"All",icon:z.Package},{key:"deposit",label:"Deposits",icon:B},{key:"sell",label:"Sales",icon:A},{key:"withdraw",label:"Withdrawals",icon:A},{key:"loan",label:"Loans",icon:g.CreditCard}];return a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-0 md:p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-white w-full h-full md:h-auto md:max-w-5xl md:max-h-[90vh] md:rounded-3xl shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",children:[(0,b.jsxs)("div",{className:"relative bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-700 px-4 md:px-8 py-5 md:py-6 text-white overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24"}),(0,b.jsxs)("div",{className:"relative flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:(0,b.jsx)(M.Wheat,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl md:text-2xl font-bold",children:i?.category?.grain_type||"Loading..."}),i?.category?.quality&&(0,b.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,b.jsxs)("span",{className:"px-2.5 py-0.5 bg-white/20 backdrop-blur-sm text-white text-xs font-semibold rounded-full flex items-center gap-1",children:[(0,b.jsx)(s.Sparkles,{className:"w-3 h-3"}),"Grade ",i.category.quality]})})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-4 mt-3 ml-14",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(O.IndianRupee,{className:"w-4 h-4 text-indigo-200"}),(0,b.jsx)("span",{className:"text-indigo-100 text-sm",children:"Today's Rate:"}),(0,b.jsxs)("span",{className:"font-bold text-lg",children:[r(i?.category?.today_price_per_quintal),(0,b.jsx)("span",{className:"text-sm font-normal text-indigo-200",children:"/Qtl"})]})]})})]}),(0,b.jsx)("button",{onClick:()=>d(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-all",children:(0,b.jsx)(x.X,{className:"w-6 h-6"})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 px-4 md:px-8 py-4 bg-gradient-to-b from-gray-50 to-white border-b border-gray-100",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border border-emerald-100 rounded-xl p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"text-xs text-emerald-600 font-medium",children:"Total Deposits"}),(0,b.jsx)(B,{className:"w-4 h-4 text-emerald-500"})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-emerald-900",children:r(u.totalDeposit)}),(0,b.jsxs)("p",{className:"text-xs text-emerald-600 mt-1",children:[u.depositQty," Quintals"]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:"Total Sales"}),(0,b.jsx)(A,{className:"w-4 h-4 text-blue-500"})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-blue-900",children:r(u.totalSell)}),(0,b.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[u.sellQty," Quintals"]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-100 rounded-xl p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"text-xs text-amber-600 font-medium",children:"Current Value"}),(0,b.jsx)(R.Banknote,{className:"w-4 h-4 text-amber-500"})]}),(0,b.jsx)("p",{className:"text-lg font-bold text-amber-900",children:r(u.totalCurrentValue)}),(0,b.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Market valuation"})]}),(0,b.jsxs)("div",{className:`bg-gradient-to-br ${u.totalProfit>=0?"from-emerald-50 to-teal-50 border-emerald-100":"from-rose-50 to-red-50 border-rose-100"} border rounded-xl p-3`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:`text-xs font-medium ${u.totalProfit>=0?"text-emerald-600":"text-rose-600"}`,children:"Net Profit/Loss"}),u.totalProfit>=0?(0,b.jsx)(l.TrendingUp,{className:"w-4 h-4 text-emerald-500"}):(0,b.jsx)(m.TrendingDown,{className:"w-4 h-4 text-rose-500"})]}),(0,b.jsxs)("p",{className:`text-lg font-bold ${u.totalProfit>=0?"text-emerald-900":"text-rose-900"}`,children:[u.totalProfit>=0?"+":"",r(u.totalProfit)]}),(0,b.jsx)("p",{className:`text-xs mt-1 ${u.totalProfit>=0?"text-emerald-600":"text-rose-600"}`,children:"From price changes"})]})]}),(0,b.jsx)("div",{className:"px-4 md:px-8 py-3 bg-white border-b border-gray-100",children:(0,b.jsx)("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:T.map(a=>{let c=a.icon,d=f===a.key,e="all"===a.key?i?.transactions?.length||0:i?.transactions?.filter(b=>b.transaction_type===a.key).length||0;return(0,b.jsxs)("button",{onClick:()=>h(a.key),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium text-sm whitespace-nowrap transition-all ${d?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/30":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[(0,b.jsx)(c,{className:"w-4 h-4"}),a.label,(0,b.jsx)("span",{className:`px-1.5 py-0.5 rounded-full text-xs ${d?"bg-white/20":"bg-gray-200 text-gray-700"}`,children:e})]},a.key)})})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto px-4 md:px-8 py-4 bg-gray-50/50",children:k?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)("div",{className:"w-10 h-10 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):w.length>0?(0,b.jsx)("div",{className:"space-y-4",children:w.map((a,c)=>{let d=(a=>{switch(a){case"deposit":return{color:"from-emerald-500 to-green-600",light:"bg-gradient-to-br from-emerald-50 to-green-50",text:"text-emerald-600",border:"border-emerald-200",badge:"bg-emerald-100 text-emerald-700 border-emerald-200",hover:"hover:border-emerald-300 hover:shadow-emerald-100",label:"Grain Deposit"};case"sell":return{color:"from-blue-500 to-indigo-600",light:"bg-gradient-to-br from-blue-50 to-indigo-50",text:"text-blue-600",border:"border-blue-200",badge:"bg-blue-100 text-blue-700 border-blue-200",hover:"hover:border-blue-300 hover:shadow-blue-100",label:"Grain Sale"};case"withdraw":return{color:"from-rose-500 to-red-600",light:"bg-gradient-to-br from-rose-50 to-red-50",text:"text-rose-600",border:"border-rose-200",badge:"bg-rose-100 text-rose-700 border-rose-200",hover:"hover:border-rose-300 hover:shadow-rose-100",label:"Grain Withdrawal"};case"loan":return{color:"from-violet-500 to-purple-600",light:"bg-gradient-to-br from-violet-50 to-purple-50",text:"text-violet-600",border:"border-violet-200",badge:"bg-violet-100 text-violet-700 border-violet-200",hover:"hover:border-violet-300 hover:shadow-violet-100",label:"Loan Credit"};default:return{color:"from-gray-500 to-slate-600",light:"bg-gray-50",text:"text-gray-600",border:"border-gray-200",badge:"bg-gray-100 text-gray-700 border-gray-200",hover:"hover:border-gray-300",label:"Transaction"}}})(a.transaction_type),e=o===a.transaction_id,f=(a=>{if(!a)return 0;let b=0;return a.supervisor_approval?.status&&b++,a.manager_approval?.status&&b++,a.admin_approval?.status&&b++,b})(a.approval_status),h=a.price_analysis,i=h?.profit_per_quintal>0,j=h?.profit_per_quintal<0;return(0,b.jsxs)("div",{className:`bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300 ${d.hover} ${e?"ring-2 ring-indigo-500/50":""}`,children:[(0,b.jsx)("div",{className:"p-4 md:p-5 cursor-pointer",onClick:()=>p(e?null:a.transaction_id),children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,b.jsx)("div",{className:`p-3 rounded-xl bg-gradient-to-br ${d.color} text-white shadow-lg`,children:(a=>{switch(a){case"deposit":default:return(0,b.jsx)(B,{className:"w-4 h-4"});case"sell":case"withdraw":return(0,b.jsx)(A,{className:"w-4 h-4"});case"loan":return(0,b.jsx)(g.CreditCard,{className:"w-4 h-4"})}})(a.transaction_type)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[(0,b.jsx)("h4",{className:"font-bold text-gray-900",children:d.label}),(0,b.jsx)("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full border ${d.badge}`,children:"+"===a.symbol?"CREDIT":"DEBIT"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-1 ${d.light} ${d.text} rounded-lg text-xs font-medium`,children:[(0,b.jsx)(M.Wheat,{className:"w-3 h-3"}),a.grain?.grain_type]}),(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-700 rounded-lg text-xs font-medium",children:[(0,b.jsx)(N.Scale,{className:"w-3 h-3"}),a.grain?.quantity_quintal," ",a.grain?.unit]}),(0,b.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-purple-50 text-purple-700 rounded-lg text-xs font-medium",children:["Grade ",a.grain?.quality]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap text-xs text-gray-500",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(y.Calendar,{className:"w-3 h-3"}),new Date(a.transaction_date).toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(C.Clock,{className:"w-3 h-3"}),new Date(a.transaction_date).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]}),a.warehouse&&(0,b.jsxs)("span",{className:"flex items-center gap-1 bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded",children:[(0,b.jsx)(E.MapPin,{className:"w-3 h-3"}),a.warehouse.name]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"hidden md:flex flex-col items-center gap-1",children:[(0,b.jsx)("div",{className:"flex items-center gap-1",children:[0,1,2].map(a=>(0,b.jsx)("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs transition-all ${a<f?"bg-gradient-to-br from-emerald-500 to-green-600 text-white":"bg-gray-100 text-gray-400"}`,children:a<f?"✓":""},a))}),(0,b.jsxs)("span",{className:"text-xs text-gray-400",children:[f,"/3"]})]}),h&&0!==h.profit_percent&&(0,b.jsx)("div",{className:`hidden sm:flex flex-col items-end px-2 py-1 rounded-lg ${i?"bg-emerald-50":j?"bg-rose-50":""}`,children:(0,b.jsxs)("span",{className:`text-xs font-medium flex items-center gap-1 ${i?"text-emerald-600":j?"text-rose-600":"text-gray-500"}`,children:[i?(0,b.jsx)(l.TrendingUp,{className:"w-3 h-3"}):j?(0,b.jsx)(m.TrendingDown,{className:"w-3 h-3"}):null,h.profit_percent>0?"+":"",h.profit_percent?.toFixed(1),"%"]})}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:`text-xl font-bold ${"+"===a.symbol?"text-emerald-600":"text-gray-900"}`,children:[a.symbol,r(a.grain?.total_amount)]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["@",r(a.grain?.price_per_quintal),"/Qtl"]})]})]})]})}),e&&(0,b.jsxs)("div",{className:"border-t border-gray-100 bg-gradient-to-br from-gray-50 to-indigo-50/30 p-4 md:p-5 animate-in slide-in-from-top-2 duration-300",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,b.jsxs)("h5",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,b.jsx)(F.User,{className:"w-4 h-4 text-indigo-600"}),"Farmer Details"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.user?.user_image&&(0,b.jsx)("img",{src:a.user.user_image,alt:a.user.name,className:"w-12 h-12 rounded-xl object-cover border-2 border-white shadow"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 truncate",children:a.user?.name}),(0,b.jsx)("p",{className:"text-xs text-indigo-600 font-mono",children:a.user?.farmerId}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:[(0,b.jsx)(G.Phone,{className:"w-3 h-3"}),a.user?.phone_number]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,b.jsxs)("h5",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,b.jsx)(l.TrendingUp,{className:"w-4 h-4 text-indigo-600"}),"Price Analysis"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Deposit Price"}),(0,b.jsxs)("span",{className:"font-semibold text-gray-900",children:[r(h?.deposit_price),"/Qtl"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Today's Price"}),(0,b.jsxs)("span",{className:"font-semibold text-gray-900",children:[r(h?.today_price),"/Qtl"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Profit/Qtl"}),(0,b.jsxs)("span",{className:`font-bold ${i?"text-emerald-600":j?"text-rose-600":"text-gray-900"}`,children:[h?.profit_per_quintal>0?"+":"",r(h?.profit_per_quintal)]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-100",children:[(0,b.jsxs)("h5",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,b.jsx)(J.Shield,{className:"w-4 h-4 text-indigo-600"}),"Approval Status"]}),(0,b.jsx)("div",{className:"space-y-2",children:[{label:"Supervisor",data:a.approval_status?.supervisor_approval,icon:K.UserCheck},{label:"Manager",data:a.approval_status?.manager_approval,icon:J.Shield},{label:"Admin",data:a.approval_status?.admin_approval,icon:L.Crown}].map((a,c)=>(a.icon,(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${a.data?.status?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-400"}`,children:a.data?.status?(0,b.jsx)(I.CheckCircle2,{className:"w-3.5 h-3.5"}):(0,b.jsx)(S.Timer,{className:"w-3.5 h-3.5"})}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:a.label})]}),a.data?.status?(0,b.jsx)("span",{className:"text-xs text-emerald-600 font-medium",children:a.data?.user_id?.name||"Approved"}):(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"Pending"})]},c)))})]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 flex flex-wrap items-center justify-between gap-4",children:[a.warehouse&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(H.Building2,{className:"w-4 h-4 text-indigo-600"}),(0,b.jsxs)("span",{className:"text-gray-600",children:[a.warehouse.name,","," ",a.warehouse.location]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 font-mono",children:[(0,b.jsx)(D.Hash,{className:"w-3 h-3"}),a.transaction_id]})]})]})]},a.transaction_id)})}):(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(z.Package,{className:"w-10 h-10 text-gray-400"})}),(0,b.jsx)("p",{className:"text-gray-600 font-medium text-lg",children:"No transactions found"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"all"!==f?"Try selecting a different filter":"No transactions for this grain category yet"})]})}),(0,b.jsx)("div",{className:"border-t border-gray-100 px-4 md:px-8 py-4 bg-white",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing"," ",(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:w.length})," ","of"," ",(0,b.jsx)("span",{className:"font-semibold",children:i?.pagination?.totalRecords||0})," ","transactions"]}),i?.pagination?.totalPages>1&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(P.ChevronLeft,{className:"w-4 h-4 text-gray-600"})}),(0,b.jsx)("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-medium",children:i?.pagination?.currentPage}),(0,b.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(Q.ChevronRight,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,b.jsx)("button",{onClick:()=>d(!1),className:"w-full md:w-auto px-6 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-medium rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg shadow-indigo-500/30 hover:shadow-xl",children:"Close"})]})})]})}):null};function U(a){return"₹"+a.toLocaleString("en-IN")}function V(a){return parseFloat(a).toFixed(2)+" Qtl"}a.s(["default",0,()=>{let[a,d]=(0,c.useState)({}),[x,y]=(0,c.useState)(0),[z,A]=(0,c.useState)(0),[B,C]=(0,c.useState)(0),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)({}),[H,I]=(0,c.useState)({}),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(null),{getprofile:P}=(0,u.default)(),Q=async()=>{try{let a=await fetch(`${v.default}/user/dashboardanalytics`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok)throw Error("Failed to fetch dashboard analytics");let b=await a.json();y(b.totalCost),C(b.totalGrainQuantity),A(b.availableCredit||0),E(b.totalGrain||[])}catch(a){console.error(a),t.toast.error("Failed to load dashboard analytics")}},R=async()=>{try{K(!0);let a=await fetch(`${v.default}/pricehistory/todayprice`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok)throw Error("Failed to fetch today's market price");let b=(await a.json()).todayprice||{};I(b);let c={};Object.entries(b).forEach(([a,b])=>{let{max:d,avg:f,min:g,change:h}=b;c[a]={max:d,avg:f,min:g,change:h,icon:"Wheat"===a?o.default:"Rice"===a?j:e}}),G(c)}catch(a){console.error(a),t.toast.error("Failed to load today's market price")}finally{K(!1)}};return((0,c.useEffect)(()=>{(async()=>{try{let a=await P();d(a.profile)}catch(a){console.error(a)}})(),Q(),R()},[]),J)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)(w.default,{})})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-6 bg-gray-50/50 min-h-screen p-2",children:[(0,b.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 text-white p-8 rounded-2xl shadow-xl",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),(0,b.jsxs)("div",{className:"relative z-10 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-4xl font-bold mb-2 flex items-center gap-3",children:["Welcome, ",a?.name?a.name.split(" ")[0]:"User","!",(0,b.jsx)(s.Sparkles,{className:"h-8 w-8 text-yellow-300 animate-pulse"})]}),(0,b.jsx)("p",{className:"text-lg opacity-95 font-medium",children:"Safe Grain, Prosperous Farmer"})]}),(0,b.jsx)(k,{className:"h-20 w-20 text-yellow-300 opacity-80 animate-spin-slow hidden md:block"})]}),(0,b.jsx)("div",{className:"absolute -bottom-20 -right-20 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),(0,b.jsx)("div",{className:"absolute -top-20 -left-20 w-40 h-40 bg-white/10 rounded-full blur-3xl"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"group relative bg-white p-6 rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-50 to-transparent opacity-60"}),(0,b.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Total Grain Value"}),(0,b.jsx)("p",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-600 to-emerald-500 bg-clip-text text-transparent",children:U(x)}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,b.jsx)(p.ArrowUpRight,{className:"h-4 w-4 text-emerald-500"}),(0,b.jsx)("span",{className:"text-xs text-emerald-600 font-medium",children:"+12.5% this month"})]})]}),(0,b.jsx)("div",{className:"p-3 bg-emerald-100 rounded-xl group-hover:scale-110 transition-transform",children:(0,b.jsx)(n.Warehouse,{className:"h-8 w-8 text-emerald-600"})})]})]}),(0,b.jsxs)("div",{className:"group relative bg-white p-6 rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-transparent opacity-60"}),(0,b.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Available Credit"}),(0,b.jsx)("p",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-500 bg-clip-text text-transparent",children:U(z)}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,b.jsx)(r.Activity,{className:"h-4 w-4 text-blue-500"}),(0,b.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"Instant approval"})]})]}),(0,b.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform",children:(0,b.jsx)(g.CreditCard,{className:"h-8 w-8 text-blue-600"})})]})]}),(0,b.jsxs)("div",{className:"group relative bg-white p-6 rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-transparent opacity-60"}),(0,b.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:["Total Grain (","Qtl",")"]}),(0,b.jsx)("p",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-purple-500 bg-clip-text text-transparent",children:V(B)}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,b.jsx)(f.BarChart3,{className:"h-4 w-4 text-purple-500"}),(0,b.jsx)("span",{className:"text-xs text-purple-600 font-medium",children:"High quality grain"})]})]}),(0,b.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform",children:(0,b.jsx)(f.BarChart3,{className:"h-8 w-8 text-purple-600"})})]})]}),(0,b.jsxs)("div",{className:"group relative bg-white p-6 rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50 to-transparent opacity-60"}),(0,b.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Avg Profit (est.)"}),(0,b.jsxs)("p",{className:"text-2xl font-bold bg-gradient-to-r from-orange-600 to-orange-500 bg-clip-text text-transparent",children:[D.length?(D.reduce((a,b)=>a+b.avgProfitPerQtl,0)/D.length).toFixed(2):"0","%"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,b.jsx)(l.TrendingUp,{className:"h-4 w-4 text-orange-500"}),(0,b.jsx)("span",{className:"text-xs text-orange-600 font-medium",children:"Above market avg"})]})]}),(0,b.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl group-hover:scale-110 transition-transform",children:(0,b.jsx)(l.TrendingUp,{className:"h-8 w-8 text-orange-600"})})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row justify-center items-stretch gap-5 w-full",children:[(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 w-full lg:w-2/3",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 bg-emerald-100 rounded-lg",children:(0,b.jsx)(n.Warehouse,{className:"h-5 w-5 text-emerald-600"})}),"Current Grain Inventory"]}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Track and manage your stored grains"})]}),(0,b.jsxs)("button",{onClick:()=>{t.toast.success("CSV Exported!")},className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-purple-500 text-white px-4 py-2.5 rounded-xl hover:shadow-lg transition-all text-sm font-medium",children:[(0,b.jsx)(h.Download,{className:"h-4 w-4"}),"Export CSV"]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Type"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Quality"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Quantity"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Total Value"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Avg Profit"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-50",children:D.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-1.5 bg-emerald-50 rounded-lg",children:"Wheat"===a.grain_type?(0,b.jsx)(o.default,{className:"h-4 w-4 text-emerald-600"}):"Rice"===a.grain_type?(0,b.jsx)(j,{className:"h-4 w-4 text-emerald-600"}):(0,b.jsx)(e,{className:"h-4 w-4 text-emerald-600"})}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:a.grain_type})]})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:["Grade ",a.quality]})}),(0,b.jsx)("td",{className:"px-4 py-4 font-medium text-gray-900",children:V(a.total_quantity)}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("span",{className:"font-bold text-emerald-600",children:U(a.total_value)})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[a.avgProfitPerQtl>=0?(0,b.jsx)(p.ArrowUpRight,{className:"h-4 w-4 text-emerald-500"}):(0,b.jsx)(q.ArrowDownRight,{className:"h-4 w-4 text-red-500"}),(0,b.jsxs)("span",{className:`font-bold ${a.avgProfitPerQtl>=0?"text-emerald-600":"text-red-600"}`,children:[parseFloat(a.avgProfitPerQtl).toFixed(2),"%"]})]})}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("button",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-3 py-1.5 rounded-lg text-xs font-medium hover:shadow-md transition-all",onClick:()=>{M(!0),O(a.category_id)},children:"View Details"})})]},c))})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 w-full lg:w-1/3",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,b.jsx)(l.TrendingUp,{className:"h-5 w-5 text-purple-600"})}),"Today's Market Rates"]}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Live market price updates"})]}),(0,b.jsx)("div",{className:"space-y-3 overflow-y-auto max-h-[400px] pr-2 no-scrollbar",children:Object.entries(F).map(([a,{max:c,avg:d,min:e,change:f,icon:g}])=>(0,b.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-white border border-gray-100 rounded-xl p-4 hover:shadow-md transition-all",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-50 rounded-lg",children:(0,b.jsx)(g,{className:"h-5 w-5 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Per Quintal"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Max"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:U(c)}),(0,b.jsx)("span",{className:`inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full text-xs font-medium ${f.max>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:f.max>=0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.TrendingUp,{className:"h-3 w-3"}),"+",f.max.toFixed(2),"%"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.TrendingDown,{className:"h-3 w-3"}),f.max.toFixed(2),"%"]})})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Avg"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:U(d)}),(0,b.jsx)("span",{className:`inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full text-xs font-medium ${f.avg>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:f.avg>=0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.TrendingUp,{className:"h-3 w-3"}),"+",f.avg.toFixed(2),"%"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.TrendingDown,{className:"h-3 w-3"}),f.avg.toFixed(2),"%"]})})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Min"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:U(e)}),(0,b.jsx)("span",{className:`inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full text-xs font-medium ${f.min>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:f.min>=0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.TrendingUp,{className:"h-3 w-3"}),"+",f.min.toFixed(2),"%"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.TrendingDown,{className:"h-3 w-3"}),f.min.toFixed(2),"%"]})})]})]})]})]},a))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("button",{className:"group relative overflow-hidden bg-white border border-gray-100 p-6 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500 to-emerald-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,b.jsxs)("div",{className:"relative z-10 transition-colors duration-300",children:[(0,b.jsx)("div",{className:"inline-flex p-3 bg-emerald-100 rounded-xl mb-4 group-hover:bg-white/20 transition-colors",children:(0,b.jsx)(i.Plus,{className:"h-8 w-8 text-emerald-600 group-hover:text-white"})}),(0,b.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-white",children:"Deposit Grain"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 group-hover:text-white/90",children:"Add new grain into bank"})]})]}),(0,b.jsxs)("button",{onClick:()=>setCurrentPage("credit"),className:"group relative overflow-hidden bg-white border border-gray-100 p-6 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,b.jsxs)("div",{className:"relative z-10 transition-colors duration-300",children:[(0,b.jsx)("div",{className:"inline-flex p-3 bg-blue-100 rounded-xl mb-4 group-hover:bg-white/20 transition-colors",children:(0,b.jsx)(g.CreditCard,{className:"h-8 w-8 text-blue-600 group-hover:text-white"})}),(0,b.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-white",children:"Get Credit"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 group-hover:text-white/90",children:"Instant credit up to 60%"})]})]}),(0,b.jsxs)("button",{onClick:()=>setCurrentPage("sell"),className:"group relative overflow-hidden bg-white border border-gray-100 p-6 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,b.jsxs)("div",{className:"relative z-10 transition-colors duration-300",children:[(0,b.jsx)("div",{className:"inline-flex p-3 bg-purple-100 rounded-xl mb-4 group-hover:bg-white/20 transition-colors",children:(0,b.jsx)(l.TrendingUp,{className:"h-8 w-8 text-purple-600 group-hover:text-white"})}),(0,b.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-white",children:"Sell Grain"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 group-hover:text-white/90",children:"Get better prices"})]})]})]})]}),(0,b.jsx)(T,{isOpen:L,setIsOpen:M,category_id:N})]})}],36991)}];

//# sourceMappingURL=src_app_dashboard_page_jsx_e407ba5e._.js.map