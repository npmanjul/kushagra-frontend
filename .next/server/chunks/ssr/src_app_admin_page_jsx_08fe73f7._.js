module.exports=[33824,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(83490),f=a.i(60246),g=a.i(41710),h=a.i(83497),i=a.i(90166),j=a.i(16201),k=a.i(15618),l=a.i(23025),m=a.i(70893),n=a.i(4720),o=a.i(24669),p=a.i(53277),q=a.i(83415),r=a.i(69520),s=a.i(32860),t=a.i(73570),u=a.i(50522),v=a.i(96221),w=a.i(46864),x=a.i(3314),y=a.i(41961),z=a.i(35050),A=a.i(22520),B=a.i(57344),C=a.i(60779);function D(){let a=(0,d.useRouter)(),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(!0),[J,K]=(0,c.useState)({}),[L,M]=(0,c.useState)(!0),[N,O]=(0,c.useState)(!0),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)("all");(0,c.useEffect)(()=>{T(),U(),V()},[]);let T=async()=>{O(!0),Q(null);try{let a=await fetch(`${C.default}/overview/admin`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),b=await a.json();b.success?E(b.data):Q(b.message||"Failed to fetch data")}catch(a){Q("Network error. Please try again.")}finally{O(!1)}},U=async()=>{I(!0);try{let a=await e.default.get(`${C.default}/transaction/getalltransactions`,{params:{limit:6,page:1},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a.data.success&&G(a.data.data)}catch(a){console.error("Error fetching transactions:",a)}finally{I(!1)}},V=async()=>{M(!0);try{let a=await fetch(`${C.default}/pricehistory/todayprice`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok)throw Error("Failed to fetch market prices");let b=await a.json();K(b.todayprice||{})}catch(a){console.error("Error fetching market rates:",a)}finally{M(!1)}},W={all:[{title:"Deposit Grain",description:"Add new grain stock",icon:k.Plus,href:"/admin/deposit",bg:"bg-gradient-to-br from-green-500 to-green-600",shadow:"shadow-green-200"},{title:"Withdraw Grain",description:"Process withdrawals",icon:l.Minus,href:"/admin/withdraw",bg:"bg-gradient-to-br from-orange-500 to-orange-600",shadow:"shadow-orange-200"},{title:"View Requests",description:"23 pending",icon:g.Clock,href:"/admin/requests",bg:"bg-gradient-to-br from-blue-500 to-blue-600",shadow:"shadow-blue-200"},{title:"Transactions",description:"View all transactions",icon:n.FileText,href:"/admin/transactions",bg:"bg-gradient-to-br from-purple-500 to-purple-600",shadow:"shadow-purple-200"}],users:[{title:"Manage Farmers",description:`${D?.farmers||0} registered`,icon:f.Users,href:"/admin/farmers",bg:"bg-gradient-to-br from-emerald-500 to-emerald-600",shadow:"shadow-emerald-200"},{title:"Manage Managers",description:`${D?.managers||0} active`,icon:q.UserCircle,href:"/admin/managers",bg:"bg-gradient-to-br from-blue-500 to-blue-600",shadow:"shadow-blue-200"},{title:"Manage Supervisors",description:`${D?.supervisors||0} active`,icon:x.Shield,href:"/admin/supervisors",bg:"bg-gradient-to-br from-violet-500 to-violet-600",shadow:"shadow-violet-200"},{title:"Manage Staff",description:`${D?.staff||0} active`,icon:y.Briefcase,href:"/admin/staff",bg:"bg-gradient-to-br from-pink-500 to-pink-600",shadow:"shadow-pink-200"},{title:"New Employee",description:"Onboard employee",icon:w.UserCheck,href:"/admin/employee",bg:"bg-gradient-to-br from-teal-500 to-teal-600",shadow:"shadow-teal-200"}],operations:[{title:"Deposit Grain",description:"Add new grain stock",icon:k.Plus,href:"/admin/deposit",bg:"bg-gradient-to-br from-green-500 to-green-600",shadow:"shadow-green-200"},{title:"Withdraw Grain",description:"Process withdrawals",icon:l.Minus,href:"/admin/withdraw",bg:"bg-gradient-to-br from-orange-500 to-orange-600",shadow:"shadow-orange-200"},{title:"Pending Requests",description:"23 waiting",icon:g.Clock,href:"/admin/requests",bg:"bg-gradient-to-br from-amber-500 to-amber-600",shadow:"shadow-amber-200"},{title:"Update Prices",description:"Set grain prices",icon:o.TrendingUp,href:"/admin/updateprice",bg:"bg-gradient-to-br from-indigo-500 to-indigo-600",shadow:"shadow-indigo-200"}],inventory:[{title:"Warehouses",description:"Manage storage",icon:m.Warehouse,href:"/admin/warehouses",bg:"bg-gradient-to-br from-slate-600 to-slate-700",shadow:"shadow-slate-200"},{title:"Update Prices",description:"Set grain prices",icon:o.TrendingUp,href:"/admin/updateprice",bg:"bg-gradient-to-br from-cyan-500 to-cyan-600",shadow:"shadow-cyan-200"},{title:"Transactions",description:"View history",icon:n.FileText,href:"/admin/transactions",bg:"bg-gradient-to-br from-rose-500 to-rose-600",shadow:"shadow-rose-200"}]},X=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a),Y=({title:c,value:d,icon:e,color:f,href:g,subtitle:h})=>{let i={emerald:{bg:"bg-emerald-50",iconBg:"bg-emerald-100",iconColor:"text-emerald-600",border:"border-emerald-100",hover:"hover:border-emerald-300 hover:shadow-emerald-100"},blue:{bg:"bg-blue-50",iconBg:"bg-blue-100",iconColor:"text-blue-600",border:"border-blue-100",hover:"hover:border-blue-300 hover:shadow-blue-100"},violet:{bg:"bg-violet-50",iconBg:"bg-violet-100",iconColor:"text-violet-600",border:"border-violet-100",hover:"hover:border-violet-300 hover:shadow-violet-100"},amber:{bg:"bg-amber-50",iconBg:"bg-amber-100",iconColor:"text-amber-600",border:"border-amber-100",hover:"hover:border-amber-300 hover:shadow-amber-100"}},j=i[f]||i.emerald;return(0,b.jsxs)("div",{onClick:()=>a.push(g),className:`bg-white rounded-2xl border-2 ${j.border} ${j.hover} 
          p-6 cursor-pointer transition-all duration-300 hover:shadow-lg group`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)("div",{className:`p-3 rounded-xl ${j.iconBg}`,children:(0,b.jsx)(e,{className:`w-6 h-6 ${j.iconColor}`})}),(0,b.jsx)(u.ChevronRight,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600  group-hover:translate-x-1 transition-all"})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:d}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 mt-1",children:c}),h&&(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:h})]})]})},Z=({title:a,value:c,icon:d,trend:e,trendUp:f})=>(0,b.jsx)("div",{className:"bg-white rounded-2xl border border-gray-100 p-5 hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"p-2.5 bg-gray-100 rounded-xl",children:(0,b.jsx)(d,{className:"w-5 h-5 text-gray-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:a}),(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900 mt-0.5",children:c})]})]}),e&&(0,b.jsxs)("div",{className:`flex items-center space-x-1 px-2.5 py-1 rounded-full text-xs font-medium
              ${f?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[f?(0,b.jsx)(A.ArrowUpRight,{className:"w-3 h-3"}):(0,b.jsx)(B.ArrowDownRight,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:e})]})]})});return(0,b.jsxs)("div",{className:"space-y-8 pb-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Welcome back, Admin ðŸ‘‹"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Here's what's happening with your warehouse today."})]}),(0,b.jsx)("div",{className:"flex items-center space-x-3",children:(0,b.jsxs)("button",{onClick:T,disabled:N,className:"flex items-center space-x-2 px-4 py-2.5 bg-white border border-gray-200  rounded-xl text-gray-600 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[(0,b.jsx)(r.RefreshCw,{className:`w-4 h-4 ${N?"animate-spin":""}`}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Refresh"})]})})]}),P&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center space-x-3",children:[(0,b.jsx)(t.AlertTriangle,{className:"w-5 h-5 text-red-500"}),(0,b.jsx)("p",{className:"text-red-700",children:P}),(0,b.jsx)("button",{onClick:T,className:"ml-auto text-red-600 hover:text-red-800 font-medium text-sm",children:"Retry"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(f.Users,{className:"w-5 h-5 text-gray-600"}),"User Overview"]}),(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:["Total:"," ",(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:D?D.farmers+D.managers+D.supervisors+D.staff:0})," ","users"]})]}),N?(0,b.jsx)(()=>(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 p-6 animate-pulse",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-xl"}),(0,b.jsx)("div",{className:"w-5 h-5 bg-gray-200 rounded"})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"w-16 h-8 bg-gray-200 rounded"}),(0,b.jsx)("div",{className:"w-24 h-4 bg-gray-200 rounded mt-2"})]})]},a))}),{}):(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsx)(Y,{title:"Farmers",value:D?.farmers||0,icon:z.Wheat,color:"emerald",href:"/admin/farmers",subtitle:"Registered farmers"}),(0,b.jsx)(Y,{title:"Managers",value:D?.managers||0,icon:q.UserCircle,color:"blue",href:"/admin/managers",subtitle:"Warehouse managers"}),(0,b.jsx)(Y,{title:"Supervisors",value:D?.supervisors||0,icon:x.Shield,color:"violet",href:"/admin/supervisors",subtitle:"Field supervisors"}),(0,b.jsx)(Y,{title:"Staff",value:D?.staff||0,icon:y.Briefcase,color:"amber",href:"/admin/staff",subtitle:"Support staff"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(Z,{title:"Total Inventory",value:`${45678..toLocaleString()} Qt`,icon:h.Package,trend:"8%",trendUp:!0}),(0,b.jsx)(Z,{title:"Monthly Revenue",value:X(125e4),icon:i.DollarSign,trend:"15%",trendUp:!0}),(0,b.jsx)(Z,{title:"Pending Requests",value:23,icon:g.Clock,trend:"5%",trendUp:!1}),(0,b.jsx)(Z,{title:"Completed Today",value:15,icon:j.CheckCircle,trend:"12%",trendUp:!0})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Quick Actions"}),(0,b.jsx)("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[{id:"all",label:"Overview"},{id:"users",label:"Users"},{id:"operations",label:"Operations"},{id:"inventory",label:"Inventory"}].map(a=>(0,b.jsx)("button",{onClick:()=>S(a.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all
                  ${R===a.id?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:a.label},a.id))})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:W[R]?.map(c=>(0,b.jsxs)("button",{onClick:()=>a.push(c.href),className:`${c.bg} ${c.shadow} p-5 rounded-xl text-white text-left
                hover:scale-105 hover:shadow-xl transition-all duration-300 group`,children:[(0,b.jsx)(c.icon,{className:"w-8 h-8 mb-3 opacity-90"}),(0,b.jsx)("p",{className:"font-semibold text-sm",children:c.title}),(0,b.jsx)("p",{className:"text-xs opacity-80 mt-1",children:c.description}),(0,b.jsx)(s.ArrowRight,{className:"w-4 h-4 mt-3 opacity-0 group-hover:opacity-100  transform translate-x-0 group-hover:translate-x-1 transition-all"})]},c.title))})]}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-2xl border border-gray-100 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Recent Transactions"}),(0,b.jsxs)("button",{onClick:()=>a.push("/admin/transactions"),className:"text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1",children:["View All",(0,b.jsx)(u.ChevronRight,{className:"w-4 h-4"})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:H?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(v.Loader2,{className:"w-6 h-6 animate-spin text-gray-400"})}):0===F.length?(0,b.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No recent transactions found"}):(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"text-left text-xs text-gray-500 uppercase tracking-wide border-b",children:[(0,b.jsx)("th",{className:"pb-3 font-medium",children:"Transaction"}),(0,b.jsx)("th",{className:"pb-3 font-medium",children:"Grain"}),(0,b.jsx)("th",{className:"pb-3 font-medium",children:"Quantity"}),(0,b.jsx)("th",{className:"pb-3 font-medium",children:"Amount"}),(0,b.jsx)("th",{className:"pb-3 font-medium",children:"Status"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:F.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${"deposit"===a.transaction_type?"bg-green-100 text-green-600":"withdraw"===a.transaction_type?"bg-orange-100 text-orange-600":"sell"===a.transaction_type?"bg-blue-100 text-blue-600":"bg-purple-100 text-purple-600"}`,children:"deposit"===a.transaction_type?(0,b.jsx)(k.Plus,{className:"w-4 h-4"}):"withdraw"===a.transaction_type?(0,b.jsx)(l.Minus,{className:"w-4 h-4"}):(0,b.jsx)(n.FileText,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.user_id?.name||"Unknown"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:a.transaction_type})]})]})}),(0,b.jsx)("td",{className:"py-4 text-gray-600",children:a.grain?.[0]?.category_id?.grain_type||"-"}),(0,b.jsxs)("td",{className:"py-4 text-gray-600",children:[a.grain?.[0]?.quantity_quintal||0," Qt"]}),(0,b.jsx)("td",{className:"py-4 font-medium text-gray-900",children:X(a.total_amount||0)}),(0,b.jsx)("td",{className:"py-4",children:(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium capitalize
                          ${"completed"===a.transaction_status?"bg-green-100 text-green-700":"rejected"===a.transaction_status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:a.transaction_status})})]},a._id))})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,b.jsx)(o.TrendingUp,{className:"h-5 w-5 text-purple-600"})}),"Today's Market Rates"]}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Live market price updates"})]}),L?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(v.Loader2,{className:"w-6 h-6 animate-spin text-gray-400"})}):0===Object.keys(J).length?(0,b.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No market data available"}):(0,b.jsx)("div",{className:"space-y-3 overflow-y-auto max-h-[400px] pr-2",children:J&&Object.entries(J).map(([a,c])=>{let{max:d,avg:e,min:f,change:g}=c||{};return(0,b.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-white border border-gray-100 rounded-xl p-4 hover:shadow-md transition-all",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-50 rounded-lg",children:(0,b.jsx)(z.Wheat,{className:"h-5 w-5 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Per Quintal"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Max"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:X(d||0)}),g&&"number"==typeof g.max&&(0,b.jsx)("span",{className:`inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full text-xs font-medium ${g.max>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:g.max>=0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.TrendingUp,{className:"h-3 w-3"}),"+",g.max.toFixed(2),"%"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.TrendingDown,{className:"h-3 w-3"}),g.max.toFixed(2),"%"]})})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Avg"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:X(e||0)}),g&&"number"==typeof g.avg&&(0,b.jsx)("span",{className:`inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full text-xs font-medium ${g.avg>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:g.avg>=0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.TrendingUp,{className:"h-3 w-3"}),"+",g.avg.toFixed(2),"%"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.TrendingDown,{className:"h-3 w-3"}),g.avg.toFixed(2),"%"]})})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Min"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:X(f||0)}),g&&"number"==typeof g.min&&(0,b.jsx)("span",{className:`inline-flex items-center gap-0.5 px-2 py-0.5 rounded-full text-xs font-medium ${g.min>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:g.min>=0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.TrendingUp,{className:"h-3 w-3"}),"+",g.min.toFixed(2),"%"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.TrendingDown,{className:"h-3 w-3"}),g.min.toFixed(2),"%"]})})]})]})]})]},a)})}),(0,b.jsxs)("button",{onClick:()=>a.push("/admin/updateprice"),className:"w-full mt-4 py-3 bg-gray-900 text-white rounded-xl font-medium hover:bg-gray-800 transition-colors flex items-center justify-center gap-2",children:["Update Prices",(0,b.jsx)(s.ArrowRight,{className:"w-4 h-4"})]})]})]})]})}a.s(["default",()=>D])}];

//# sourceMappingURL=src_app_admin_page_jsx_08fe73f7._.js.map